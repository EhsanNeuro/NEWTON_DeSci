{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ehsan\\\\newton-beta\\\\frontend\\\\src\\\\components\\\\FrensSection\\\\FrensSection.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '@telegram-apps/telegram-ui/dist/styles.css';\nimport { AppRoot, List, Chip, Avatar, Image } from '@telegram-apps/telegram-ui';\nimport { MyTabbar } from './components/MyTabbar'; // فرض کنید این کامپوننت وجود دارد\nimport NewtonLogo from '../src/images/apologonobg.png'; // مسیر لوگو\nimport LoadingPage from './components/LoadingPage'; // فرض کنید این کامپوننت وجود دارد\nimport { retrieveLaunchParams } from '@telegram-apps/sdk';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const App = () => {\n  _s();\n  const {\n    initDataRaw\n  } = retrieveLaunchParams();\n  const [user, setUser] = useState(null); // اطلاعات کاربر تلگرام\n  const [userData, setUserData] = useState(null); // اطلاعات کاربر از بک‌اند\n  const [loading, setLoading] = useState(true); // حالت بارگذاری\n\n  useEffect(() => {\n    var _tg$initDataUnsafe;\n    const tg = window.Telegram.WebApp;\n\n    // آماده‌سازی وب‌اپ تلگرام\n    tg.ready();\n\n    // دریافت اطلاعات کاربر تلگرام\n    const telegramUser = ((_tg$initDataUnsafe = tg.initDataUnsafe) === null || _tg$initDataUnsafe === void 0 ? void 0 : _tg$initDataUnsafe.user) || null;\n    setUser(telegramUser);\n\n    // تابع احراز هویت و دریافت اطلاعات کاربر\n    const authenticateAndFetchUser = async () => {\n      try {\n        // درخواست به /auth/login برای دریافت access_token\n        const loginResponse = await fetch('http://37.27.29.15:3000/auth/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            initData: initDataRaw,\n            referralToken: \"\" // در صورت وجود، مقدار واقعی را جایگزین کنید\n          })\n        });\n        if (!loginResponse.ok) {\n          throw new Error(`Login failed: ${loginResponse.status}`);\n        }\n        const loginData = await loginResponse.json();\n        const accessToken = loginData.access_token;\n\n        // درخواست به /user/me برای دریافت اطلاعات کاربر\n        const userResponse = await fetch('http://37.27.29.15:3000/user/me', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${accessToken}`\n          }\n        });\n        if (!userResponse.ok) {\n          throw new Error(`Fetching user data failed: ${userResponse.status}`);\n        }\n        const userData = await userResponse.json();\n        setUserData(userData);\n      } catch (error) {\n        console.error('Error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    authenticateAndFetchUser();\n\n    // تنظیم رنگ‌های پوسته به صورت داینامیک\n    const {\n      secondary_bg_color\n    } = tg.themeParams || {};\n    if (secondary_bg_color) {\n      document.body.style.backgroundColor = secondary_bg_color;\n    }\n  }, [initDataRaw]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(AppRoot, {\n      children: /*#__PURE__*/_jsxDEV(LoadingPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(AppRoot, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100vh',\n        // ارتفاع کامل ویوپورت\n        overflow: 'hidden' // جلوگیری از اسکرول کلی\n      },\n      children: [/*#__PURE__*/_jsxDEV(List, {\n        style: {\n          background: 'var(--tgui--secondary_bg_color)',\n          padding: 10,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          flexShrink: 0 // جلوگیری از کوچک شدن\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 25,\n            alignItems: 'center',\n            backgroundColor: 'var(--tgui--primary_bg_color)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Chip, {\n            mode: \"elevated\",\n            before: /*#__PURE__*/_jsxDEV(Avatar, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 43\n            }, this),\n            children: (user === null || user === void 0 ? void 0 : user.first_name) || 'Guest'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Image, {\n            size: 64,\n            src: NewtonLogo,\n            alt: \"App logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Chip, {\n            mode: \"outline\",\n            before: /*#__PURE__*/_jsxDEV(Avatar, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 42\n            }, this),\n            children: (userData === null || userData === void 0 ? void 0 : userData.tokens) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MyTabbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"4Lvrj5jq4weTYzI57B4yrS0C4B0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","AppRoot","List","Chip","Avatar","Image","MyTabbar","NewtonLogo","LoadingPage","retrieveLaunchParams","jsxDEV","_jsxDEV","App","_s","initDataRaw","user","setUser","userData","setUserData","loading","setLoading","_tg$initDataUnsafe","tg","window","Telegram","WebApp","ready","telegramUser","initDataUnsafe","authenticateAndFetchUser","loginResponse","fetch","method","headers","body","JSON","stringify","initData","referralToken","ok","Error","status","loginData","json","accessToken","access_token","userResponse","error","console","secondary_bg_color","themeParams","document","style","backgroundColor","children","fileName","_jsxFileName","lineNumber","columnNumber","display","flexDirection","height","overflow","background","padding","justifyContent","alignItems","flexShrink","gap","mode","before","size","first_name","src","alt","tokens","_c","$RefreshReg$"],"sources":["C:/Users/Ehsan/newton-beta/frontend/src/components/FrensSection/FrensSection.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '@telegram-apps/telegram-ui/dist/styles.css';\r\nimport { AppRoot, List, Chip, Avatar, Image } from '@telegram-apps/telegram-ui';\r\nimport { MyTabbar } from './components/MyTabbar'; // فرض کنید این کامپوننت وجود دارد\r\nimport NewtonLogo from '../src/images/apologonobg.png'; // مسیر لوگو\r\nimport LoadingPage from './components/LoadingPage'; // فرض کنید این کامپوننت وجود دارد\r\nimport { retrieveLaunchParams } from '@telegram-apps/sdk';\r\n\r\nexport const App = () => {\r\n  const { initDataRaw } = retrieveLaunchParams();\r\n\r\n  const [user, setUser] = useState(null); // اطلاعات کاربر تلگرام\r\n  const [userData, setUserData] = useState(null); // اطلاعات کاربر از بک‌اند\r\n  const [loading, setLoading] = useState(true); // حالت بارگذاری\r\n\r\n  useEffect(() => {\r\n    const tg = window.Telegram.WebApp;\r\n\r\n    // آماده‌سازی وب‌اپ تلگرام\r\n    tg.ready();\r\n\r\n    // دریافت اطلاعات کاربر تلگرام\r\n    const telegramUser = tg.initDataUnsafe?.user || null;\r\n    setUser(telegramUser);\r\n\r\n    // تابع احراز هویت و دریافت اطلاعات کاربر\r\n    const authenticateAndFetchUser = async () => {\r\n      try {\r\n        // درخواست به /auth/login برای دریافت access_token\r\n        const loginResponse = await fetch('http://37.27.29.15:3000/auth/login', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            initData: initDataRaw,\r\n            referralToken: \"\", // در صورت وجود، مقدار واقعی را جایگزین کنید\r\n          }),\r\n        });\r\n\r\n        if (!loginResponse.ok) {\r\n          throw new Error(`Login failed: ${loginResponse.status}`);\r\n        }\r\n\r\n        const loginData = await loginResponse.json();\r\n        const accessToken = loginData.access_token;\r\n\r\n        // درخواست به /user/me برای دریافت اطلاعات کاربر\r\n        const userResponse = await fetch('http://37.27.29.15:3000/user/me', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Authorization': `Bearer ${accessToken}`,\r\n          },\r\n        });\r\n\r\n        if (!userResponse.ok) {\r\n          throw new Error(`Fetching user data failed: ${userResponse.status}`);\r\n        }\r\n\r\n        const userData = await userResponse.json();\r\n        setUserData(userData);\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    authenticateAndFetchUser();\r\n\r\n    // تنظیم رنگ‌های پوسته به صورت داینامیک\r\n    const { secondary_bg_color } = tg.themeParams || {};\r\n    if (secondary_bg_color) {\r\n      document.body.style.backgroundColor = secondary_bg_color;\r\n    }\r\n  }, [initDataRaw]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <AppRoot>\r\n        <LoadingPage />\r\n      </AppRoot>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AppRoot>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          height: '100vh', // ارتفاع کامل ویوپورت\r\n          overflow: 'hidden', // جلوگیری از اسکرول کلی\r\n        }}\r\n      >\r\n        {/* هدر ثابت */}\r\n        <List\r\n          style={{\r\n            background: 'var(--tgui--secondary_bg_color)',\r\n            padding: 10,\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flexShrink: 0, // جلوگیری از کوچک شدن\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              gap: 25,\r\n              alignItems: 'center',\r\n              backgroundColor: 'var(--tgui--primary_bg_color)',\r\n            }}\r\n          >\r\n            <Chip mode=\"elevated\" before={<Avatar size={20} />}>\r\n              {user?.first_name || 'Guest'}\r\n            </Chip>\r\n            <Image size={64} src={NewtonLogo} alt=\"App logo\" />\r\n            <Chip mode=\"outline\" before={<Avatar size={20} />}>\r\n              {userData?.tokens || 0}\r\n            </Chip>\r\n          </div>\r\n        </List>\r\n\r\n        {/* ناوبری تب‌بار */}\r\n        <MyTabbar />\r\n      </div>\r\n    </AppRoot>\r\n  );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}