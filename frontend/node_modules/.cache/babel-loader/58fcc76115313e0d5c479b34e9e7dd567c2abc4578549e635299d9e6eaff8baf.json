{"ast":null,"code":"let ie = class vn extends Error {\n  constructor(t, n, s) {\n    super(typeof n == \"object\" ? n.message : n || t, {\n      cause: typeof n == \"object\" ? n.cause : s\n    }), this.type = t, Object.setPrototypeOf(this, vn.prototype);\n  }\n};\nfunction Tn(e) {\n  return e.replace(/[A-Z]/g, t => `_${t.toLowerCase()}`);\n}\nfunction Ho(e) {\n  return e.replace(/_[a-z]/g, t => t[1].toUpperCase());\n}\nconst qo = \"ERR_INVALID_VALUE\",\n  Wo = \"ERR_UNEXPECTED_VALUE\",\n  zo = \"ERR_UNEXPECTED_TYPE\",\n  An = \"ERR_PARSE\";\nfunction Rn(e, t) {\n  const n = {};\n  for (const s in e) {\n    const o = e[s];\n    if (!o) continue;\n    let r, a;\n    typeof o == \"function\" ? (r = s, a = o) : [r, a] = o;\n    try {\n      const i = a(t(r));\n      i !== void 0 && (n[s] = i);\n    } catch (i) {\n      throw new ie(An, `Parser for \"${s}\" property failed${r === s ? \"\" : `. Source field: \"${r}\"`}`, i);\n    }\n  }\n  return n;\n}\nfunction Pn(e) {\n  let t = e;\n  if (typeof t == \"string\") try {\n    t = JSON.parse(t);\n  } catch (n) {\n    throw new ie(qo, {\n      cause: n\n    });\n  }\n  if (typeof t != \"object\" || !t || Array.isArray(t)) throw new ie(Wo);\n  return t;\n}\nfunction U(e, t) {\n  return n => {\n    const s = o => {\n      if (!(n && o === void 0)) try {\n        return t(o);\n      } catch (r) {\n        throw new ie(An, {\n          message: `\"${e}\" transformer failed to parse the value`,\n          cause: r\n        });\n      }\n    };\n    return /* @__PURE__ */Object.assign(s, {\n      isValid(o) {\n        try {\n          return s(o), !0;\n        } catch {\n          return !1;\n        }\n      }\n    });\n  };\n}\nfunction Ne(e, t) {\n  return U(t || \"object\", n => {\n    const s = Pn(n);\n    return Rn(e, o => s[o]);\n  });\n}\nfunction Se(e) {\n  throw new ie(zo, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst Go = U(\"boolean\", e => {\n    if (typeof e == \"boolean\") return e;\n    const t = String(e);\n    if (t === \"1\" || t === \"true\") return !0;\n    if (t === \"0\" || t === \"false\") return !1;\n    Se(e);\n  }),\n  L = U(\"string\", e => {\n    if (typeof e == \"string\" || typeof e == \"number\") return e.toString();\n    Se(e);\n  }),\n  ke = U(\"number\", e => {\n    if (typeof e == \"number\") return e;\n    if (typeof e == \"string\") {\n      const t = Number(e);\n      if (!Number.isNaN(t)) return t;\n    }\n    Se(e);\n  }),\n  Tt = U(\"date\", e => e instanceof Date ? e : new Date(ke()(e) * 1e3));\nfunction On(e, t) {\n  return U(t || \"searchParams\", n => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && Se(n);\n    const s = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return Rn(e, o => {\n      const r = s.get(o);\n      return r === null ? void 0 : r;\n    });\n  });\n}\nfunction it(e) {\n  for (const t in e) e[t] = [Tn(t), e[t]];\n  return e;\n}\nconst Fo = e => {\n  const t = ke(),\n    n = ke(!0),\n    s = L(),\n    o = L(!0),\n    r = Go(!0),\n    a = Ne(it({\n      addedToAttachmentMenu: r,\n      allowsWriteToPm: r,\n      firstName: s,\n      id: t,\n      isBot: r,\n      isPremium: r,\n      languageCode: o,\n      lastName: o,\n      photoUrl: o,\n      username: o\n    }), \"User\")(!0);\n  return On(it({\n    authDate: Tt(),\n    canSendAfter: n,\n    chat: Ne(it({\n      id: t,\n      type: s,\n      title: s,\n      photoUrl: o,\n      username: o\n    }), \"Chat\")(!0),\n    chatInstance: o,\n    chatType: o,\n    hash: s,\n    queryId: o,\n    receiver: a,\n    startParam: o,\n    user: a\n  }), \"initData\")(e);\n};\nfunction ce(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Jo(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Bn(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ce(t)) return t;\n  if (Jo(t)) {\n    let s = \"#\";\n    for (let o = 0; o < 3; o += 1) s += t[1 + o].repeat(2);\n    return s;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n) throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((s, o) => {\n    const r = parseInt(o, 10).toString(16);\n    return s + (r.length === 1 ? \"0\" : \"\") + r;\n  }, \"#\");\n}\nconst Qo = U(\"rgb\", e => Bn(L()(e))),\n  Yo = U(\"themeParams\", e => {\n    const t = Qo(!0);\n    return Object.entries(Pn(e)).reduce((n, [s, o]) => (n[Ho(s)] = t(o), n), {});\n  });\n// @__NO_SIDE_EFFECTS__\nfunction Ko(e) {\n  return JSON.stringify(Object.fromEntries(Object.entries(e).map(([t, n]) => [Tn(t), n])));\n}\n// @__NO_SIDE_EFFECTS__\nfunction Ni(e) {\n  const {\n      initDataRaw: t,\n      startParam: n,\n      showSettings: s,\n      botInline: o\n    } = e,\n    r = new URLSearchParams();\n  return r.set(\"tgWebAppPlatform\", e.platform), r.set(\"tgWebAppThemeParams\", /* @__PURE__ */Ko(e.themeParams)), r.set(\"tgWebAppVersion\", e.version), t && r.set(\"tgWebAppData\", t), n && r.set(\"tgWebAppStartParam\", n), typeof s == \"boolean\" && r.set(\"tgWebAppShowSettings\", s ? \"1\" : \"0\"), typeof o == \"boolean\" && r.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), r.toString();\n}\nfunction Zo(e, t) {\n  return U(\"array\", n => {\n    let s;\n    if (Array.isArray(n)) s = n;else if (typeof n == \"string\") try {\n      const o = JSON.parse(n);\n      Array.isArray(o) && (s = o);\n    } catch {}\n    return s || Se(n), s.map(e);\n  });\n}\nfunction Mn(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nfunction _t(...e) {\n  return e.map(t => {\n    if (typeof t == \"string\") return t;\n    if (Mn(t)) return _t(Object.entries(t).map(n => n[1] && n[0]));\n    if (Array.isArray(t)) return _t(...t);\n  }).filter(Boolean).join(\" \");\n}\nfunction ki(...e) {\n  return e.reduce((t, n) => (Mn(n) && Object.entries(n).forEach(([s, o]) => {\n    const r = _t(t[s], o);\n    r && (t[s] = r);\n  }), t), {});\n}\nlet ue = class Dn extends Error {\n  constructor(t, n, s) {\n    super(typeof n == \"object\" ? n.message : n || t, {\n      cause: typeof n == \"object\" ? n.cause : s\n    }), this.type = t, Object.setPrototypeOf(this, Dn.prototype);\n  }\n};\nfunction Nn(e) {\n  return e.replace(/[A-Z]/g, t => `_${t.toLowerCase()}`);\n}\nfunction Xo(e) {\n  return e.replace(/_[a-z]/g, t => t[1].toUpperCase());\n}\nconst es = \"ERR_INVALID_VALUE\",\n  ts = \"ERR_UNEXPECTED_VALUE\",\n  ns = \"ERR_UNEXPECTED_TYPE\",\n  kn = \"ERR_PARSE\";\nfunction xn(e, t) {\n  const n = {};\n  for (const s in e) {\n    const o = e[s];\n    if (!o) continue;\n    let r, a;\n    typeof o == \"function\" ? (r = s, a = o) : [r, a] = o;\n    try {\n      const i = a(t(r));\n      i !== void 0 && (n[s] = i);\n    } catch (i) {\n      throw new ue(kn, `Parser for \"${s}\" property failed${r === s ? \"\" : `. Source field: \"${r}\"`}`, i);\n    }\n  }\n  return n;\n}\nfunction In(e) {\n  let t = e;\n  if (typeof t == \"string\") try {\n    t = JSON.parse(t);\n  } catch (n) {\n    throw new ue(es, {\n      cause: n\n    });\n  }\n  if (typeof t != \"object\" || !t || Array.isArray(t)) throw new ue(ts);\n  return t;\n}\nfunction B(e, t) {\n  return n => {\n    const s = o => {\n      if (!(n && o === void 0)) try {\n        return t(o);\n      } catch (r) {\n        throw new ue(kn, {\n          message: `\"${e}\" transformer failed to parse the value`,\n          cause: r\n        });\n      }\n    };\n    return /* @__PURE__ */Object.assign(s, {\n      isValid(o) {\n        try {\n          return s(o), !0;\n        } catch {\n          return !1;\n        }\n      }\n    });\n  };\n}\nfunction P(e, t) {\n  return B(t || \"object\", n => {\n    const s = In(n);\n    return xn(e, o => s[o]);\n  });\n}\nfunction Ce(e) {\n  throw new ue(ns, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst xe = B(\"boolean\", e => {\n    if (typeof e == \"boolean\") return e;\n    const t = String(e);\n    if (t === \"1\" || t === \"true\") return !0;\n    if (t === \"0\" || t === \"false\") return !1;\n    Ce(e);\n  }),\n  v = B(\"string\", e => {\n    if (typeof e == \"string\" || typeof e == \"number\") return e.toString();\n    Ce(e);\n  }),\n  pe = B(\"number\", e => {\n    if (typeof e == \"number\") return e;\n    if (typeof e == \"string\") {\n      const t = Number(e);\n      if (!Number.isNaN(t)) return t;\n    }\n    Ce(e);\n  }),\n  os = B(\"date\", e => e instanceof Date ? e : new Date(pe()(e) * 1e3));\nfunction Vn(e, t) {\n  return B(t || \"searchParams\", n => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && Ce(n);\n    const s = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return xn(e, o => {\n      const r = s.get(o);\n      return r === null ? void 0 : r;\n    });\n  });\n}\nfunction ct(e) {\n  for (const t in e) e[t] = [Nn(t), e[t]];\n  return e;\n}\nconst ss = e => {\n  const t = pe(),\n    n = pe(!0),\n    s = v(),\n    o = v(!0),\n    r = xe(!0),\n    a = P(ct({\n      addedToAttachmentMenu: r,\n      allowsWriteToPm: r,\n      firstName: s,\n      id: t,\n      isBot: r,\n      isPremium: r,\n      languageCode: o,\n      lastName: o,\n      photoUrl: o,\n      username: o\n    }), \"User\")(!0);\n  return Vn(ct({\n    authDate: os(),\n    canSendAfter: n,\n    chat: P(ct({\n      id: t,\n      type: s,\n      title: s,\n      photoUrl: o,\n      username: o\n    }), \"Chat\")(!0),\n    chatInstance: o,\n    chatType: o,\n    hash: s,\n    queryId: o,\n    receiver: a,\n    startParam: o,\n    user: a\n  }), \"initData\")(e);\n};\nfunction rs(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction as(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction is(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (rs(t)) return t;\n  if (as(t)) {\n    let s = \"#\";\n    for (let o = 0; o < 3; o += 1) s += t[1 + o].repeat(2);\n    return s;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n) throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((s, o) => {\n    const r = parseInt(o, 10).toString(16);\n    return s + (r.length === 1 ? \"0\" : \"\") + r;\n  }, \"#\");\n}\nconst cs = B(\"rgb\", e => is(v()(e))),\n  us = B(\"themeParams\", e => {\n    const t = cs(!0);\n    return Object.entries(In(e)).reduce((n, [s, o]) => (n[Xo(s)] = t(o), n), {});\n  });\n// @__NO_SIDE_EFFECTS__\nfunction Ln(e) {\n  return JSON.stringify(Object.fromEntries(Object.entries(e).map(([t, n]) => [Nn(t), n])));\n}\nconst ps = e => {\n  const t = v(),\n    n = v(!0),\n    s = xe(!0);\n  return Vn({\n    botInline: [\"tgWebAppBotInline\", s],\n    initData: [\"tgWebAppData\", ss(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", s],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", us()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction ls(e) {\n  const {\n      initDataRaw: t,\n      startParam: n,\n      showSettings: s,\n      botInline: o\n    } = e,\n    r = new URLSearchParams();\n  return r.set(\"tgWebAppPlatform\", e.platform), r.set(\"tgWebAppThemeParams\", /* @__PURE__ */Ln(e.themeParams)), r.set(\"tgWebAppVersion\", e.version), t && r.set(\"tgWebAppData\", t), n && r.set(\"tgWebAppStartParam\", n), typeof s == \"boolean\" && r.set(\"tgWebAppShowSettings\", s ? \"1\" : \"0\"), typeof o == \"boolean\" && r.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), r.toString();\n}\nconst Un = P({\n    eventType: v(),\n    eventData: e => e\n  }, \"miniAppsMessage\"),\n  jn = B(\"fn\", e => {\n    if (typeof e == \"function\") return e;\n    Ce(e);\n  });\nfunction ds(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst fs = P({\n  TelegramWebviewProxy: P({\n    postEvent: jn()\n  })()\n});\nfunction Hn(e) {\n  return fs().isValid(e);\n}\nfunction _s() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar ms = Object.defineProperty,\n  hs = (e, t, n) => t in e ? ms(e, t, {\n    enumerable: !0,\n    configurable: !0,\n    writable: !0,\n    value: n\n  }) : e[t] = n,\n  qn = (e, t, n) => hs(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nlet l = class Wn extends Error {\n  constructor(t, n, s) {\n    super(typeof n == \"object\" ? n.message : n || t, {\n      cause: typeof n == \"object\" ? n.cause : s\n    }), this.type = t, Object.setPrototypeOf(this, Wn.prototype);\n  }\n};\nfunction mt(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction K(...e) {\n  const t = e.flat(1);\n  return [t.push.bind(t), () => {\n    t.forEach(n => {\n      n();\n    });\n  }];\n}\nfunction bs(e, t) {\n  return e instanceof l && e.type === t;\n}\nfunction At(e) {\n  return t => bs(t, e);\n}\nconst zn = \"ERR_ABORTED\",\n  Gn = \"ERR_CANCELED\",\n  Fn = \"ERR_TIMED_OUT\";\nfunction pn(e) {\n  return new l(zn, {\n    cause: e\n  });\n}\nconst xi = At(Fn),\n  Ii = At(zn),\n  Vi = At(Gn);\nfunction ln(e, t) {\n  return e.reject = t.reject, e;\n}\nclass g extends Promise {\n  constructor(t, n) {\n    let s, o;\n    typeof t == \"function\" ? (s = t, o = n) : o = t;\n    let r, a;\n    super((i, p) => {\n      o || (o = {});\n      const {\n        abortSignal: c\n      } = o;\n      if (c && c.aborted) return p(pn(c.reason));\n      const [f, b] = K(),\n        w = _ => (...W) => (b(), _(...W)),\n        I = new AbortController(),\n        {\n          signal: S\n        } = I;\n      a = w(_ => {\n        I.abort(_), p(_);\n      }), r = w(i), c && f(mt(c, \"abort\", () => {\n        a(pn(c.reason));\n      }));\n      const {\n        timeout: h\n      } = o;\n      if (h) {\n        const _ = setTimeout(() => {\n          a(new l(Fn, `Timeout reached: ${h}ms`));\n        }, h);\n        f(() => {\n          clearTimeout(_);\n        });\n      }\n      s && s(r, a, S);\n    }), qn(this, \"reject\"), this.reject = a;\n  }\n  /**\r\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\r\n   * was returned.\r\n   * @param fn - function returning promise result.\r\n   * @param options - additional options.\r\n   */\n  static withFn(t, n) {\n    return new g((s, o, r) => {\n      try {\n        const a = t(r);\n        return a instanceof Promise ? a.then(s, o) : s(a);\n      } catch (a) {\n        o(a);\n      }\n    }, n);\n  }\n  /**\r\n   * @see Promise.resolve\r\n   */\n  static resolve(t) {\n    return new g(n => {\n      n(t);\n    });\n  }\n  /**\r\n   * @see Promise.reject\r\n   */\n  static reject(t) {\n    return new g((n, s) => {\n      s(t);\n    });\n  }\n  /**\r\n   * Cancels the promise execution.\r\n   */\n  cancel() {\n    this.reject(new l(Gn));\n  }\n  /**\r\n   * @see Promise.catch\r\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\r\n   * @see Promise.finally\r\n   */\n  finally(t) {\n    return ln(super.finally(t), this);\n  }\n  /**\r\n   * @see Promise.then\r\n   */\n  then(t, n) {\n    return ln(super.then(t, n), this);\n  }\n}\nfunction dn(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass oe extends g {\n  constructor(t, n) {\n    let s, o;\n    typeof t == \"function\" ? (s = t, o = n) : o = t;\n    let r;\n    super((a, i, p) => {\n      r = a, s && s(a, i, p);\n    }, o), qn(this, \"resolve\"), this.resolve = r;\n  }\n  /**\r\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\r\n   * was returned.\r\n   * @param fn - function returning promise result.\r\n   * @param options - additional options.\r\n   */\n  static withFn(t, n) {\n    return new oe((s, o, r) => g.withFn(t, {\n      abortSignal: r\n    }).then(s, o), n);\n  }\n  /**\r\n   * @see Promise.resolve\r\n   */\n  static resolve(t) {\n    return new oe(n => {\n      n(t);\n    });\n  }\n  /**\r\n   * @see Promise.reject\r\n   */\n  static reject(t) {\n    return new oe((n, s) => {\n      s(t);\n    });\n  }\n  /**\r\n   * @see Promise.catch\r\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\r\n   * @see Promise.finally\r\n   */\n  finally(t) {\n    return dn(super.finally(t), this);\n  }\n  /**\r\n   * @see Promise.then\r\n   */\n  then(t, n) {\n    return dn(super.then(t, n), this);\n  }\n}\nfunction gs(e, t) {\n  return new g(n => {\n    setTimeout(n, e);\n  }, {\n    abortSignal: t\n  });\n}\nfunction Jn(e) {\n  return `tapps/${e}`;\n}\nfunction T(e, t) {\n  sessionStorage.setItem(Jn(e), JSON.stringify(t));\n}\nfunction A(e) {\n  const t = sessionStorage.getItem(Jn(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {}\n}\nfunction Rt(e) {\n  return e.replace(/[A-Z]/g, t => `-${t.toLowerCase()}`);\n}\n// @__NO_SIDE_EFFECTS__\nfunction ws(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: s,\n    shouldLog: o = !0\n  } = t;\n  function r(a, ...i) {\n    if (!o || typeof o == \"function\" && !o()) return;\n    const p = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](`%c${Intl.DateTimeFormat(\"en-GB\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      fractionalSecondDigits: 3,\n      timeZone: \"UTC\"\n    }).format(/* @__PURE__ */new Date())}%c / %c${e}`, `${p};background-color: lightblue;color:black`, \"\", `${p};${n ? `color:${n};` : \"\"}${s ? `background-color:${s}` : \"\"}`, ...i);\n  }\n  return [function (...a) {\n    r(\"log\", ...a);\n  }, function (...a) {\n    r(\"error\", ...a);\n  }];\n}\nfunction Pt(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction Ot(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Es(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction Z(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let s = [],\n    o = e;\n  const r = c => {\n    if (!n(o, c)) {\n      const f = o;\n      o = c, Es(p, () => {\n        [...s].forEach(([b, w]) => {\n          b(c, f), w && i(b, !0);\n        });\n      });\n    }\n  };\n  function a(c) {\n    const f = typeof c != \"object\" ? {\n      once: c\n    } : c;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (c, f) => {\n      const b = a(f),\n        w = s.findIndex(([I, S]) => I === c && S.once === b.once && S.signal === b.signal);\n      w >= 0 && s.splice(w, 1);\n    },\n    p = Object.assign(function () {\n      return ys(p), o;\n    }, {\n      destroy() {\n        s = [];\n      },\n      set: r,\n      reset() {\n        r(e);\n      },\n      sub(c, f) {\n        return s.push([c, a(f)]), () => i(c, f);\n      },\n      unsub: i,\n      unsubAll() {\n        s = s.filter(c => c[1].signal);\n      }\n    });\n  return p;\n}\nconst ut = [];\nfunction ys(e) {\n  ut.length && ut[ut.length - 1].add(e);\n}\nconst Ss = /* @__PURE__ */Z(!1),\n  [Bt, Cs] = /* @__PURE__ */ws(\"Bridge\", {\n    bgColor: \"#9147ff\",\n    textColor: \"white\",\n    shouldLog: Ss\n  }),\n  $s = {\n    clipboard_text_received: P({\n      req_id: v(),\n      data: e => e === null ? e : v(!0)(e)\n    }, \"clipboard_text_received\"),\n    custom_method_invoked: P({\n      req_id: v(),\n      result: e => e,\n      error: v(!0)\n    }, \"custom_method_invoked\"),\n    popup_closed: B(\"popup_closed\", e => e ? P({\n      button_id: t => t == null ? void 0 : v()(t)\n    })()(e) : {}),\n    viewport_changed: P({\n      height: pe(),\n      width: e => e == null ? window.innerWidth : pe()(e),\n      is_state_stable: xe(),\n      is_expanded: xe()\n    }, \"viewport_changed\")\n  };\nfunction vs(e) {\n  const t = window,\n    [, n] = K(\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // The desktop version of Telegram is sometimes not sending the \"viewport_changed\"\n    // event. For example, when the Main Button is shown. That's why we should\n    // add our own listener to make sure viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    mt(t, \"resize\", () => {\n      e([\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      }]);\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    mt(t, \"message\", s => {\n      if (s.source !== t.parent) return;\n      let o;\n      try {\n        o = Un()(s.data);\n      } catch {\n        return;\n      }\n      const {\n          eventType: r,\n          eventData: a\n        } = o,\n        i = $s[r];\n      try {\n        const p = i ? i()(a) : a;\n        Bt(\"Event received:\", p ? {\n          eventType: r,\n          eventData: p\n        } : {\n          eventType: r\n        }), e([r, p]);\n      } catch (p) {\n        Cs([`An error occurred processing the \"${r}\" event from the Telegram application.`, \"Please, file an issue here:\", \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"].join(`\n`), o, p);\n      }\n    }));\n  return n;\n}\nconst ht = /* @__PURE__ */Z(),\n  fn = /* @__PURE__ */Z();\nfunction Qn() {\n  return fn() || fn.set(vs(ht.set)), ht;\n}\nconst pt = /* @__PURE__ */Z({});\nfunction Yn(e) {\n  let t = pt()[e];\n  return t || (t = /* @__PURE__ */Z(void 0, {\n    equals() {\n      return !1;\n    }\n  }), Qn().sub(n => {\n    n && n[0] === e && t.set(n[1]);\n  }), pt.set({\n    ...pt(),\n    [e]: t\n  })), t;\n}\nfunction C(e, t, n) {\n  return Yn(e).sub(t, n);\n}\nconst Ts = \"ERR_METHOD_UNSUPPORTED\",\n  As = \"ERR_RETRIEVE_LP_FAILED\",\n  Rs = \"ERR_METHOD_PARAMETER_UNSUPPORTED\",\n  Kn = \"ERR_UNKNOWN_ENV\",\n  Ps = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\",\n  Os = /* @__PURE__ */Z(\"https://web.telegram.org\");\nfunction Mt(e, t) {\n  Bt(\"Posting event:\", t ? {\n    eventType: e,\n    eventData: t\n  } : {\n    eventType: e\n  });\n  const n = window;\n  if (Hn(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const s = JSON.stringify({\n    eventType: e,\n    eventData: t\n  });\n  if (_s()) return n.parent.postMessage(s, Os());\n  const {\n    external: o\n  } = n;\n  if (P({\n    notify: jn()\n  })().isValid(o)) {\n    o.notify(s);\n    return;\n  }\n  throw new l(Kn);\n}\nfunction Dt(e, t, n) {\n  n || (n = {});\n  const {\n      capture: s\n    } = n,\n    [o, r] = K();\n  return new g(a => {\n    (Array.isArray(t) ? t : [t]).forEach(i => {\n      o(C(i, p => {\n        (!s || (Array.isArray(t) ? s({\n          event: i,\n          payload: p\n        }) : s(p))) && a(p);\n      }));\n    }), (n.postEvent || Mt)(e, n.params);\n  }, n).finally(r);\n}\nfunction Nt(e) {\n  return ps()(e);\n}\nfunction Zn(e) {\n  return Nt(e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\"));\n}\nfunction Bs() {\n  return Zn(window.location.href);\n}\nfunction Ms() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e) throw new Error(\"Unable to get first navigation entry.\");\n  return Zn(e.name);\n}\nconst Ds = \"launchParams\";\nfunction Ns() {\n  return Nt(A(Ds) || \"\");\n}\nfunction Xn(e) {\n  T(\"launchParams\", /* @__PURE__ */ls(e));\n}\nfunction eo(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${eo(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction X() {\n  const e = [];\n  for (const t of [\n  // Try to retrieve launch parameters from the current location. This method can return\n  // nothing in case, location was changed, and then the page was reloaded.\n  Bs,\n  // Then, try using the lower level API - window.performance.\n  Ms,\n  // Finally, try to extract launch parameters from the session storage.\n  Ns]) try {\n    const n = t();\n    return Xn(n), n;\n  } catch (n) {\n    e.push(n);\n  }\n  throw new l(As, [\"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\", \"📖 Refer to docs for more information:\", \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\", \"Collected errors:\", ...e.map(t => `— ${eo(t)}`)].join(`\n`));\n}\nfunction _n(e) {\n  if (e === \"simple\") try {\n    return X(), !0;\n  } catch {\n    return !1;\n  }\n  return g.withFn(async () => {\n    if (Hn(window)) return !0;\n    try {\n      return await Dt(\"web_app_request_theme\", \"theme_changed\", {\n        timeout: 100\n      }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction bt(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({\n      eventType: e,\n      eventData: t\n    }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction ks(e, t) {\n  if (typeof t == \"string\") try {\n    const {\n      eventType: n\n    } = Un()(t);\n    n === \"web_app_request_theme\" && bt(\"theme_changed\", {\n      theme_params: JSON.parse(/* @__PURE__ */Ln(e))\n    }), n === \"web_app_request_viewport\" && bt(\"viewport_changed\", {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      is_state_stable: !0,\n      is_expanded: !0\n    });\n  } catch {}\n}\nfunction Li(e) {\n  var t;\n  const n = typeof e == \"string\" ? Nt(e) : e;\n  Xn(n);\n  const s = (t = window.TelegramWebviewProxy) == null ? void 0 : t.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, r) {\n      ks(n.themeParams, JSON.stringify({\n        eventType: o,\n        eventData: r\n      })), s == null || s(o, r);\n    }\n  }, Bt(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction xs() {\n  [[\"TelegramGameProxy_receiveEvent\"],\n  // Windows Phone.\n  [\"TelegramGameProxy\", \"receiveEvent\"],\n  // Desktop.\n  [\"Telegram\", \"WebView\", \"receiveEvent\"]\n  // Android and iOS.\n  ].forEach(e => {\n    let t = window;\n    e.forEach((n, s, o) => {\n      if (s === o.length - 1) {\n        t[n] = bt;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction Is() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach(e => {\n    delete window[e];\n  });\n}\nfunction G(e, t, n) {\n  Yn(e).unsub(t, n);\n}\nfunction Ui(e, t) {\n  return Qn().sub(e, t);\n}\nfunction ji(e, t) {\n  ht.unsub(e, t);\n}\nfunction to(e) {\n  return ({\n    req_id: t\n  }) => t === e;\n}\nfunction mn(e) {\n  return e.split(\".\").map(Number);\n}\nfunction Vs(e, t) {\n  const n = mn(e),\n    s = mn(t),\n    o = Math.max(n.length, s.length);\n  for (let r = 0; r < o; r += 1) {\n    const a = n[r] || 0,\n      i = s[r] || 0;\n    if (a !== i) return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction E(e, t) {\n  return Vs(e, t) <= 0;\n}\nfunction z(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\") return E(\"6.4\", n);\n      if (t === \"try_browser\") return E(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\") return E(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\") return E(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\") return E(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return E(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return E(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return E(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return E(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return E(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return E(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return E(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return E(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return E(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return E(\"7.10\", t);\n    default:\n      return [\"iframe_ready\", \"iframe_will_reload\", \"web_app_close\", \"web_app_data_send\", \"web_app_expand\", \"web_app_open_link\", \"web_app_ready\", \"web_app_request_theme\", \"web_app_request_viewport\", \"web_app_setup_main_button\", \"web_app_setup_closing_behavior\"].includes(e);\n  }\n}\nfunction Ls(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : s => {\n    const {\n      method: o,\n      version: r\n    } = s;\n    let a, i;\n    if (\"param\" in s ? (a = `Parameter \"${s.param}\" of \"${o}\" method is unsupported in Mini Apps version ${r}`, i = Rs) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${r}`, i = Ts), t === \"strict\") throw new l(i, a);\n    return console.warn(a);\n  };\n  return (s, o) => z(s, e) ? ds(o) && s === \"web_app_set_header_color\" && \"color\" in o && !z(s, \"color\", e) ? n({\n    version: e,\n    method: s,\n    param: \"color\"\n  }) : Mt(s, o) : n({\n    version: e,\n    method: s\n  });\n}\nfunction Us(e, t, n, s) {\n  return Dt(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...(s || {}),\n    params: {\n      method: e,\n      params: t,\n      req_id: n\n    },\n    capture: to(n)\n  }).then(({\n    result: o,\n    error: r\n  }) => {\n    if (r) throw new l(Ps, r);\n    return o;\n  });\n}\nfunction js() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction M() {\n  const e = js();\n  return !!e && e.type === \"reload\";\n}\nlet J;\nfunction Hs(e, t) {\n  J && J.set(e, t) || t();\n}\nfunction qs(e) {\n  if (J) return e();\n  J = /* @__PURE__ */new Map();\n  try {\n    e();\n  } finally {\n    J.forEach(t => t()), J = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction u(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let s = [],\n    o = e;\n  const r = c => {\n    if (!n(o, c)) {\n      const f = o;\n      o = c, Hs(p, () => {\n        [...s].forEach(([b, w]) => {\n          b(c, f), w && i(b, !0);\n        });\n      });\n    }\n  };\n  function a(c) {\n    const f = typeof c != \"object\" ? {\n      once: c\n    } : c;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (c, f) => {\n      const b = a(f),\n        w = s.findIndex(([I, S]) => I === c && S.once === b.once && S.signal === b.signal);\n      w >= 0 && s.splice(w, 1);\n    },\n    p = Object.assign(function () {\n      return Ws(p), o;\n    }, {\n      destroy() {\n        s = [];\n      },\n      set: r,\n      reset() {\n        r(e);\n      },\n      sub(c, f) {\n        return s.push([c, a(f)]), () => i(c, f);\n      },\n      unsub: i,\n      unsubAll() {\n        s = s.filter(c => c[1].signal);\n      }\n    });\n  return p;\n}\nconst se = [];\nfunction Ws(e) {\n  se.length && se[se.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction m(e, t) {\n  let n = /* @__PURE__ */new Set(),\n    s;\n  function o() {\n    return s || (s = /* @__PURE__ */u(a(), t));\n  }\n  function r() {\n    o().set(a());\n  }\n  function a() {\n    n.forEach(c => {\n      c.unsub(r, {\n        signal: !0\n      });\n    });\n    const i = /* @__PURE__ */new Set();\n    let p;\n    se.push(i);\n    try {\n      p = e();\n    } finally {\n      se.pop();\n    }\n    return i.forEach(c => {\n      c.sub(r, {\n        signal: !0\n      });\n    }), n = i, p;\n  }\n  return Object.assign(function () {\n    return o()();\n  }, {\n    destroy() {\n      o().destroy();\n    },\n    sub(...i) {\n      return o().sub(...i);\n    },\n    unsub(...i) {\n      o().unsub(...i);\n    },\n    unsubAll(...i) {\n      o().unsubAll(...i);\n    }\n  });\n}\nconst zs = /* @__PURE__ */u(/* @__PURE__ */(() => {\n    let e = 0;\n    return () => (e += 1).toString();\n  })()),\n  no = /* @__PURE__ */u(Mt),\n  V = /* @__PURE__ */u(\"0.0\");\nfunction Gs(e) {\n  e || (e = {});\n  const {\n      postEvent: t\n    } = e,\n    n = e.version || X().version;\n  V.set(n), no.set(typeof t == \"function\" ? t : Ls(n));\n}\nfunction oo() {\n  return zs()();\n}\nfunction ee(e, t, n) {\n  return Us(e, t, oo(), {\n    ...(n || {}),\n    postEvent: d\n  });\n}\nconst D = (e, t, n) => (n || (n = {}), n.postEvent || (n.postEvent = d), Dt(e, t, n)),\n  d = (e, t) => no()(e, t);\nfunction N(e) {\n  return /* @__PURE__ */m(() => z(e, V()));\n}\nconst ne = \"ERR_POPUP_INVALID_PARAMS\",\n  kt = \"ERR_INVALID_URL\",\n  Fs = \"ERR_INVALID_SLUG\",\n  Js = \"ERR_DATA_INVALID_SIZE\",\n  Qs = \"ERR_ACCESS_DENIED\",\n  Le = \"ERR_ALREADY_REQUESTING\",\n  xt = \"ERR_ALREADY_OPENED\",\n  Ys = \"ERR_ALREADY_MOUNTING\",\n  Ks = \"ERR_VARS_ALREADY_BOUND\",\n  Zs = \"ERR_NOT_AVAILABLE\",\n  Xs = \"ERR_NOT_INITIALIZED\",\n  hn = \"ERR_NOT_SUPPORTED\",\n  er = \"ERR_NOT_MOUNTED\";\nfunction bn() {\n  return typeof window > \"u\";\n}\n// @__NO_SIDE_EFFECTS__\nfunction k(e, t, {\n  isSupported: n,\n  isMounted: s,\n  component: o,\n  supports: r\n} = {}) {\n  const a = `${o ? `${o}.` : \"\"}${e}()`;\n  n = n ? Array.isArray(n) || typeof n == \"object\" && \"any\" in n ? n : [n] : void 0;\n  function i(h) {\n    if (r) {\n      const _ = r[h];\n      return z(_[0], _[1], V());\n    }\n    return !0;\n  }\n  const p = () => {\n      if (!n) return;\n      const h = `it is unsupported in Mini Apps version ${V()}`;\n      function _($) {\n        return typeof $ == \"string\" ? z($, V()) ? void 0 : h : $.fn() ? void 0 : $.error;\n      }\n      if (Array.isArray(n)) {\n        for (const $ of n) {\n          const un = _($);\n          if (un) return un;\n        }\n        return;\n      }\n      let W;\n      for (const $ of n.any) if (W = _($), !W) return;\n      return h;\n    },\n    c = (...h) => {\n      if (r) {\n        for (const _ in r) if (r[_][2](...h) && !i(_)) return `option ${_} is not supported in Mini Apps version ${V()}`;\n      }\n    },\n    f = /* @__PURE__ */m(() => !p()),\n    b = /* @__PURE__ */m(() => V() !== \"0.0\"),\n    w = /* @__PURE__ */m(() => !s || s()),\n    I = /* @__PURE__ */m(() => _n(\"simple\") && !bn() && b() && f() && w());\n  let S;\n  if (r) {\n    S = {};\n    for (const h in r) S[h] = /* @__PURE__ */m(() => i(h));\n  }\n  return Object.assign((...h) => {\n    const _ = `Unable to call the ${a} ${o ? \"method\" : \"function\"}:`;\n    if (bn() || !_n(\"simple\")) throw new l(Kn, `${_} it can't be called outside Mini Apps`);\n    if (!b()) throw new l(Xs, `${_} the SDK was not initialized. Use the SDK init() function`);\n    const W = p();\n    if (W) throw new l(hn, `${_} ${W}`);\n    const $ = c(...h);\n    if ($) throw new l(hn, `${_} ${$}`);\n    if (!w()) throw new l(er, `${_} the component is not mounted. Use the ${o}.mount() method`);\n    return t(...h);\n  }, t, {\n    isAvailable: I,\n    ifAvailable(...h) {\n      return I() ? t(...h) : void 0;\n    }\n  }, n ? {\n    isSupported: f\n  } : {}, S ? {\n    supports: S\n  } : {});\n}\nfunction Ue(e, t) {\n  return t || (t = {}), (n, s, o, r) => /* @__PURE__ */k(n, s, {\n    ...t,\n    isSupported: o || t.isSupported,\n    supports: r,\n    component: e\n  });\n}\nfunction te(e, t, n) {\n  return Ue(e, {\n    isSupported: n,\n    isMounted: t\n  });\n}\nfunction R(e, t) {\n  return Ue(e, {\n    isSupported: t\n  });\n}\nconst je = \"web_app_setup_back_button\",\n  so = \"back_button_pressed\",\n  He = \"backButton\",\n  gt = /* @__PURE__ */u(!1),\n  le = /* @__PURE__ */u(!1),\n  tr = N(je),\n  ro = te(He, le, je),\n  It = R(He, je),\n  nr = ro(\"hide\", () => {\n    Vt(!1);\n  }),\n  or = It(\"mount\", () => {\n    le() || (Vt(M() && A(He) || !1), le.set(!0));\n  });\nfunction Vt(e) {\n  e !== gt() && (d(je, {\n    is_visible: e\n  }), T(He, e), gt.set(e));\n}\nconst sr = It(\"onClick\", e => C(so, e)),\n  rr = It(\"offClick\", e => {\n    G(so, e);\n  }),\n  ar = ro(\"show\", () => {\n    Vt(!0);\n  });\nfunction ir() {\n  le.set(!1);\n}\nconst Hi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n  __proto__: null,\n  hide: nr,\n  isMounted: le,\n  isSupported: tr,\n  isVisible: gt,\n  mount: or,\n  offClick: rr,\n  onClick: sr,\n  show: ar,\n  unmount: ir\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\n// @__NO_SIDE_EFFECTS__\nfunction ao(e, t, n, {\n  isMounting: s,\n  isMounted: o,\n  mountError: r\n}) {\n  return a => g.withFn(async i => {\n    if (o()) return;\n    if (s()) throw new l(Ys, `The ${e} component is already mounting`);\n    s.set(!0);\n    let p;\n    try {\n      p = [!0, await t({\n        abortSignal: i\n      })];\n    } catch (c) {\n      p = [!1, c];\n    }\n    qs(() => {\n      if (s.set(!1), o.set(!0), p[0]) n(p[1]);else {\n        const c = p[1];\n        throw r.set(c), c;\n      }\n    });\n  }, a);\n}\nconst j = Ue,\n  qe = /* @__PURE__ */u(),\n  Te = /* @__PURE__ */u(!1),\n  Ae = /* @__PURE__ */u(!1),\n  We = /* @__PURE__ */u(!1),\n  io = /* @__PURE__ */u(!1),\n  co = /* @__PURE__ */u(void 0),\n  cr = /* @__PURE__ */m(() => {\n    const e = qe();\n    return e && e.available;\n  });\nfunction Lt(e) {\n  return e.available ? {\n    available: !0,\n    tokenSaved: e.token_saved,\n    deviceId: e.device_id,\n    accessRequested: e.access_requested,\n    type: e.type,\n    accessGranted: e.access_granted\n  } : {\n    available: !1\n  };\n}\nconst gn = \"web_app_biometry_get_info\",\n  ur = /* @__PURE__ */k(\"requestBiometry\", e => D(gn, \"biometry_info_received\", e).then(Lt), {\n    isSupported: gn\n  }),\n  ze = \"web_app_biometry_request_auth\",\n  pr = \"web_app_biometry_request_access\",\n  lr = \"web_app_biometry_open_settings\",\n  dr = \"web_app_biometry_update_token\",\n  Ut = \"biometry_info_received\",\n  Y = \"biometry\",\n  fr = N(ze),\n  _r = j(Y),\n  mr = R(Y, ze),\n  jt = te(Y, We, ze);\nfunction uo() {\n  throw new l(Zs, \"Biometry is not available\");\n}\nconst hr = jt(\"authenticate\", e => g.withFn(async t => {\n    if (Te()) throw new l(Le, \"Authentication is already in progress\");\n    const n = qe();\n    (!n || !n.available) && uo(), Te.set(!0);\n    try {\n      const s = await D(ze, \"biometry_auth_requested\", {\n          abortSignal: t,\n          params: {\n            reason: ((e || {}).reason || \"\").trim()\n          }\n        }),\n        {\n          token: o\n        } = s;\n      return typeof o == \"string\" && Ge({\n        ...n,\n        token: o\n      }), s;\n    } finally {\n      Te.set(!1);\n    }\n  }, e)),\n  br = mr(\"openSettings\", () => {\n    d(lr);\n  }),\n  gr = jt(\"requestAccess\", e => g.withFn(async t => {\n    if (Ae()) throw new l(Le, \"Access request is already in progress\");\n    Ae.set(!0);\n    try {\n      const n = await D(pr, Ut, {\n        abortSignal: t,\n        params: {\n          reason: (e || {}).reason || \"\"\n        }\n      }).then(Lt);\n      return n.available || uo(), Ge(n), n.accessGranted;\n    } finally {\n      Ae.set(!1);\n    }\n  }, e)),\n  wr = _r(\"mount\", /* @__PURE__ */ao(Y, e => {\n    const t = M() && A(Y);\n    return t || ur(e);\n  }, e => {\n    C(Ut, po), Ge(e);\n  }, {\n    isMounted: We,\n    mountError: co,\n    isMounting: io\n  })),\n  po = e => {\n    Ge(Lt(e));\n  };\nfunction Ge(e) {\n  qe.set(e), T(Y, e);\n}\nfunction Er() {\n  G(Ut, po), We.set(!1);\n}\nconst yr = jt(\"updateToken\", e => (e || (e = {}), D(dr, \"biometry_token_updated\", {\n    ...e,\n    params: {\n      token: e.token || \"\",\n      reason: e.reason\n    }\n  }).then(t => t.status))),\n  qi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    authenticate: hr,\n    isAuthenticating: Te,\n    isAvailable: cr,\n    isMounted: We,\n    isMounting: io,\n    isRequestingAccess: Ae,\n    isSupported: fr,\n    mount: wr,\n    mountError: co,\n    openSettings: br,\n    requestAccess: gr,\n    state: qe,\n    unmount: Er,\n    updateToken: yr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nfunction Fe(e, t) {\n  return Ue(e, {\n    isMounted: t\n  });\n}\nconst Je = \"closingBehavior\",\n  wt = /* @__PURE__ */u(!1),\n  de = /* @__PURE__ */u(!1),\n  lo = Fe(Je, de),\n  Sr = j(Je),\n  Cr = lo(\"disableConfirmation\", () => {\n    Ht(!1);\n  }),\n  $r = lo(\"enableConfirmation\", () => {\n    Ht(!0);\n  }),\n  vr = Sr(\"mount\", () => {\n    de() || (Ht(M() && A(Je) || !1), de.set(!0));\n  });\nfunction Ht(e) {\n  e !== wt() && (d(\"web_app_setup_closing_behavior\", {\n    need_confirmation: e\n  }), T(Je, e), wt.set(e));\n}\nfunction Tr() {\n  de.set(!1);\n}\nconst Wi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    disableConfirmation: Cr,\n    enableConfirmation: $r,\n    isConfirmationEnabled: wt,\n    isMounted: de,\n    mount: vr,\n    unmount: Tr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  fo = \"web_app_invoke_custom_method\",\n  Qe = R(\"cloudStorage\", fo),\n  Ar = N(fo),\n  Rr = Qe(\"deleteItem\", (e, t) => {\n    const n = Array.isArray(e) ? e : [e];\n    return n.length ? ee(\"deleteStorageValues\", {\n      keys: n\n    }, t).then() : g.resolve();\n  });\nfunction Pr(e, t) {\n  const n = Array.isArray(e) ? e : [e];\n  return n.length ? ee(\"getStorageValues\", {\n    keys: n\n  }, t).then(s => {\n    const o = Ne(Object.fromEntries(n.map(r => [r, L()])))()(s);\n    return Array.isArray(e) ? o : o[e];\n  }) : g.resolve(typeof e == \"string\" ? \"\" : {});\n}\nconst Or = Qe(\"getItem\", Pr),\n  Br = Qe(\"getKeys\", e => ee(\"getStorageKeys\", {}, e).then(Zo(L())())),\n  Mr = Qe(\"setItem\", (e, t, n) => ee(\"saveStorageValue\", {\n    key: e,\n    value: t\n  }, n).then()),\n  zi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    deleteItem: Rr,\n    getItem: Or,\n    getKeys: Br,\n    isSupported: Ar,\n    setItem: Mr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  $e = \"web_app_trigger_haptic_feedback\",\n  qt = R(\"hapticFeedback\", $e),\n  Dr = N($e),\n  Nr = qt(\"impactOccurred\", e => {\n    d($e, {\n      type: \"impact\",\n      impact_style: e\n    });\n  }),\n  kr = qt(\"notificationOccurred\", e => {\n    d($e, {\n      type: \"notification\",\n      notification_type: e\n    });\n  }),\n  xr = qt(\"selectionChanged\", () => {\n    d($e, {\n      type: \"selection_change\"\n    });\n  }),\n  Gi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    impactOccurred: Nr,\n    isSupported: Dr,\n    notificationOccurred: kr,\n    selectionChanged: xr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Wt = /* @__PURE__ */u(void 0);\nfunction x(e) {\n  return /* @__PURE__ */m(() => {\n    const t = Wt();\n    return t ? t[e] : void 0;\n  });\n}\nconst _o = x(\"authDate\"),\n  mo = x(\"canSendAfter\"),\n  Ir = /* @__PURE__ */m(() => {\n    const e = _o(),\n      t = mo();\n    return t && e ? new Date(e.getTime() + t * 1e3) : void 0;\n  }),\n  Vr = x(\"chat\"),\n  Lr = x(\"chatType\"),\n  Ur = x(\"chatInstance\"),\n  jr = x(\"hash\"),\n  Hr = x(\"queryId\"),\n  ho = /* @__PURE__ */u(),\n  qr = x(\"receiver\");\nfunction Wr() {\n  const e = X();\n  Wt.set(e.initData), ho.set(e.initDataRaw);\n}\nconst zr = x(\"startParam\"),\n  Gr = x(\"user\"),\n  Fi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    authDate: _o,\n    canSendAfter: mo,\n    canSendAfterDate: Ir,\n    chat: Vr,\n    chatInstance: Ur,\n    chatType: Lr,\n    hash: jr,\n    queryId: Hr,\n    raw: ho,\n    receiver: qr,\n    restore: Wr,\n    startParam: zr,\n    state: Wt,\n    user: Gr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nfunction Ji(e) {\n  return Fo()(e);\n}\nconst zt = \"web_app_open_invoice\",\n  Fr = R(\"invoice\", zt),\n  Re = /* @__PURE__ */u(!1),\n  Jr = N(zt);\nasync function bo(e, t, n) {\n  if (Re()) throw new l(xt, \"An invoice is already opened\");\n  let s;\n  if (t === \"url\") {\n    const {\n      hostname: o,\n      pathname: r\n    } = new URL(e, window.location.href);\n    if (o !== \"t.me\") throw new l(kt, `Link has unexpected hostname: ${o}`);\n    const a = r.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n    if (!a) throw new l(Fs, 'Expected to receive a link with a pathname in format \"/invoice/{slug}\" or \"/${slug}\"');\n    [,, s] = a;\n  } else s = e, n = t;\n  return Re.set(!0), D(zt, \"invoice_closed\", {\n    ...n,\n    params: {\n      slug: s\n    },\n    capture: o => s === o.slug\n  }).then(o => o.status).finally(() => {\n    Re.set(!1);\n  });\n}\nconst Qr = Fr(\"open\", bo),\n  Qi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    _open: bo,\n    isOpened: Re,\n    isSupported: Jr,\n    open: Qr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nfunction go(e) {\n  const t = Bn(e);\n  return Math.sqrt([0.299, 0.587, 0.114].reduce((n, s, o) => {\n    const r = parseInt(t.slice(1 + o * 2, 1 + (o + 1) * 2), 16);\n    return n + r * r * s;\n  }, 0)) < 120;\n}\nconst fe = /* @__PURE__ */u(!1),\n  Pe = /* @__PURE__ */u(!1),\n  H = /* @__PURE__ */u({});\nfunction y(e) {\n  return /* @__PURE__ */m(() => H()[e]);\n}\nconst Yr = y(\"accentTextColor\"),\n  Gt = y(\"bgColor\"),\n  Ft = y(\"buttonColor\"),\n  wo = y(\"buttonTextColor\"),\n  Eo = y(\"bottomBarBgColor\"),\n  Kr = y(\"destructiveTextColor\"),\n  Zr = y(\"headerBgColor\"),\n  Xr = y(\"hintColor\"),\n  ea = /* @__PURE__ */m(() => {\n    const {\n      bgColor: e\n    } = H();\n    return !e || go(e);\n  }),\n  ta = y(\"linkColor\"),\n  Ie = y(\"secondaryBgColor\"),\n  na = y(\"sectionBgColor\"),\n  oa = y(\"sectionHeaderTextColor\"),\n  sa = y(\"sectionSeparatorColor\"),\n  ra = y(\"subtitleTextColor\"),\n  aa = y(\"textColor\");\nfunction F(e) {\n  return /* @__PURE__ */m(() => Jt()[e]);\n}\nconst re = /* @__PURE__ */u({\n    hasShineEffect: !1,\n    isEnabled: !0,\n    isLoaderVisible: !1,\n    isVisible: !1,\n    text: \"Continue\"\n  }),\n  Jt = /* @__PURE__ */m(() => {\n    const e = re();\n    return {\n      ...e,\n      backgroundColor: e.backgroundColor || Ft() || \"#2481cc\",\n      textColor: e.textColor || wo() || \"#ffffff\"\n    };\n  }),\n  _e = /* @__PURE__ */u(!1),\n  ia = F(\"backgroundColor\"),\n  ca = F(\"hasShineEffect\"),\n  ua = F(\"isEnabled\"),\n  pa = F(\"isLoaderVisible\"),\n  la = F(\"isVisible\"),\n  da = F(\"text\"),\n  fa = F(\"textColor\"),\n  _a = \"web_app_setup_main_button\",\n  yo = \"main_button_pressed\",\n  Ye = \"mainButton\",\n  Qt = j(Ye),\n  ma = Fe(Ye, _e),\n  ha = Qt(\"mount\", () => {\n    if (!_e()) {\n      const e = M() && A(Ye);\n      e && re.set(e), _e.set(!0);\n    }\n  }),\n  ba = Qt(\"onClick\", e => C(yo, e)),\n  ga = Qt(\"offClick\", e => {\n    G(yo, e);\n  }),\n  wa = ma(\"setParams\", e => {\n    re.set({\n      ...re(),\n      ...Object.fromEntries(Object.entries(e).filter(([, n]) => n !== void 0))\n    }), T(Ye, re());\n    const t = Jt();\n    t.text && d(_a, {\n      color: t.backgroundColor,\n      has_shine_effect: t.hasShineEffect,\n      is_active: t.isEnabled,\n      is_progress_visible: t.isLoaderVisible,\n      is_visible: t.isVisible,\n      text: t.text,\n      text_color: t.textColor\n    });\n  });\nfunction Ea() {\n  _e.set(!1);\n}\nconst Yi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n  __proto__: null,\n  backgroundColor: ia,\n  hasShineEffect: ca,\n  isEnabled: ua,\n  isLoaderVisible: pa,\n  isMounted: _e,\n  isVisible: la,\n  mount: ha,\n  offClick: ga,\n  onClick: ba,\n  setParams: wa,\n  state: Jt,\n  text: da,\n  textColor: fa,\n  unmount: Ea\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nfunction Yt() {\n  throw new l(Ks, \"CSS variables are already bound\");\n}\nfunction ya(e) {\n  return Yo()(e);\n}\nconst Ke = \"themeParams\",\n  So = \"theme_changed\",\n  Sa = j(Ke),\n  Ca = Fe(Ke, fe),\n  $a = Ca(\"bindCssVars\", e => {\n    Pe() && Yt(), e || (e = s => `--tg-theme-${Rt(s)}`);\n    function t(s) {\n      Object.entries(H()).forEach(([o, r]) => {\n        r && s(o, r);\n      });\n    }\n    function n() {\n      t((s, o) => {\n        Pt(e(s), o);\n      });\n    }\n    return n(), H.sub(n), Pe.set(!0), () => {\n      t(Ot), H.unsub(n), Pe.set(!1);\n    };\n  }),\n  Co = Sa(\"mount\", () => {\n    fe() || (C(So, $o), H.set(M() && A(Ke) || X().themeParams), fe.set(!0));\n  }),\n  $o = e => {\n    const t = ya(e.theme_params);\n    H.set(t), T(Ke, t);\n  };\nfunction va() {\n  G(So, $o), fe.set(!1);\n}\n// @__NO_SIDE_EFFECTS__\nfunction vo(e) {\n  return /* @__PURE__ */m(() => {\n    const t = e();\n    return ce(t) ? t : t === \"bg_color\" ? Gt() : Ie();\n  });\n}\nconst me = /* @__PURE__ */u(\"bg_color\"),\n  Kt = /* @__PURE__ */vo(me),\n  he = /* @__PURE__ */u(\"bottom_bar_bg_color\"),\n  Zt = /* @__PURE__ */m(() => {\n    const e = he();\n    return ce(e) ? e : e === \"bottom_bar_bg_color\" ? Eo() || Ie() : e === \"secondary_bg_color\" ? Ie() : Gt();\n  }),\n  be = /* @__PURE__ */u(\"bg_color\"),\n  To = /* @__PURE__ */vo(be),\n  ge = /* @__PURE__ */u(!1),\n  Oe = /* @__PURE__ */u(!1),\n  Ta = /* @__PURE__ */m(() => {\n    const e = Kt();\n    return e ? go(e) : !1;\n  }),\n  Ao = /* @__PURE__ */m(() => ({\n    backgroundColor: me(),\n    bottomBarColor: he(),\n    headerColor: be()\n  })),\n  Et = \"web_app_set_background_color\",\n  yt = \"web_app_set_bottom_bar_color\",\n  Be = \"web_app_set_header_color\",\n  ve = \"miniApp\",\n  Xt = {\n    any: [Et, yt, Be]\n  },\n  Aa = /* @__PURE__ */m(() => Xt.any.some(e => z(e, V()))),\n  Ro = j(ve),\n  Ra = R(ve, Xt),\n  Ze = te(ve, ge, Xt),\n  Pa = Ze(\"bindCssVars\", e => {\n    Oe() && Yt();\n    const [t, n] = K();\n    function s(o, r) {\n      function a() {\n        Pt(o, r() || null);\n      }\n      a(), t(r.sub(a), Ot.bind(null, o));\n    }\n    return e || (e = o => `--tg-${Rt(o)}`), s(e(\"bgColor\"), Kt), s(e(\"bottomBarColor\"), Zt), s(e(\"headerColor\"), To), t(() => {\n      Oe.set(!1);\n    }), Oe.set(!0), n;\n  }),\n  Oa = Ro(\"close\", e => {\n    d(\"web_app_close\", {\n      return_back: e\n    });\n  }),\n  Ba = Ra(\"mount\", () => {\n    if (!ge()) {\n      const e = M() && A(ve);\n      Co(), Po.ifAvailable(e ? e.backgroundColor : \"bg_color\"), Oo.ifAvailable(e ? e.bottomBarColor : \"bottom_bar_bg_color\"), Bo.ifAvailable(e ? e.headerColor : \"bg_color\"), ge.set(!0);\n    }\n  }),\n  Ma = Ro(\"ready\", () => {\n    d(\"web_app_ready\");\n  });\nfunction en() {\n  T(ve, Ao());\n}\nconst Po = Ze(\"setBackgroundColor\", e => {\n    e !== me() && (d(Et, {\n      color: e\n    }), me.set(e), en());\n  }, Et),\n  Oo = Ze(\"setBottomBarColor\", e => {\n    e !== he() && (d(yt, {\n      color: e\n    }), he.set(e), en());\n  }, yt),\n  Bo = Ze(\"setHeaderColor\", e => {\n    e !== be() && (d(Be, ce(e) ? {\n      color: e\n    } : {\n      color_key: e\n    }), be.set(e), en());\n  }, Be, {\n    rgb: [Be, \"color\", ce]\n  });\nfunction Da() {\n  ge.set(!1);\n}\nconst Ki = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n  __proto__: null,\n  backgroundColor: me,\n  backgroundColorRGB: Kt,\n  bindCssVars: Pa,\n  bottomBarColor: he,\n  bottomBarColorRGB: Zt,\n  close: Oa,\n  headerColor: be,\n  headerColorRGB: To,\n  isCssVarsBound: Oe,\n  isDark: Ta,\n  isMounted: ge,\n  isSupported: Aa,\n  mount: Ba,\n  ready: Ma,\n  setBackgroundColor: Po,\n  setBottomBarColor: Oo,\n  setHeaderColor: Bo,\n  state: Ao,\n  unmount: Da\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nfunction Na(e) {\n  const t = e.message.trim(),\n    n = (e.title || \"\").trim(),\n    s = e.buttons || [];\n  if (n.length > 64) throw new l(ne, `Invalid title: ${n}`);\n  if (!t || t.length > 256) throw new l(ne, `Invalid message: ${t}`);\n  if (s.length > 3) throw new l(ne, `Invalid buttons count: ${s.length}`);\n  return {\n    title: n,\n    message: t,\n    buttons: s.length ? s.map((o, r) => {\n      const a = o.id || \"\";\n      if (a.length > 64) throw new l(ne, `Button with index ${r} has invalid id: ${a}`);\n      if (!o.type || o.type === \"default\" || o.type === \"destructive\") {\n        const i = o.text.trim();\n        if (!i || i.length > 64) throw new l(ne, `Button with index ${r} has invalid text: ${i}`);\n        return {\n          type: o.type,\n          text: i,\n          id: a\n        };\n      }\n      return {\n        type: o.type,\n        id: a\n      };\n    }) : [{\n      type: \"close\",\n      id: \"\"\n    }]\n  };\n}\nconst tn = \"web_app_open_popup\",\n  ka = R(\"popup\", tn),\n  Me = /* @__PURE__ */u(!1),\n  xa = N(tn),\n  Ia = ka(\"open\", async e => {\n    if (Me()) throw new l(xt, \"A popup is already opened\");\n    Me.set(!0);\n    try {\n      const {\n        button_id: t = null\n      } = await D(tn, \"popup_closed\", {\n        ...e,\n        params: Na(e)\n      });\n      return t;\n    } finally {\n      Me.set(!1);\n    }\n  }),\n  Zi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    isOpened: Me,\n    isSupported: xa,\n    open: Ia\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Va = \"web_app_close_scan_qr_popup\",\n  nn = \"web_app_open_scan_qr_popup\",\n  La = \"scan_qr_popup_closed\",\n  Ua = \"qr_text_received\",\n  Mo = R(\"qrScanner\", nn),\n  St = Mo(\"close\", () => {\n    Q.set(!1), d(Va);\n  }),\n  Q = /* @__PURE__ */u(!1),\n  ja = N(nn);\nfunction Ha(e) {\n  return g.withFn(t => {\n    if (Q()) throw new l(xt, \"The QR Scanner is already opened\");\n    Q.set(!0), e || (e = {});\n    const {\n        onCaptured: n,\n        text: s,\n        capture: o\n      } = e,\n      [, r] = K(\n      // Whenever the scanner was closed for some reason (by a developer or a\n      // user), we should resolve the promise with undefined.\n      Q.sub(() => {\n        a.resolve();\n      }),\n      // Whenever user closed the scanner, update the isOpened signal state.\n      C(La, () => {\n        Q.set(!1);\n      }),\n      // Whenever some QR was scanned, we should check if it must be captured.\n      C(Ua, i => {\n        n ? n(i.data) : (!o || o(i.data)) && (a.resolve(i.data), St());\n      })),\n      a = new oe({\n        abortSignal: t\n      }).catch(St).finally(r);\n    return (e.postEvent || d)(nn, {\n      text: s\n    }), a;\n  }, e);\n}\nconst qa = Mo(\"open\", Ha),\n  Xi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    close: St,\n    isOpened: Q,\n    isSupported: ja,\n    open: qa\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nfunction q(e) {\n  return /* @__PURE__ */m(() => on()[e]);\n}\nconst ae = /* @__PURE__ */u({\n    hasShineEffect: !1,\n    isEnabled: !0,\n    isLoaderVisible: !1,\n    isVisible: !1,\n    position: \"left\",\n    text: \"Cancel\"\n  }),\n  on = /* @__PURE__ */m(() => {\n    const e = ae();\n    return {\n      ...e,\n      backgroundColor: e.backgroundColor || Zt() || \"#000000\",\n      textColor: e.textColor || Ft() || \"#2481cc\"\n    };\n  }),\n  we = /* @__PURE__ */u(!1),\n  Wa = q(\"backgroundColor\"),\n  za = q(\"hasShineEffect\"),\n  Ga = q(\"isEnabled\"),\n  Fa = q(\"isLoaderVisible\"),\n  Ja = q(\"isVisible\"),\n  Qa = q(\"position\"),\n  Ya = q(\"text\"),\n  Ka = q(\"textColor\"),\n  Xe = \"web_app_setup_secondary_button\",\n  Do = \"secondary_button_pressed\",\n  et = \"secondaryButton\",\n  sn = R(et, Xe),\n  Za = te(et, we, Xe),\n  Xa = N(Xe),\n  ei = sn(\"mount\", () => {\n    if (!we()) {\n      const e = M() && A(et);\n      e && ae.set(e), we.set(!0);\n    }\n  }),\n  ti = sn(\"onClick\", e => C(Do, e)),\n  ni = sn(\"offClick\", e => {\n    G(Do, e);\n  }),\n  oi = Za(\"setParams\", e => {\n    ae.set({\n      ...ae(),\n      ...Object.fromEntries(Object.entries(e).filter(([, n]) => n !== void 0))\n    }), T(et, ae());\n    const t = on();\n    t.text && d(Xe, {\n      color: t.backgroundColor,\n      has_shine_effect: t.hasShineEffect,\n      is_active: t.isEnabled,\n      is_progress_visible: t.isLoaderVisible,\n      is_visible: t.isVisible,\n      position: t.position,\n      text: t.text,\n      text_color: t.textColor\n    });\n  });\nfunction si() {\n  we.set(!1);\n}\nconst ec = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    backgroundColor: Wa,\n    hasShineEffect: za,\n    isEnabled: Ga,\n    isLoaderVisible: Fa,\n    isMounted: we,\n    isSupported: Xa,\n    isVisible: Ja,\n    mount: ei,\n    offClick: ni,\n    onClick: ti,\n    position: Qa,\n    setParams: oi,\n    state: on,\n    text: Ya,\n    textColor: Ka,\n    unmount: si\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  tt = \"web_app_setup_settings_button\",\n  No = \"settings_button_pressed\",\n  nt = \"settingsButton\",\n  Ct = /* @__PURE__ */u(!1),\n  Ee = /* @__PURE__ */u(!1),\n  ri = N(tt),\n  rn = R(nt, tt),\n  ko = te(nt, Ee, tt),\n  ai = ko(\"hide\", () => {\n    an(!1);\n  }),\n  ii = rn(\"mount\", () => {\n    Ee() || (an(M() && A(nt) || !1), Ee.set(!0));\n  });\nfunction an(e) {\n  e !== Ct() && (d(tt, {\n    is_visible: e\n  }), T(nt, e), Ct.set(e));\n}\nconst ci = rn(\"onClick\", e => C(No, e)),\n  ui = rn(\"offClick\", e => {\n    G(No, e);\n  }),\n  pi = ko(\"show\", () => {\n    an(!0);\n  });\nfunction li() {\n  Ee.set(!1);\n}\nconst tc = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    hide: ai,\n    isMounted: Ee,\n    isSupported: ri,\n    isVisible: Ct,\n    mount: ii,\n    offClick: ui,\n    onClick: ci,\n    show: pi,\n    unmount: li\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  ot = \"web_app_setup_swipe_behavior\",\n  st = \"swipeBehavior\",\n  ye = /* @__PURE__ */u(!1),\n  di = N(ot),\n  $t = /* @__PURE__ */u(!0),\n  fi = R(st, ot),\n  xo = te(st, ye, ot),\n  _i = xo(\"disableVertical\", () => {\n    cn(!1);\n  }),\n  mi = xo(\"enableVertical\", () => {\n    cn(!0);\n  }),\n  hi = fi(\"mount\", () => {\n    ye() || (cn(M() && A(st) || !1, !0), ye.set(!0));\n  });\nfunction cn(e, t) {\n  (e !== $t() || t) && (d(ot, {\n    allow_vertical_swipe: e\n  }), T(st, e), $t.set(e));\n}\nfunction bi() {\n  ye.set(!1);\n}\nconst nc = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    disableVertical: _i,\n    enableVertical: mi,\n    isMounted: ye,\n    isSupported: di,\n    isVerticalEnabled: $t,\n    mount: hi,\n    unmount: bi\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  oc = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    accentTextColor: Yr,\n    backgroundColor: Gt,\n    bindCssVars: $a,\n    bottomBarBgColor: Eo,\n    buttonColor: Ft,\n    buttonTextColor: wo,\n    destructiveTextColor: Kr,\n    headerBackgroundColor: Zr,\n    hintColor: Xr,\n    isCssVarsBound: Pe,\n    isDark: ea,\n    isMounted: fe,\n    linkColor: ta,\n    mount: Co,\n    secondaryBackgroundColor: Ie,\n    sectionBackgroundColor: na,\n    sectionHeaderTextColor: oa,\n    sectionSeparatorColor: sa,\n    state: H,\n    subtitleTextColor: ra,\n    textColor: aa,\n    unmount: va\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  O = /* @__PURE__ */u({\n    height: 0,\n    width: 0,\n    isExpanded: !1,\n    stableHeight: 0\n  }),\n  rt = /* @__PURE__ */u(!1),\n  De = /* @__PURE__ */u(!1),\n  Io = /* @__PURE__ */u(!1),\n  Vo = /* @__PURE__ */u(void 0);\nfunction at(e) {\n  return /* @__PURE__ */m(() => O()[e]);\n}\nconst gi = at(\"height\"),\n  wi = at(\"isExpanded\"),\n  Ei = /* @__PURE__ */m(() => {\n    const e = O();\n    return e.height === e.stableHeight;\n  }),\n  yi = at(\"stableHeight\"),\n  Si = at(\"width\");\nfunction Ci(e) {\n  return D(\"web_app_request_viewport\", \"viewport_changed\", e).then(t => ({\n    height: t.height,\n    width: t.width,\n    isExpanded: t.is_expanded,\n    isStable: t.is_state_stable\n  }));\n}\nconst Ve = \"viewport\",\n  Lo = j(Ve),\n  $i = Fe(Ve, rt),\n  vi = $i(\"bindCssVars\", e => {\n    De() && Yt(), e || (e = s => `--tg-viewport-${Rt(s)}`);\n    const t = [\"height\", \"width\", \"stableHeight\"];\n    function n() {\n      t.forEach(s => {\n        Pt(e(s), `${O()[s]}px`);\n      });\n    }\n    return n(), O.sub(n), De.set(!0), () => {\n      t.forEach(Ot), O.unsub(n), De.set(!1);\n    };\n  }),\n  Ti = Lo(\"expand\", () => {\n    d(\"web_app_expand\");\n  }),\n  Ai = Lo(\"mount\", /* @__PURE__ */ao(Ve, e => {\n    const t = M() && A(Ve);\n    if (t) return t;\n    if ([\"macos\", \"tdesktop\", \"unigram\", \"webk\", \"weba\", \"web\"].includes(X().platform)) {\n      const n = window;\n      return {\n        isExpanded: !0,\n        height: n.innerHeight,\n        width: n.innerWidth,\n        stableHeight: n.innerHeight\n      };\n    }\n    return e.timeout || (e.timeout = 1e3), Ci(e).then(n => ({\n      height: n.height,\n      isExpanded: n.isExpanded,\n      stableHeight: n.isStable ? n.height : O().stableHeight,\n      width: n.width\n    }));\n  }, e => {\n    C(\"viewport_changed\", Uo), jo(e);\n  }, {\n    isMounted: rt,\n    isMounting: Io,\n    mountError: Vo\n  })),\n  Uo = e => {\n    jo({\n      height: e.height,\n      isExpanded: e.is_expanded,\n      stableHeight: e.is_state_stable ? e.height : O().stableHeight,\n      width: e.width\n    });\n  };\nfunction jo(e) {\n  O.set({\n    isExpanded: e.isExpanded,\n    height: lt(e.height),\n    width: lt(e.width),\n    stableHeight: lt(e.stableHeight)\n  }), T(\"viewport\", O());\n}\nfunction lt(e) {\n  return Math.max(e, 0);\n}\nfunction Ri() {\n  G(\"viewport_changed\", Uo), rt.set(!1);\n}\nconst sc = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    bindCssVars: vi,\n    expand: Ti,\n    height: gi,\n    isCssVarsBound: De,\n    isExpanded: wi,\n    isMounted: rt,\n    isMounting: Io,\n    isStable: Ei,\n    mount: Ai,\n    mountError: Vo,\n    stableHeight: yi,\n    state: O,\n    unmount: Ri,\n    width: Si\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Pi = j(),\n  rc = Pi(\"openLink\", (e, t) => {\n    if (typeof e == \"string\") try {\n      e = new URL(e);\n    } catch (n) {\n      throw new l(kt, `\"${e.toString()}\" is invalid URL`, n);\n    }\n    t || (t = {}), d(\"web_app_open_link\", {\n      url: e.toString(),\n      try_browser: t.tryBrowser,\n      try_instant_view: t.tryInstantView\n    });\n  }),\n  wn = \"web_app_open_tg_link\",\n  Oi = j(),\n  Bi = Oi(\"openTelegramLink\", e => {\n    const t = e.toString();\n    if (!t.match(/^https:\\/\\/t.me\\/.+/)) throw new l(kt, `\"${t}\" is invalid URL`);\n    if (!z(wn, V())) {\n      window.location.href = t;\n      return;\n    }\n    e = new URL(e), d(wn, {\n      path_full: e.pathname + e.search\n    });\n  }),\n  Mi = j(),\n  ac = Mi(\"shareURL\", (e, t) => {\n    Bi(\"https://t.me/share/url?\" + new URLSearchParams({\n      url: e,\n      text: t || \"\"\n    }).toString().replace(/\\+/g, \"%20\"));\n  }),\n  vt = \"web_app_request_phone\",\n  dt = /* @__PURE__ */u(!1),\n  Di = /* @__PURE__ */k(\"requestPhoneAccess\", e => {\n    if (dt()) throw new l(Le, \"Phone access request is currently in progress\");\n    return dt.set(!0), D(vt, \"phone_requested\", e).then(t => t.status).finally(() => {\n      dt.set(!1);\n    });\n  }, {\n    isSupported: vt\n  });\nfunction En(e) {\n  return e || (e = {}), ee(\"getRequestedContact\", {}, {\n    ...e,\n    timeout: e.timeout || 5e3\n  }).then(On({\n    contact: Ne({\n      userId: [\"user_id\", ke()],\n      phoneNumber: [\"phone_number\", L()],\n      firstName: [\"first_name\", L()],\n      lastName: [\"last_name\", L(!0)]\n    })(),\n    authDate: [\"auth_date\", Tt()],\n    hash: L()\n  })());\n}\nconst ic = /* @__PURE__ */k(\"requestContact\", e => g.withFn(async t => {\n    const n = {\n      abortSignal: t\n    };\n    try {\n      return await En(n);\n    } catch {}\n    if ((await Di(n)) !== \"sent\") throw new l(Qs, \"User denied access\");\n    let o = 50;\n    for (; !t.aborted;) {\n      try {\n        return await En(n);\n      } catch {}\n      await gs(o), o += 50;\n    }\n    return null;\n  }, e), {\n    isSupported: vt\n  }),\n  yn = \"web_app_request_write_access\",\n  ft = /* @__PURE__ */u(!1),\n  cc = /* @__PURE__ */k(\"requestWriteAccess\", e => {\n    if (ft()) throw new l(Le, \"Write access request is currently in progress\");\n    return ft.set(!0), D(yn, \"write_access_requested\", e).then(t => t.status).finally(() => {\n      ft.set(!1);\n    });\n  }, {\n    isSupported: yn\n  }),\n  uc = /* @__PURE__ */k(\"getCurrentTime\", e => ee(\"getCurrentTime\", {}, e).then(Tt()), {\n    isSupported: \"web_app_invoke_custom_method\"\n  }),\n  Sn = \"web_app_read_text_from_clipboard\",\n  pc = /* @__PURE__ */k(\"readTextFromClipboard\", e => {\n    const t = oo();\n    return D(Sn, \"clipboard_text_received\", {\n      ...e,\n      params: {\n        req_id: t\n      },\n      capture: to(t)\n    }).then(({\n      data: n = null\n    }) => n);\n  }, {\n    isSupported: Sn\n  }),\n  lc = /* @__PURE__ */k(\"sendData\", e => {\n    const {\n      size: t\n    } = new Blob([e]);\n    if (!t || t > 4096) throw new l(Js, t ? \"Maximum size of data to send is 4096 bytes\" : \"Attempted to send empty data\");\n    d(\"web_app_data_send\", {\n      data: e\n    });\n  }),\n  Cn = \"web_app_share_to_story\",\n  dc = /* @__PURE__ */k(\"shareStory\", (e, t) => {\n    t || (t = {}), d(Cn, {\n      text: t.text,\n      media_url: e,\n      widget_link: t.widgetLink\n    });\n  }, {\n    isSupported: Cn\n  }),\n  $n = \"web_app_switch_inline_query\",\n  fc = /* @__PURE__ */k(\"switchInlineQuery\", (e, t) => {\n    d($n, {\n      query: e,\n      chat_types: t || []\n    });\n  }, {\n    isSupported: [$n, {\n      fn: () => !!X().botInline,\n      error: \"Mini App should be ran in Bot inline mode\"\n    }]\n  });\nfunction _c(e) {\n  try {\n    return {\n      result: e()\n    };\n  } catch (t) {\n    return {\n      error: t\n    };\n  }\n}\nfunction mc(e) {\n  Gs(e), xs();\n  const [t, n] = K(C(\"reload_iframe\", () => {\n      d(\"iframe_will_reload\"), window.location.reload();\n    }), Is),\n    {\n      acceptCustomStyles: s = !0\n    } = e || {};\n  if (s) {\n    const o = document.createElement(\"style\");\n    o.id = \"telegram-custom-styles\", document.head.appendChild(o), t(C(\"set_custom_style\", r => {\n      o.innerHTML = r;\n    }), () => {\n      document.head.removeChild(o);\n    });\n  }\n  return d(\"iframe_ready\", {\n    reload_supported: !0\n  }), n;\n}\nexport { zs as $createRequestId, Ss as $debug, no as $postEvent, Os as $targetOrigin, V as $version, g as CancelablePromise, zn as ERR_ABORTED, Qs as ERR_ACCESS_DENIED, Ys as ERR_ALREADY_MOUNTING, xt as ERR_ALREADY_OPENED, Le as ERR_ALREADY_REQUESTING, Gn as ERR_CANCELED, Ks as ERR_CSS_VARS_ALREADY_BOUND, Ps as ERR_CUSTOM_METHOD_ERR_RESPONSE, Js as ERR_DATA_INVALID_SIZE, Fs as ERR_INVALID_SLUG, kt as ERR_INVALID_URL, qo as ERR_INVALID_VALUE, Rs as ERR_METHOD_PARAMETER_UNSUPPORTED, Ts as ERR_METHOD_UNSUPPORTED, Zs as ERR_NOT_AVAILABLE, Xs as ERR_NOT_INITIALIZED, er as ERR_NOT_MOUNTED, hn as ERR_NOT_SUPPORTED, An as ERR_PARSE, ne as ERR_POPUP_INVALID_PARAMS, As as ERR_RETRIEVE_LP_FAILED, Fn as ERR_TIMED_OUT, zo as ERR_UNEXPECTED_TYPE, Wo as ERR_UNEXPECTED_VALUE, Kn as ERR_UNKNOWN_ENV, l as TypedError, mt as addEventListener, hr as authenticateBiometry, Hi as backButton, Pa as bindMiniAppCssVars, $a as bindThemeParamsCssVars, vi as bindViewportCssVars, qi as biometry, co as biometryMountError, qe as biometryState, _t as classNames, Oa as closeMiniApp, St as closeQrScanner, Wi as closingBehavior, zi as cloudStorage, Vs as compareVersions, Ls as createPostEvent, xs as defineEventHandlers, Rr as deleteCloudStorageItem, Ot as deleteCssVar, Cr as disableClosingConfirmation, _i as disableVerticalSwipes, bt as emitMiniAppsEvent, $r as enableClosingConfirmation, mi as enableVerticalSwipes, Ti as expandViewport, Or as getCloudStorageItem, Br as getCloudStorageKeys, uc as getCurrentTime, Gi as hapticFeedback, Nr as hapticFeedbackImpactOccurred, kr as hapticFeedbackNotificationOccurred, xr as hapticFeedbackSelectionChanged, nr as hideBackButton, ai as hideSettingsButton, mc as init, Fi as initData, _o as initDataAuthDate, mo as initDataCanSendAfter, Ir as initDataCanSendAfterDate, Vr as initDataChat, Ur as initDataChatInstance, Lr as initDataChatType, jr as initDataHash, Hr as initDataQueryId, ho as initDataRaw, qr as initDataReceiver, zr as initDataStartParam, Wt as initDataState, Gr as initDataUser, Qi as invoice, Us as invokeCustomMethod, Ii as isAbortError, Te as isAuthenticatingBiometry, le as isBackButtonMounted, tr as isBackButtonSupported, gt as isBackButtonVisible, We as isBiometryMounted, io as isBiometryMounting, fr as isBiometrySupported, Vi as isCanceledError, de as isClosingBehaviorMounted, wt as isClosingConfirmationEnabled, Ar as isCloudStorageSupported, go as isColorDark, Dr as isHapticFeedbackSupported, _s as isIframe, Re as isInvoiceOpened, Jr as isInvoiceSupported, ua as isMainButtonEnabled, pa as isMainButtonLoaderVisible, _e as isMainButtonMounted, la as isMainButtonVisible, Oe as isMiniAppCssVarsBound, Ta as isMiniAppDark, ge as isMiniAppMounted, Aa as isMiniAppSupported, Me as isPopupOpened, xa as isPopupSupported, Q as isQrScannerOpened, ja as isQrScannerSupported, ce as isRGB, Jo as isRGBShort, Mn as isRecord, Ae as isRequestingBiometryAccess, dt as isRequestingPhoneAccess, ft as isRequestingWriteAccess, bn as isSSR, Ga as isSecondaryButtonEnabled, Fa as isSecondaryButtonLoaderVisible, we as isSecondaryButtonMounted, Xa as isSecondaryButtonSupported, Ja as isSecondaryButtonVisible, Ee as isSettingsButtonMounted, ri as isSettingsButtonSupported, Ct as isSettingsButtonVisible, ye as isSwipeBehaviorMounted, di as isSwipeBehaviorSupported, _n as isTMA, Pe as isThemeParamsCssVarsBound, ea as isThemeParamsDark, fe as isThemeParamsMounted, xi as isTimeoutError, $t as isVerticalSwipesEnabled, De as isViewportCssVarsBound, wi as isViewportExpanded, rt as isViewportMounted, Io as isViewportMounting, Ei as isViewportStable, Yi as mainButton, ia as mainButtonBackgroundColor, ca as mainButtonHasShineEffect, Jt as mainButtonState, da as mainButtonText, fa as mainButtonTextColor, ki as mergeClassNames, Ki as miniApp, me as miniAppBackgroundColor, he as miniAppBottomBarColor, Zt as miniAppBottomBarColorRGB, be as miniAppHeaderColor, To as miniAppHeaderColorRGB, Ma as miniAppReady, Ao as miniAppState, Li as mockTelegramEnv, or as mountBackButton, wr as mountBiometry, vr as mountClosingBehavior, ha as mountMainButton, Ba as mountMiniApp, ei as mountSecondaryButton, ii as mountSettingsButton, hi as mountSwipeBehavior, Co as mountThemeParams, Ai as mountViewport, G as off, rr as offBackButtonClick, ga as offMainButtonClick, ni as offSecondaryButtonClick, ui as offSettingsButtonClick, C as on, sr as onBackButtonClick, ba as onMainButtonClick, ti as onSecondaryButtonClick, ci as onSettingsButtonClick, br as openBiometrySettings, Qr as openInvoice, rc as openLink, Ia as openPopup, qa as openQrScanner, Bi as openTelegramLink, Ji as parseInitData, ya as parseThemeParams, Zi as popup, Mt as postEvent, Xi as qrScanner, pc as readTextFromClipboard, Is as removeEventHandlers, Dt as request, ur as requestBiometry, gr as requestBiometryAccess, ic as requestContact, Di as requestPhoneAccess, Ci as requestViewport, cc as requestWriteAccess, Wr as restoreInitData, X as retrieveLaunchParams, _c as safeCall, ec as secondaryButton, Wa as secondaryButtonBackgroundColor, za as secondaryButtonHasShineEffect, Qa as secondaryButtonPosition, on as secondaryButtonState, Ya as secondaryButtonText, Ka as secondaryButtonTextColor, lc as sendData, Ni as serializeLaunchParams, Ko as serializeThemeParams, Mr as setCloudStorageItem, Pt as setCssVar, wa as setMainButtonParams, Po as setMiniAppBackgroundColor, Oo as setMiniAppBottomBarColor, Bo as setMiniAppHeaderColor, oi as setSecondaryButtonParams, tc as settingsButton, dc as shareStory, ac as shareURL, ar as showBackButton, pi as showSettingsButton, Ui as subscribe, z as supports, nc as swipeBehavior, fc as switchInlineQuery, oc as themeParams, Yr as themeParamsAccentTextColor, Gt as themeParamsBackgroundColor, Eo as themeParamsBottomBarBgColor, Ft as themeParamsButtonColor, wo as themeParamsButtonTextColor, Kr as themeParamsDestructiveTextColor, Zr as themeParamsHeaderBackgroundColor, Xr as themeParamsHintColor, ta as themeParamsLinkColor, Ie as themeParamsSecondaryBackgroundColor, na as themeParamsSectionBackgroundColor, oa as themeParamsSectionHeaderTextColor, sa as themeParamsSectionSeparatorColor, H as themeParamsState, ra as themeParamsSubtitleTextColor, aa as themeParamsTextColor, Bn as toRGB, Pn as toRecord, ir as unmountBackButton, Er as unmountBiometry, Tr as unmountClosingBehavior, Ea as unmountMainButton, Da as unmountMiniApp, si as unmountSecondaryButton, li as unmountSettingsButton, bi as unmountSwipeBehavior, va as unmountThemeParams, Ri as unmountViewport, ji as unsubscribe, yr as updateBiometryToken, sc as viewport, gi as viewportHeight, Vo as viewportMountError, yi as viewportStableHeight, O as viewportState, Si as viewportWidth };","map":{"version":3,"names":["vn","Error","constructor","t","n","s","message","cause","type","Object","setPrototypeOf","prototype","Tn","e","replace","toLowerCase","Ho","toUpperCase","qo","Wo","zo","An","Rn","o","r","a","i","ie","Pn","JSON","parse","Array","isArray","U","assign","isValid","Ne","Se","stringify","Go","String","L","toString","ke","Number","isNaN","Tt","Date","On","URLSearchParams","get","it","Fo","addedToAttachmentMenu","allowsWriteToPm","firstName","id","isBot","isPremium","languageCode","lastName","photoUrl","username","authDate","canSendAfter","chat","title","chatInstance","chatType","hash","queryId","receiver","startParam","user","ce","test","Jo","Bn","repeat","match","slice","reduce","parseInt","length","Qo","Yo","entries","Ko","fromEntries","map","Ni","initDataRaw","showSettings","botInline","set","platform","themeParams","version","Zo","Mn","_t","filter","Boolean","join","ki","forEach","ue","Dn","Nn","Xo","es","ts","ns","kn","xn","In","B","P","Ce","xe","v","pe","os","Vn","ct","ss","rs","as","is","cs","us","Ln","ps","initData","ls","Un","eventType","eventData","jn","ds","fs","TelegramWebviewProxy","postEvent","Hn","_s","window","self","top","ms","defineProperty","hs","je","enumerable","configurable","writable","value","qn","te","Wn","mt","addEventListener","removeEventListener","K","flat","push","bind","bs","l","At","zn","Gn","Fn","pn","xi","Ii","Vi","ln","reject","g","Promise","p","abortSignal","c","aborted","reason","f","b","w","_","W","I","AbortController","signal","S","abort","timeout","h","setTimeout","clearTimeout","withFn","then","resolve","cancel","catch","finally","dn","oe","gs","Jn","T","sessionStorage","setItem","A","getItem","Rt","ws","textColor","bgColor","shouldLog","console","Intl","DateTimeFormat","hour","minute","second","fractionalSecondDigits","timeZone","format","Pt","document","documentElement","style","setProperty","Ot","removeProperty","Es","Z","equals","once","findIndex","splice","ys","destroy","reset","sub","unsub","unsubAll","ut","add","Ss","Bt","Cs","$s","clipboard_text_received","req_id","data","custom_method_invoked","result","error","popup_closed","button_id","viewport_changed","height","width","innerWidth","is_state_stable","is_expanded","vs","innerHeight","source","parent","ht","fn","Qn","pt","Yn","C","Ts","As","Rs","Kn","Ps","Os","Mt","postMessage","external","notify","Dt","capture","event","payload","params","Nt","Zn","Bs","location","href","Ms","performance","getEntriesByType","name","Ds","Ns","Xn","eo","X","_n","bt","dispatchEvent","MessageEvent","ks","theme_params","Li","xs","Is","G","Ui","ji","to","mn","split","Vs","Math","max","E","z","includes","Ls","method","param","warn","Us","js","M","J","Hs","qs","Map","u","Ws","se","m","Set","pop","zs","no","V","Gs","oo","ee","d","D","request","N","ne","kt","Fs","Js","Qs","Le","xt","Ys","Ks","Zs","Xs","hn","er","bn","k","isSupported","isMounted","component","supports","supportError","$","un","any","supportsOptionError","isAvailable","ifAvailable","Ue","R","so","He","gt","le","tr","ro","It","nr","Vt","or","is_visible","sr","rr","ar","ir","ao","isMounting","mountError","j","qe","Te","Ae","We","io","co","cr","available","Lt","tokenSaved","token_saved","deviceId","device_id","accessRequested","access_requested","accessGranted","access_granted","gn","ur","ze","pr","lr","dr","Ut","Y","fr","_r","mr","jt","uo","hr","trim","token","Ge","br","gr","wr","po","Er","yr","status","qi","freeze","Fe","Je","wt","de","lo","Sr","Cr","Ht","$r","vr","need_confirmation","Tr","fo","Qe","Ar","Rr","keys","Pr","Or","Br","Mr","key","zi","$e","qt","Dr","Nr","impact_style","kr","notification_type","xr","Gi","Wt","x","_o","mo","Ir","getTime","Vr","Lr","Ur","jr","Hr","ho","qr","Wr","zr","Gr","Fi","Ji","zt","Fr","Re","Jr","bo","hostname","pathname","URL","slug","Qr","Qi","go","sqrt","fe","Pe","H","y","Yr","Gt","Ft","wo","Eo","Kr","Zr","Xr","ea","ta","Ie","na","oa","sa","ra","aa","F","Jt","re","hasShineEffect","isEnabled","isLoaderVisible","isVisible","text","backgroundColor","_e","ia","ca","ua","pa","la","da","fa","_a","yo","Ye","Qt","ma","ha","ba","ga","wa","color","has_shine_effect","is_active","is_progress_visible","text_color","Ea","Yt","ya","Ke","So","Sa","Ca","$a","Co","$o","va","vo","me","Kt","he","Zt","be","To","ge","Oe","Ta","Ao","bottomBarColor","headerColor","Et","yt","Be","ve","Xt","Aa","some","Ro","Ra","Ze","Pa","Oa","return_back","Ba","Po","Oo","Bo","Ma","en","color_key","rgb","Da","Na","buttons","tn","ka","Me","xa","Ia","Zi","Va","nn","La","Ua","Mo","St","Q","ja","Ha","onCaptured","qa","Xi","q","on","ae","position","we","Wa","za","Ga","Fa","Ja","Qa","Ya","Ka","Xe","Do","et","sn","Za","Xa","ei","ti","ni","oi","si","tt","No","nt","Ct","Ee","ri","rn","ko","ai","an","ii","ci","ui","pi","li","ot","st","ye","di","$t","fi","xo","_i","cn","mi","hi","allow_vertical_swipe","bi","O","isExpanded","stableHeight","rt","De","Io","Vo","at","gi","wi","Ei","yi","Si","Ci","isStable","Ve","Lo","$i","vi","Ti","Ai","Uo","jo","lt","Ri","Pi","rc","url","try_browser","tryBrowser","try_instant_view","tryInstantView","wn","Oi","Bi","path_full","search","Mi","ac","vt","dt","Di","En","contact","userId","phoneNumber","ic","yn","ft","cc","uc","Sn","pc","lc","size","Blob","Cn","dc","media_url","widget_link","widgetLink","$n","fc","query","chat_types","_c","mc","reload","acceptCustomStyles","createElement","head","appendChild","innerHTML","removeChild","reload_supported"],"sources":["B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\transformers\\dist\\index.js","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\classnames\\classNames.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\classnames\\mergeClassNames.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\bridge\\dist\\index.js","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\navigation\\dist\\index.js","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\signals\\dist\\index.js","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\globals.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createIsSupported.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\errors.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\utils\\isSSR.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\wrapSafe.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createWrapSafe.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createWrapComplete.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createWrapSupported.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\back-button\\back-button.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\createMountFn.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createWrapBasic.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\signals.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\eventToState.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\requestBiometry.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\methods.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createWrapMounted.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\closing-behavior\\closing-behavior.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\cloud-storage\\cloud-storage.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\haptic-feedback\\haptic-feedback.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\init-data\\init-data.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\init-data\\parseInitData.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\invoice\\invoice.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\utils\\isColorDark.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\theme-params\\signals.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\main-button\\signals.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\main-button\\methods.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\throwCssVarsBound.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\theme-params\\parseThemeParams.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\theme-params\\methods.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\mini-app\\signals.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\mini-app\\methods.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\popup\\prepareParams.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\popup\\popup.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\qr-scanner\\qr-scanner.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\secondary-button\\signals.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\secondary-button\\methods.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\settings-button\\settings-button.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\swipe-behavior\\swipe-behavior.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\viewport\\signals.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\viewport\\requestViewport.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\viewport\\methods.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\links\\openLink.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\links\\openTelegramLink.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\links\\shareURL.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\privacy\\requestPhoneAccess.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\privacy\\requestContact.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\privacy\\requestWriteAccess.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\uncategorized\\getCurrentTime.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\uncategorized\\readTextFromClipboard.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\uncategorized\\sendData.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\uncategorized\\shareStory.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\uncategorized\\switchInlineQuery.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\utils\\safeCall.ts","B:\\NEWTON\\backend\\frontend\\node_modules\\@telegram-apps\\sdk\\src\\init.ts"],"sourcesContent":["class i extends Error {\n  constructor(e, r, a) {\n    super(\n      typeof r == \"object\" ? r.message : r || e,\n      {\n        cause: typeof r == \"object\" ? r.cause : a\n      }\n    ), this.type = e, Object.setPrototypeOf(this, i.prototype);\n  }\n}\nfunction b(t) {\n  return t.replace(/[A-Z]/g, (e) => `_${e.toLowerCase()}`);\n}\nfunction E(t) {\n  return t.replace(/_[a-z]/g, (e) => e[1].toUpperCase());\n}\nconst R = \"ERR_INVALID_VALUE\", S = \"ERR_UNEXPECTED_VALUE\", w = \"ERR_UNEXPECTED_TYPE\", h = \"ERR_PARSE\";\nfunction y(t, e) {\n  const r = {};\n  for (const a in t) {\n    const n = t[a];\n    if (!n)\n      continue;\n    let o, c;\n    typeof n == \"function\" ? (o = a, c = n) : [o, c] = n;\n    try {\n      const p = c(e(o));\n      p !== void 0 && (r[a] = p);\n    } catch (p) {\n      throw new i(\n        h,\n        `Parser for \"${a}\" property failed${o === a ? \"\" : `. Source field: \"${o}\"`}`,\n        p\n      );\n    }\n  }\n  return r;\n}\nfunction d(t) {\n  let e = t;\n  if (typeof e == \"string\")\n    try {\n      e = JSON.parse(e);\n    } catch (r) {\n      throw new i(R, { cause: r });\n    }\n  if (typeof e != \"object\" || !e || Array.isArray(e))\n    throw new i(S);\n  return e;\n}\nfunction s(t, e) {\n  return (r) => {\n    const a = (n) => {\n      if (!(r && n === void 0))\n        try {\n          return e(n);\n        } catch (o) {\n          throw new i(h, {\n            message: `\"${t}\" transformer failed to parse the value`,\n            cause: o\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      a,\n      {\n        isValid(n) {\n          try {\n            return a(n), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(t, e) {\n  return s(e || \"object\", (r) => {\n    const a = d(r);\n    return y(t, (n) => a[n]);\n  });\n}\nfunction f(t) {\n  throw new i(w, `Unexpected value received: ${JSON.stringify(t)}`);\n}\nconst A = s(\"boolean\", (t) => {\n  if (typeof t == \"boolean\")\n    return t;\n  const e = String(t);\n  if (e === \"1\" || e === \"true\")\n    return !0;\n  if (e === \"0\" || e === \"false\")\n    return !1;\n  f(t);\n}), u = s(\"string\", (t) => {\n  if (typeof t == \"string\" || typeof t == \"number\")\n    return t.toString();\n  f(t);\n}), g = s(\"number\", (t) => {\n  if (typeof t == \"number\")\n    return t;\n  if (typeof t == \"string\") {\n    const e = Number(t);\n    if (!Number.isNaN(e))\n      return e;\n  }\n  f(t);\n}), D = s(\"date\", (t) => t instanceof Date ? t : new Date(g()(t) * 1e3));\nfunction P(t, e) {\n  return s(e || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && f(r);\n    const a = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return y(t, (n) => {\n      const o = a.get(n);\n      return o === null ? void 0 : o;\n    });\n  });\n}\nfunction m(t) {\n  for (const e in t)\n    t[e] = [b(e), t[e]];\n  return t;\n}\nconst U = (t) => {\n  const e = g(), r = g(!0), a = u(), n = u(!0), o = A(!0), c = l(m({\n    addedToAttachmentMenu: o,\n    allowsWriteToPm: o,\n    firstName: a,\n    id: e,\n    isBot: o,\n    isPremium: o,\n    languageCode: n,\n    lastName: n,\n    photoUrl: n,\n    username: n\n  }), \"User\")(!0);\n  return P(\n    m({\n      authDate: D(),\n      canSendAfter: r,\n      chat: l(\n        m({\n          id: e,\n          type: a,\n          title: a,\n          photoUrl: n,\n          username: n\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: n,\n      chatType: n,\n      hash: a,\n      queryId: n,\n      receiver: c,\n      startParam: n,\n      user: c\n    }),\n    \"initData\"\n  )(t);\n};\nfunction N(t) {\n  return /^#[\\da-f]{6}$/i.test(t);\n}\nfunction O(t) {\n  return /^#[\\da-f]{3}$/i.test(t);\n}\nfunction W(t) {\n  const e = t.replace(/\\s/g, \"\").toLowerCase();\n  if (N(e))\n    return e;\n  if (O(e)) {\n    let a = \"#\";\n    for (let n = 0; n < 3; n += 1)\n      a += e[1 + n].repeat(2);\n    return a;\n  }\n  const r = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((a, n) => {\n    const o = parseInt(n, 10).toString(16);\n    return a + (o.length === 1 ? \"0\" : \"\") + o;\n  }, \"#\");\n}\nconst _ = s(\"rgb\", (t) => W(u()(t))), T = s(\n  \"themeParams\",\n  (t) => {\n    const e = _(!0);\n    return Object.entries(d(t)).reduce((r, [a, n]) => (r[E(a)] = e(n), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction V(t) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(t).map(([e, r]) => [b(e), r])\n    )\n  );\n}\nconst $ = (t) => {\n  const e = u(), r = u(!0), a = A(!0);\n  return P({\n    botInline: [\"tgWebAppBotInline\", a],\n    initData: [\"tgWebAppData\", U(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", e],\n    showSettings: [\"tgWebAppShowSettings\", a],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", T()],\n    version: [\"tgWebAppVersion\", e]\n  }, \"launchParams\")(t);\n};\n// @__NO_SIDE_EFFECTS__\nfunction j(t) {\n  const { initDataRaw: e, startParam: r, showSettings: a, botInline: n } = t, o = new URLSearchParams();\n  return o.set(\"tgWebAppPlatform\", t.platform), o.set(\"tgWebAppThemeParams\", /* @__PURE__ */ V(t.themeParams)), o.set(\"tgWebAppVersion\", t.version), e && o.set(\"tgWebAppData\", e), r && o.set(\"tgWebAppStartParam\", r), typeof a == \"boolean\" && o.set(\"tgWebAppShowSettings\", a ? \"1\" : \"0\"), typeof n == \"boolean\" && o.set(\"tgWebAppBotInline\", n ? \"1\" : \"0\"), o.toString();\n}\nconst L = l({\n  eventType: u(),\n  eventData: (t) => t\n}, \"miniAppsMessage\");\nfunction I(t, e) {\n  return s(e || \"array\", (r) => {\n    let a;\n    if (Array.isArray(r))\n      a = r;\n    else if (typeof r == \"string\")\n      try {\n        const n = JSON.parse(r);\n        Array.isArray(n) && (a = n);\n      } catch {\n      }\n    return a || f(r), a.map(t);\n  });\n}\nconst C = s(\"fn\", (t) => {\n  if (typeof t == \"function\")\n    return t;\n  f(t);\n});\nfunction B(t) {\n  return !!t && typeof t == \"object\" && !Array.isArray(t);\n}\nexport {\n  R as ERR_INVALID_VALUE,\n  h as ERR_PARSE,\n  w as ERR_UNEXPECTED_TYPE,\n  S as ERR_UNEXPECTED_VALUE,\n  I as array,\n  A as boolean,\n  s as createTransformerGen,\n  D as date,\n  C as fn,\n  U as initData,\n  N as isRGB,\n  O as isRGBShort,\n  B as isRecord,\n  $ as launchParams,\n  L as miniAppsMessage,\n  g as number,\n  l as object,\n  _ as rgb,\n  P as searchParams,\n  j as serializeLaunchParams,\n  V as serializeThemeParams,\n  u as string,\n  T as themeParams,\n  W as toRGB,\n  d as toRecord\n};\n//# sourceMappingURL=index.js.map\n","import { isRecord } from '@telegram-apps/transformers';\n\n/**\n * Function which joins passed values with space following these rules:\n * 1. If value is non-empty string, it will be added to output.\n * 2. If value is object, only those keys will be added, which values are truthy.\n * 3. If value is array, classNames will be called with this value spread.\n * 4. All other values are ignored.\n *\n * You can find this function to similar one from the package {@link https://www.npmjs.com/package/classnames|classnames}.\n * @param values - values array.\n * @returns Final class name.\n */\nexport function classNames(...values: any[]): string {\n  return values\n    .map((value) => {\n      if (typeof value === 'string') {\n        return value;\n      }\n\n      if (isRecord(value)) {\n        return classNames(Object.entries(value).map((entry) => entry[1] && entry[0]));\n      }\n\n      if (Array.isArray(value)) {\n        return classNames(...value);\n      }\n    })\n    .filter(Boolean)\n    .join(' ');\n}\n","import { isRecord } from '@telegram-apps/transformers';\n\nimport { classNames } from './classNames.js';\n\ntype UnionStringKeys<U> = U extends U\n  ? { [K in keyof U]-?: U[K] extends string | undefined ? K : never }[keyof U]\n  : never;\n\ntype UnionRequiredKeys<U> = U extends U\n  ? { [K in UnionStringKeys<U>]: ({} extends Pick<U, K> ? never : K) }[UnionStringKeys<U>]\n  : never;\n\ntype UnionOptionalKeys<U> = Exclude<UnionStringKeys<U>, UnionRequiredKeys<U>>;\n\nexport type MergeClassNames<Tuple extends any[]> =\n// Removes all types from union that will be ignored by the mergeClassNames function.\n  Exclude<Tuple[number], number | string | null | undefined | any[] | boolean> extends infer Union\n    ?\n    & { [K in UnionRequiredKeys<Union>]: string; }\n    & { [K in UnionOptionalKeys<Union>]?: string; }\n    : never;\n\n/**\n * Merges two sets of classnames.\n *\n * The function expects to pass an array of objects with values that could be passed to\n * the `classNames` function.\n * @returns An object with keys from all objects with merged values.\n * @see classNames\n */\nexport function mergeClassNames<T extends any[]>(...partials: T): MergeClassNames<T> {\n  return partials.reduce<MergeClassNames<T>>((acc, partial) => {\n    if (isRecord(partial)) {\n      Object.entries(partial).forEach(([key, value]) => {\n        const className = classNames((acc as any)[key], value);\n        if (className) {\n          (acc as any)[key] = className;\n        }\n      });\n    }\n    return acc;\n  }, {} as MergeClassNames<T>);\n}\n","let v = class H extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, H.prototype);\n  }\n};\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", de = \"ERR_UNEXPECTED_VALUE\", me = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const n = {};\n  for (const r in e) {\n    const o = e[r];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = r, a = o) : [s, a] = o;\n    try {\n      const i = a(t(s));\n      i !== void 0 && (n[r] = i);\n    } catch (i) {\n      throw new v(\n        K,\n        `Parser for \"${r}\" property failed${s === r ? \"\" : `. Source field: \"${s}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new v(he, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new v(de);\n  return t;\n}\nfunction g(e, t) {\n  return (n) => {\n    const r = (o) => {\n      if (!(n && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new v(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      r,\n      {\n        isValid(o) {\n          try {\n            return r(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(e, t) {\n  return g(t || \"object\", (n) => {\n    const r = Z(n);\n    return V(e, (o) => r[o]);\n  });\n}\nfunction R(e) {\n  throw new v(me, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), _ = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && R(n);\n    const r = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return V(e, (o) => {\n      const s = r.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction U(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), n = P(!0), r = _(), o = _(!0), s = $(!0), a = l(U({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: r,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    U({\n      authDate: Ee(),\n      canSendAfter: n,\n      chat: l(\n        U({\n          id: t,\n          type: r,\n          title: r,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: r,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let r = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      r += t[1 + o].repeat(2);\n    return r;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((r, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return r + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(_()(e))), Se = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((n, [r, o]) => (n[we(r)] = t(o), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction X(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [G(t), n])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = _(), n = _(!0), r = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", r],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", r],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", Se()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction $e(e) {\n  const { initDataRaw: t, startParam: n, showSettings: r, botInline: o } = e, s = new URLSearchParams();\n  return s.set(\"tgWebAppPlatform\", e.platform), s.set(\"tgWebAppThemeParams\", /* @__PURE__ */ X(e.themeParams)), s.set(\"tgWebAppVersion\", e.version), t && s.set(\"tgWebAppData\", t), n && s.set(\"tgWebAppStartParam\", n), typeof r == \"boolean\" && s.set(\"tgWebAppShowSettings\", r ? \"1\" : \"0\"), typeof o == \"boolean\" && s.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), s.toString();\n}\nconst Y = l({\n  eventType: _(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Q = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction Ne(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = l({\n  TelegramWebviewProxy: l({ postEvent: Q() })()\n});\nfunction ee(e) {\n  return Ce().isValid(e);\n}\nfunction De() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar Ue = Object.defineProperty, je = (e, t, n) => t in e ? Ue(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, te = (e, t, n) => je(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nclass b extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction x(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction L(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((n) => {\n        n();\n      });\n    }\n  ];\n}\nfunction xe(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction W(e) {\n  return (t) => xe(t, e);\n}\nconst ne = \"ERR_ABORTED\", re = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(ne, { cause: e });\n}\nconst ot = W(oe), st = W(ne), at = W(re);\nfunction q(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s, a;\n    super((i, c) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return c(M(u.reason));\n      const [f, h] = L(), d = (m) => (...ge) => (h(), m(...ge)), T = new AbortController(), { signal: S } = T;\n      a = d((m) => {\n        T.abort(m), c(m);\n      }), s = d(i), u && f(\n        x(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const m = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(m);\n        });\n      }\n      r && r(s, a, S);\n    }), te(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new w((r, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(r, o) : r(a);\n      } catch (a) {\n        o(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(re));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return q(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return q(super.then(t, n), this);\n  }\n}\nfunction F(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass A extends w {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s;\n    super((a, i, c) => {\n      s = a, r && r(a, i, c);\n    }, o), te(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new A(\n      (r, o, s) => w.withFn(t, { abortSignal: s }).then(r, o),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new A((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new A((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return F(super.then(t, n), this);\n  }\n}\nfunction it(e, t) {\n  return new w((n) => {\n    setTimeout(n, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction ke(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction Le(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction pt(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction We(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: r,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...i) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const c = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${c};background-color: lightblue;color:black`,\n      \"\",\n      `${c};${n ? `color:${n};` : \"\"}${r ? `background-color:${r}` : \"\"}`,\n      ...i\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction ft(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction _t(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Oe(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction E(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let r = [], o = e;\n  const s = (u) => {\n    if (!n(o, u)) {\n      const f = o;\n      o = u, Oe(c, () => {\n        [...r].forEach(([h, d]) => {\n          h(u, f), d && i(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (u, f) => {\n    const h = a(f), d = r.findIndex(([T, S]) => T === u && S.once === h.once && S.signal === h.signal);\n    d >= 0 && r.splice(d, 1);\n  }, c = Object.assign(\n    function() {\n      return Ie(c), o;\n    },\n    {\n      destroy() {\n        r = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return r.push([u, a(f)]), () => i(u, f);\n      },\n      unsub: i,\n      unsubAll() {\n        r = r.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return c;\n}\nconst j = [];\nfunction Ie(e) {\n  j.length && j[j.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ E(!1), [O, Me] = /* @__PURE__ */ We(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), qe = {\n  clipboard_text_received: l({\n    req_id: _(),\n    data: (e) => e === null ? e : _(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: l({\n    req_id: _(),\n    result: (e) => e,\n    error: _(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? l({\n    button_id: (t) => t == null ? void 0 : _()(t)\n  })()(e) : {}),\n  viewport_changed: l({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Fe(e) {\n  const t = window, [, n] = L(\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // The desktop version of Telegram is sometimes not sending the \"viewport_changed\"\n    // event. For example, when the Main Button is shown. That's why we should\n    // add our own listener to make sure viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    x(t, \"resize\", () => {\n      e([\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      }]);\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    x(t, \"message\", (r) => {\n      if (r.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = Y()(r.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, i = qe[s];\n      try {\n        const c = i ? i()(a) : a;\n        O(\"Event received:\", c ? { eventType: s, eventData: c } : { eventType: s }), e([s, c]);\n      } catch (c) {\n        Me(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          c\n        );\n      }\n    })\n  );\n  return n;\n}\nconst N = /* @__PURE__ */ E(), C = /* @__PURE__ */ E();\nfunction ie() {\n  return C() || C.set(Fe(N.set)), N;\n}\nconst y = /* @__PURE__ */ E({});\nfunction ce(e) {\n  let t = y()[e];\n  return t || (t = /* @__PURE__ */ E(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ie().sub((n) => {\n    n && n[0] === e && t.set(n[1]);\n  }), y.set({ ...y(), [e]: t })), t;\n}\nfunction Je(e, t, n) {\n  return ce(e).sub(t, n);\n}\nconst Be = \"ERR_METHOD_UNSUPPORTED\", He = \"ERR_RETRIEVE_LP_FAILED\", Ge = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ke = \"ERR_UNKNOWN_ENV\", Ve = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ E(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const n = window;\n  if (ee(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const r = JSON.stringify({ eventType: e, eventData: t });\n  if (De())\n    return n.parent.postMessage(r, ue());\n  const { external: o } = n;\n  if (l({ notify: Q() })().isValid(o)) {\n    o.notify(r);\n    return;\n  }\n  throw new b(Ke);\n}\nfunction fe(e, t, n) {\n  n || (n = {});\n  const { capture: r } = n, [o, s] = L();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((i) => {\n      o(\n        Je(i, (c) => {\n          (!r || (Array.isArray(t) ? r({\n            event: i,\n            payload: c\n          }) : r(c))) && a(c);\n        })\n      );\n    }), (n.postEvent || pe)(e, n.params);\n  }, n).finally(s);\n}\nfunction I(e) {\n  return Ae()(e);\n}\nfunction _e(e) {\n  return I(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ze() {\n  return _e(window.location.href);\n}\nfunction ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return _e(e.name);\n}\nconst Xe = \"launchParams\";\nfunction Ye() {\n  return I(Le(Xe) || \"\");\n}\nfunction le(e) {\n  ke(\"launchParams\", /* @__PURE__ */ $e(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Qe() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ze,\n    // Then, try using the lower level API - window.performance.\n    ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Ye\n  ])\n    try {\n      const n = t();\n      return le(n), n;\n    } catch (n) {\n      e.push(n);\n    }\n  throw new b(He, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"📖 Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `— ${be(t)}`)\n  ].join(`\n`));\n}\nfunction lt(e) {\n  if (e === \"simple\")\n    try {\n      return Qe(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (ee(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction k(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction et(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: n } = Y()(t);\n      n === \"web_app_request_theme\" && k(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ X(e))\n      }), n === \"web_app_request_viewport\" && k(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction bt(e) {\n  var r;\n  const t = typeof e == \"string\" ? I(e) : e;\n  le(t);\n  const n = (r = window.TelegramWebviewProxy) == null ? void 0 : r.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      et(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), n == null || n(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction gt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((n, r, o) => {\n      if (r === o.length - 1) {\n        t[n] = k;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction wt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction ht(e, t, n) {\n  ce(e).unsub(t, n);\n}\nfunction dt(e, t) {\n  return ie().sub(e, t);\n}\nfunction mt(e, t) {\n  N.unsub(e, t);\n}\nfunction tt(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction J(e) {\n  return e.split(\".\").map(Number);\n}\nfunction nt(e, t) {\n  const n = J(e), r = J(t), o = Math.max(n.length, r.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = n[s] || 0, i = r[s] || 0;\n    if (a !== i)\n      return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return nt(e, t) <= 0;\n}\nfunction B(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", n);\n      if (t === \"try_browser\")\n        return p(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction Et(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : (r) => {\n    const { method: o, version: s } = r;\n    let a, i;\n    if (\"param\" in r ? (a = `Parameter \"${r.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, i = Ge) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, i = Be), t === \"strict\")\n      throw new b(i, a);\n    return console.warn(a);\n  };\n  return (r, o) => B(r, e) ? Ne(o) && r === \"web_app_set_header_color\" && \"color\" in o && !B(r, \"color\", e) ? n({ version: e, method: r, param: \"color\" }) : pe(r, o) : n({ version: e, method: r });\n}\nfunction yt(e, t, n, r) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...r || {},\n    params: { method: e, params: t, req_id: n },\n    capture: tt(n)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ve, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction vt() {\n  var e;\n  (e = C()) == null || e(), [\n    ...Object.values(y()),\n    y,\n    N,\n    C,\n    ue,\n    ae\n  ].forEach(rt);\n}\nexport {\n  ae as $debug,\n  ue as $targetOrigin,\n  w as CancelablePromise,\n  ne as ERR_ABORTED,\n  re as ERR_CANCELED,\n  Ve as ERR_CUSTOM_METHOD_ERR_RESPONSE,\n  Ge as ERR_METHOD_PARAMETER_UNSUPPORTED,\n  Be as ERR_METHOD_UNSUPPORTED,\n  He as ERR_RETRIEVE_LP_FAILED,\n  oe as ERR_TIMED_OUT,\n  Ke as ERR_UNKNOWN_ENV,\n  A as EnhancedPromise,\n  b as TypedError,\n  x as addEventListener,\n  ct as camelToKebab,\n  ut as camelToSnake,\n  tt as captureSameReq,\n  nt as compareVersions,\n  M as createAbortError,\n  L as createCbCollector,\n  We as createLogger,\n  Et as createPostEvent,\n  W as createTypedErrorPredicate,\n  gt as defineEventHandlers,\n  _t as deleteCssVar,\n  k as emitMiniAppsEvent,\n  Le as getStorageValue,\n  ee as hasWebviewProxy,\n  yt as invokeCustomMethod,\n  st as isAbortError,\n  at as isCanceledError,\n  De as isIframe,\n  lt as isTMA,\n  ot as isTimeoutError,\n  bt as mockTelegramEnv,\n  ht as off,\n  Je as on,\n  pe as postEvent,\n  wt as removeEventHandlers,\n  fe as request,\n  vt as resetPackageState,\n  Qe as retrieveLaunchParams,\n  ft as setCssVar,\n  ke as setStorageValue,\n  it as sleep,\n  pt as snakeToCamel,\n  dt as subscribe,\n  B as supports,\n  mt as unsubscribe\n};\n//# sourceMappingURL=index.js.map\n","function i() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction c() {\n  const t = i();\n  return !!t && t.type === \"reload\";\n}\nfunction o(t, n) {\n  return t.startsWith(n) ? t : `${n}${t}`;\n}\nfunction R(t) {\n  return new URL(\n    typeof t == \"string\" ? t : [\n      t.pathname || \"\",\n      o(t.search || \"\", \"?\"),\n      o(t.hash || \"\", \"#\")\n    ].join(\"\"),\n    \"http://a\"\n  );\n}\nfunction a(t) {\n  const n = (typeof t == \"string\" ? t : t.pathname || \"\").startsWith(\"/\"), e = R(t), { pathname: s } = e;\n  return `${n ? s : s.slice(1)}${e.search}${e.hash}`;\n}\nconst r = \"ERR_NAVIGATION_HISTORY_EMPTY\", I = \"ERR_NAVIGATION_CURSOR_INVALID\";\nexport {\n  I as ERR_CURSOR_INVALID,\n  r as ERR_HISTORY_EMPTY,\n  R as createSafeURL,\n  o as ensurePrefix,\n  i as getFirstNavigationEntry,\n  c as isPageReload,\n  a as urlToPath\n};\n//# sourceMappingURL=index.js.map\n","let r;\nfunction y(e, c) {\n  r && r.set(e, c) || c();\n}\nfunction m(e) {\n  if (r)\n    return e();\n  r = /* @__PURE__ */ new Map();\n  try {\n    e();\n  } finally {\n    r.forEach((c) => c()), r = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction S(e, c) {\n  c || (c = {});\n  const g = c.equals || Object.is;\n  let u = [], s = e;\n  const i = (t) => {\n    if (!g(s, t)) {\n      const l = s;\n      s = t, y(o, () => {\n        [...u].forEach(([f, d]) => {\n          f(t, l), d && n(f, !0);\n        });\n      });\n    }\n  };\n  function a(t) {\n    const l = typeof t != \"object\" ? { once: t } : t;\n    return {\n      once: l.once || !1,\n      signal: l.signal || !1\n    };\n  }\n  const n = (t, l) => {\n    const f = a(l), d = u.findIndex(([h, p]) => h === t && p.once === f.once && p.signal === f.signal);\n    d >= 0 && u.splice(d, 1);\n  }, o = Object.assign(\n    function() {\n      return j(o), s;\n    },\n    {\n      destroy() {\n        u = [];\n      },\n      set: i,\n      reset() {\n        i(e);\n      },\n      sub(t, l) {\n        return u.push([t, a(l)]), () => n(t, l);\n      },\n      unsub: n,\n      unsubAll() {\n        u = u.filter((t) => t[1].signal);\n      }\n    }\n  );\n  return o;\n}\nconst b = [];\nfunction j(e) {\n  b.length && b[b.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction x(e, c) {\n  let g = /* @__PURE__ */ new Set(), u;\n  function s() {\n    return u || (u = /* @__PURE__ */ S(a(), c));\n  }\n  function i() {\n    s().set(a());\n  }\n  function a() {\n    g.forEach((t) => {\n      t.unsub(i, { signal: !0 });\n    });\n    const n = /* @__PURE__ */ new Set();\n    let o;\n    b.push(n);\n    try {\n      o = e();\n    } finally {\n      b.pop();\n    }\n    return n.forEach((t) => {\n      t.sub(i, { signal: !0 });\n    }), g = n, o;\n  }\n  return Object.assign(function() {\n    return s()();\n  }, {\n    destroy() {\n      s().destroy();\n    },\n    sub(...n) {\n      return s().sub(...n);\n    },\n    unsub(...n) {\n      s().unsub(...n);\n    },\n    unsubAll(...n) {\n      s().unsubAll(...n);\n    }\n  });\n}\nexport {\n  m as batch,\n  x as computed,\n  S as signal\n};\n//# sourceMappingURL=index.js.map\n","import {\n  retrieveLaunchParams,\n  postEvent as _postEvent,\n  request as _request,\n  invokeCustomMethod as _invokeCustomMethod,\n  createPostEvent,\n  type PostEventFn,\n  type Version,\n  type RequestFn,\n  type CancelablePromise,\n  type ExecuteWithOptions,\n  type CustomMethodParams,\n  type CustomMethodName,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nexport interface ConfigureOptions {\n  /**\n   * A maximum supported Mini Apps version.\n   * @default Being extracted using the `retrieveLaunchParams` function.\n   * @see retrieveLaunchParams\n   */\n  version?: Version;\n  /**\n   * Custom postEvent function.\n   *\n   * Passing the \"strict\" value creates a function, which always checks if specified call supported\n   * by currently supported Mini Apps version. If the method is unsupported, an error will be\n   * thrown.\n   *\n   * Passing the \"non-strict\" value creates a postEvent function not throwing any errors, but\n   * warning about a missing method support.\n   *\n   * @default 'strict'\n   * @see createPostEvent\n   */\n  postEvent?: PostEventFn;\n}\n\n/**\n * Signal with a request identifier generator. Usually, you don't need to set this value manually.\n */\nexport const $createRequestId = signal((() => {\n  let requestId = 0;\n  return () => (requestId += 1).toString();\n})());\n\n/**\n * Signal with a currently used postEvent function across the package.\n */\nexport const $postEvent = signal<PostEventFn>(_postEvent);\n\n/**\n * Signal with a currently supported maximum Mini Apps version. This value is usually set via\n */\nexport const $version = signal<Version>('0.0');\n\n/**\n * Configures package global dependencies.\n * @param options - configuration additional options.\n */\nexport function configure(options?: ConfigureOptions): void {\n  options ||= {};\n  const { postEvent: optionsPostEvent } = options;\n  const v = options.version || retrieveLaunchParams().version;\n  $version.set(v);\n  $postEvent.set(\n    typeof optionsPostEvent === 'function'\n      ? optionsPostEvent\n      : createPostEvent(v),\n  );\n}\n\n/**\n * Creates a new request id.\n */\nexport function createRequestId(): string {\n  return $createRequestId()();\n}\n\n/**\n * Invokes known custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod<M extends CustomMethodName>(\n  method: M,\n  params: CustomMethodParams<M>,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\n/**\n * Invokes unknown custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown> {\n  return _invokeCustomMethod(method, params, createRequestId(), {\n    ...options || {},\n    postEvent: postEvent,\n  });\n}\n\n/**\n * `request` function from the bridge with applied global `postEvent` option.\n */\nexport const request = ((method: any, eventOrEvents: any, options: any) => {\n  options ||= {};\n  options.postEvent ||= postEvent;\n  return _request(method, eventOrEvents, options);\n}) as RequestFn;\n\n/**\n * Shortcut for $postEvent call.\n */\nexport const postEvent = ((method: any, params: any) => {\n  return $postEvent()(method, params);\n}) as PostEventFn;\n","import { type Computed, computed } from '@telegram-apps/signals';\nimport { type MethodName, supports } from '@telegram-apps/bridge';\n\nimport { $version } from '@/scopes/globals.js';\n\n/**\n * @returns A signal indicating if the specified Mini Apps method is supported.\n * @param method - Mini Apps method name\n */\nexport function createIsSupported(method: MethodName): Computed<boolean> {\n  return computed(() => supports(method, $version()));\n}","export const ERR_POPUP_INVALID_PARAMS = 'ERR_POPUP_INVALID_PARAMS';\nexport const ERR_INVALID_URL = 'ERR_INVALID_URL';\nexport const ERR_INVALID_SLUG = 'ERR_INVALID_SLUG';\nexport const ERR_DATA_INVALID_SIZE = 'ERR_DATA_INVALID_SIZE';\nexport const ERR_ACCESS_DENIED = 'ERR_ACCESS_DENIED';\nexport const ERR_ALREADY_REQUESTING = 'ERR_ALREADY_REQUESTING';\nexport const ERR_ALREADY_OPENED = 'ERR_ALREADY_OPENED';\nexport const ERR_ALREADY_MOUNTING = 'ERR_ALREADY_MOUNTING';\nexport const ERR_CSS_VARS_ALREADY_BOUND = 'ERR_VARS_ALREADY_BOUND';\nexport const ERR_NOT_AVAILABLE = 'ERR_NOT_AVAILABLE';\nexport const ERR_NOT_INITIALIZED = 'ERR_NOT_INITIALIZED';\nexport const ERR_NOT_SUPPORTED = 'ERR_NOT_SUPPORTED';\nexport const ERR_NOT_MOUNTED = 'ERR_NOT_MOUNTED';\n","/**\n * @returns True, if current environment is server.\n */\nexport function isSSR(): boolean {\n  return typeof window === 'undefined';\n}\n","import {\n  ERR_UNKNOWN_ENV,\n  type If,\n  type MethodName,\n  supports,\n  isTMA,\n  TypedError,\n  type MethodNameWithVersionedParams,\n  type MethodVersionedParams, IsNever,\n} from '@telegram-apps/bridge';\nimport { type Computed, computed } from '@telegram-apps/signals';\n\nimport { $version } from '@/scopes/globals.js';\nimport {\n  ERR_NOT_INITIALIZED,\n  ERR_NOT_MOUNTED,\n  ERR_NOT_SUPPORTED,\n} from '@/errors.js';\nimport { isSSR } from '@/utils/isSSR.js';\nimport type { AnyFn } from '@/types.js';\n\ntype HasCheckSupportMethodTuple<FnArgs extends any[]> = {\n  [M in MethodNameWithVersionedParams]: [\n    method: M,\n    parameter: MethodVersionedParams<M>,\n    shouldCheck: (...args: FnArgs) => boolean,\n  ]\n}[MethodNameWithVersionedParams];\n\ninterface CustomSupportValidator {\n  fn: () => boolean;\n  error: string;\n}\n\nexport type IsSupported =\n  | MethodName\n  | CustomSupportValidator\n  | (MethodName | CustomSupportValidator)[]\n  | { any: (MethodName | CustomSupportValidator)[] };\n\nexport type Supports<Fn extends AnyFn> = Record<string, HasCheckSupportMethodTuple<Parameters<Fn>>>\n\nexport type SafeWrapped<\n  Fn extends AnyFn,\n  Supported extends boolean,\n  SupportsSchema extends Record<string, any>\n> =\n  & Fn\n  & {\n  /**\n   * The signal returning `true` if the function is available in the\n   * current environment.\n   *\n   * To be more accurate, the method checks the following:\n   * 1. The current environment is not TMA or server.\n   * 2. The SDK package is initialized.\n   * 3. If passed, the `isSupported` signal returns true.\n   * 4. If passed, the `isMounted` signal returns true.\n   *\n   * *You should use this function when possible because it provides\n   * must-have code security mechanisms and makes a developer sure that\n   * he is using the package properly.*\n   *\n   * @returns True if the function is available in the current environment.\n   * @example\n   * if (showBackButton.isAvailable()) {\n   *   showBackButton();\n   * }\n   */\n  isAvailable: Computed<boolean>;\n  /**\n   * Calls the function only in case it is available.\n   * @example\n   * showBackButton.ifAvailable();\n   */\n  ifAvailable(...args: Parameters<Fn>): ReturnType<Fn> | undefined;\n}\n  & If<Supported, {\n  /**\n   * The signal returning `true` if the function is supported by\n   * the current Mini Apps version including some possible additional\n   * conditions.\n   *\n   * It is highly recommended to use this signal only in certain narrow cases\n   * when only the function support check is required.\n   *\n   * This signal is not applying additional operations like checking if the\n   * current environment is Mini Apps and the SDK is initialized.\n   *\n   * To check if the function is available for use, use the `isAvailable`\n   * signal.\n   *\n   * @returns True if this function is supported.\n   * @see isAvailable\n   * @example\n   * if (setMiniAppBottomBarColor.isSupported()) {\n   *   console.log('Mini App bottom bar is supported, but the function is still probably unavailable');\n   * }\n   */\n  isSupported: Computed<boolean>;\n}, {}>\n  & If<IsNever<SupportsSchema>, {}, {\n  /**\n   * A map where the key is the function-specific option name and value is a signal indicating\n   * if it is supported by the current environment.\n   * @example\n   * if (setHeaderColor.isAvailable()) {\n   *   if (setHeaderColor.supports.rgb()) {\n   *     setHeaderColor('#ffaabb');\n   *   } else {\n   *     setHeaderColor('bg_color');\n   *   }\n   * }\n   */\n  supports: Record<keyof SupportsSchema, Computed<boolean>>\n}>\n\ninterface Options<Fn extends AnyFn> {\n  component?: string;\n  isMounted?: () => boolean;\n  isSupported?: IsSupported;\n  supports?: Supports<Fn>,\n}\n\nexport function wrapSafe<Fn extends AnyFn>(\n  method: string,\n  fn: Fn,\n): SafeWrapped<Fn, false, never>;\n\nexport function wrapSafe<Fn extends AnyFn, O extends Options<Fn>>(\n  method: string,\n  fn: Fn,\n  options: O,\n): SafeWrapped<\n  Fn,\n  O extends { isSupported: any } ? true : false,\n  O extends { supports: infer S extends Record<string, any> } ? S : never\n>\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function wrapSafe<Fn extends AnyFn>(\n  method: string,\n  fn: Fn,\n  { isSupported, isMounted, component, supports: supportsOption }: Options<Fn> = {},\n): SafeWrapped<Fn, boolean, Record<string, any> | never> {\n  // Full function identifier.\n  const fullName = `${component ? `${component}.` : ''}${method}()`;\n\n  // Simplify the isSupported value to work with an array of validators or a single object.\n  isSupported = isSupported\n    ? Array.isArray(isSupported)\n      // (MethodName | CustomSupportValidator)[]\n      ? isSupported\n      : typeof isSupported === 'object' && 'any' in isSupported\n        // { any: (MethodName | CustomSupportValidator)[] }\n        ? isSupported\n        // MethodName | CustomSupportValidator\n        : [isSupported]\n    : undefined;\n\n  /**\n   * @returns True if the specified option is supported.\n   * @param option - option name.\n   */\n  function isOptionSupported(option: string): boolean {\n    if (supportsOption) {\n      const tuple = supportsOption[option];\n      return supports(tuple[0], tuple[1], $version());\n    }\n    return true;\n  }\n\n  /**\n   * @returns An error related to isSupported() check.\n   */\n  const supportError = (): string | undefined => {\n    // isSupported was not specified. In this case we assume that the function has no dependencies\n    // and is always supported.\n    if (!isSupported) {\n      return;\n    }\n\n    const defaultErr = `it is unsupported in Mini Apps version ${$version()}`;\n\n    function getError(item: MethodName | CustomSupportValidator): string | undefined {\n      return typeof item === 'string'\n        ? supports(item, $version())\n          ? undefined\n          : defaultErr\n        : item.fn()\n          ? undefined\n          : item.error;\n    }\n\n    // Should check each array item.\n    // (MethodName | CustomSupportValidator)[]\n    if (Array.isArray(isSupported)) {\n      for (const item of isSupported) {\n        const err = getError(item);\n        if (err) {\n          return err;\n        }\n      }\n      return;\n    }\n\n    // Should check if any item didn't return an error.\n    let lastErr: string | undefined;\n    for (const item of isSupported.any) {\n      lastErr = getError(item);\n      if (!lastErr) {\n        return;\n      }\n    }\n    return defaultErr;\n  };\n\n  /**\n   * @returns An error related to supports.<name> check.\n   */\n  const supportsOptionError = (...args: Parameters<Fn>): string | undefined => {\n    if (supportsOption) {\n      for (const k in supportsOption) {\n        if (supportsOption[k][2](...args) && !isOptionSupported(k)) {\n          return `option ${k} is not supported in Mini Apps version ${$version()}`;\n        }\n      }\n    }\n  };\n\n  const $isSupported = computed(() => !supportError());\n  const $isInitialized = computed(() => $version() !== '0.0');\n  const $isMounted = computed(() => !isMounted || isMounted());\n  const $isAvailable = computed(\n    () => isTMA('simple')\n      && !isSSR()\n      && $isInitialized()\n      && $isSupported()\n      && $isMounted(),\n  );\n\n  let supportsMap: Record<string, Computed<boolean>> | undefined;\n  if (supportsOption) {\n    supportsMap = {};\n    for (const option in supportsOption) {\n      supportsMap[option] = computed(() => isOptionSupported(option));\n    }\n  }\n\n  return Object.assign(\n    (...args: Parameters<Fn>): ReturnType<Fn> => {\n      const errMessagePrefix = `Unable to call the ${fullName} ${component ? 'method' : 'function'}:`;\n\n      if (isSSR() || !isTMA('simple')) {\n        throw new TypedError(\n          ERR_UNKNOWN_ENV,\n          `${errMessagePrefix} it can't be called outside Mini Apps`,\n        );\n      }\n      if (!$isInitialized()) {\n        throw new TypedError(\n          ERR_NOT_INITIALIZED,\n          `${errMessagePrefix} the SDK was not initialized. Use the SDK init() function`,\n        );\n      }\n      const supportErr = supportError();\n      if (supportErr) {\n        throw new TypedError(ERR_NOT_SUPPORTED, `${errMessagePrefix} ${supportErr}`);\n      }\n      const supportsOptionErr = supportsOptionError(...args);\n      if (supportsOptionErr) {\n        throw new TypedError(ERR_NOT_SUPPORTED, `${errMessagePrefix} ${supportsOptionErr}`);\n      }\n      if (!$isMounted()) {\n        throw new TypedError(\n          ERR_NOT_MOUNTED,\n          `${errMessagePrefix} the component is not mounted. Use the ${component}.mount() method`,\n        );\n      }\n      return fn(...args);\n    },\n    fn,\n    {\n      isAvailable: $isAvailable,\n      ifAvailable(...args: Parameters<Fn>): ReturnType<Fn> | undefined {\n        return $isAvailable()\n          ? fn(...args)\n          : undefined;\n      },\n    },\n    isSupported ? {\n      isSupported: $isSupported,\n    } : {},\n    supportsMap ? {\n      supports: supportsMap,\n    } : {},\n  );\n}\n","import type { AnyFn } from '@/types.js';\nimport {\n  wrapSafe,\n  type IsSupported,\n  type SafeWrapped,\n  type Supports,\n} from '@/scopes/toolkit/wrapSafe.js';\n\nexport interface SafeWrapFn<S extends boolean> {\n  <Fn extends AnyFn>(method: string, fn: Fn): SafeWrapped<Fn, S, never>;\n  <Fn extends AnyFn>(method: string, fn: Fn, isSupported: IsSupported): SafeWrapped<Fn, true, never>;\n  <Fn extends AnyFn, S extends Supports<Fn>>(\n    method: string,\n    fn: Fn,\n    isSupported: IsSupported,\n    supports: S,\n  ): SafeWrapped<Fn, true, S>;\n}\n\ninterface Options {\n  isMounted?: () => boolean;\n  isSupported?: IsSupported;\n}\n\nexport function createWrapSafe(component?: string): SafeWrapFn<false>;\n\nexport function createWrapSafe<O extends Options>(\n  component: string,\n  options: O,\n): SafeWrapFn<O extends { isSupported: any } ? true : false>;\n\nexport function createWrapSafe(\n  component?: string,\n  options?: Options,\n): SafeWrapFn<boolean> {\n  options ||= {};\n  return ((method, fn, overrideIsSupported, supports) => wrapSafe(method, fn, {\n    ...options,\n    isSupported: overrideIsSupported || options.isSupported,\n    supports,\n    component,\n  })) as SafeWrapFn<boolean>;\n}\n","import type { IsSupported } from '@/scopes/toolkit/wrapSafe.js';\nimport { createWrapSafe, type SafeWrapFn } from '@/scopes/toolkit/createWrapSafe.js';\n\nexport function createWrapComplete(\n  component: string,\n  isMounted: () => boolean,\n  isSupported: IsSupported,\n): SafeWrapFn<true> {\n  return createWrapSafe(component, { isSupported, isMounted });\n}\n","import {\n  createWrapSafe,\n  type SafeWrapFn,\n} from '@/scopes/toolkit/createWrapSafe.js';\nimport type { IsSupported } from '@/scopes/toolkit/wrapSafe.js';\n\nexport function createWrapSupported(\n  component: string,\n  isSupported: IsSupported,\n): SafeWrapFn<true> {\n  return createWrapSafe(component, { isSupported });\n}","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\ntype StorageValue = boolean;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_back_button';\nconst CLICK_EVENT_NAME = 'back_button_pressed';\nconst COMPONENT_NAME = 'backButton';\n\n/**\n * Signal indicating if the Back Button is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * Signal indicating if the Back Button is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal indicating if the Back Button is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\n\n/**\n * Hides the Back Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.1\n * @example\n * if (hide.isAvailable()) {\n *   hide();\n * }\n */\nexport const hide = wrapComplete('hide', (): void => {\n  setVisibility(false);\n});\n\n/**\n * Mounts the Back Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.1\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    setVisibility(isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false);\n    isMounted.set(true);\n  }\n});\n\nfunction setVisibility(value: boolean): void {\n  if (value !== isVisible()) {\n    postEvent(SETUP_METHOD_NAME, { is_visible: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isVisible.set(value);\n  }\n}\n\n/**\n * Adds a new Back Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.1\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Back Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapSupported(\n  'onClick',\n  (fn: EventListener<'back_button_pressed'>): VoidFunction => on(CLICK_EVENT_NAME, fn),\n);\n\n/**\n * Removes the Back Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.1\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Back Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapSupported(\n  'offClick',\n  (fn: EventListener<'back_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Shows the Back Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.1\n * @example\n * if (show.isAvailable()) {\n *   show();\n * }\n */\nexport const show = wrapComplete('show', (): void => {\n  setVisibility(true);\n});\n\n/**\n * Unmounts the Back Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n","import { batch, type Signal } from '@telegram-apps/signals';\nimport {\n  type AsyncOptions,\n  CancelablePromise,\n  TypedError,\n} from '@telegram-apps/bridge';\n\nimport { ERR_ALREADY_MOUNTING } from '@/errors.js';\n\n/**\n * Creates a mount function for a component.\n * @param component - the component name.\n * @param mount - function mounting the component.\n * @param onMounted - callback which will be called with the mount result.\n * @param mountPromise - signal containing mount promise.\n * @param isMounted - signal containing mount state.\n * @param mountError - signal containing mount error.\n */\n// #__NO_SIDE_EFFECTS__\nexport function createMountFn<T = void>(\n  component: string,\n  mount: (options: AsyncOptions) => (T | CancelablePromise<T>),\n  onMounted: (result: T) => void,\n  {\n    isMounting,\n    isMounted,\n    mountError,\n  }: {\n    isMounted: Signal<boolean>,\n    isMounting: Signal<boolean>,\n    mountError: Signal<Error | undefined>,\n  },\n): (options?: AsyncOptions) => CancelablePromise<void> {\n  return mountOptions => {\n    return CancelablePromise.withFn(async abortSignal => {\n      if (isMounted()) {\n        return;\n      }\n      if (isMounting()) {\n        throw new TypedError(\n          ERR_ALREADY_MOUNTING,\n          `The ${component} component is already mounting`,\n        );\n      }\n      isMounting.set(true);\n\n      let result: [completed: true, result: T] | [completed: false, err: Error];\n      try {\n        result = [true, await mount({ abortSignal })];\n      } catch (e) {\n        result = [false, e as Error];\n      }\n      batch(() => {\n        isMounting.set(false);\n        isMounted.set(true);\n\n        if (result[0]) {\n          onMounted(result[1]);\n        } else {\n          const error = result[1];\n          mountError.set(error);\n          throw error;\n        }\n      });\n    }, mountOptions);\n  };\n}","import { createWrapSafe } from '@/scopes/toolkit/createWrapSafe.js';\n\nexport const createWrapBasic = createWrapSafe;","import { computed, signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/**\n * Complete biometry manager state.\n */\nexport const state = signal<State | undefined>();\n\n/**\n * True if the manager is currently authenticating.\n */\nexport const isAuthenticating = signal<boolean>(false);\n\n/**\n * True if the manager is currently requesting access.\n */\nexport const isRequestingAccess = signal<boolean>(false);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n\n/**\n * Signal indicating biometry is available.\n */\nexport const isAvailable = computed(() => {\n  const s = state();\n  return s && s.available;\n});\n","import type { EventPayload } from '@telegram-apps/bridge';\n\nimport type { State } from './types.js';\n\n/**\n * Converts `biometry_info_received` to some common shape.\n * @param event - event payload.\n * @see biometry_info_received\n */\nexport function eventToState(event: EventPayload<'biometry_info_received'>): State {\n  return event.available ? {\n    available: true,\n    tokenSaved: event.token_saved,\n    deviceId: event.device_id,\n    accessRequested: event.access_requested,\n    type: event.type,\n    accessGranted: event.access_granted,\n  } : {\n    available: false,\n  };\n}\n","import type { ExecuteWithOptions, CancelablePromise } from '@telegram-apps/bridge';\n\nimport { request } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nimport { eventToState } from './eventToState.js';\nimport type { State } from './types.js';\n\nconst GET_INFO_METHOD = 'web_app_biometry_get_info';\n\n/**\n * Requests biometry information.\n * @since Mini Apps v7.2\n * @param options - additional execution options.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestBiometry.isAvailable()) {\n *   const biometryState = await requestBiometry();\n * }\n */\nexport const requestBiometry = wrapSafe(\n  'requestBiometry',\n  (options?: ExecuteWithOptions): CancelablePromise<State> => {\n    return request(GET_INFO_METHOD, 'biometry_info_received', options).then(eventToState);\n  },\n  {\n    isSupported: GET_INFO_METHOD,\n  },\n);\n","import {\n  on,\n  off,\n  TypedError,\n  CancelablePromise,\n  getStorageValue,\n  setStorageValue,\n  type BiometryTokenUpdateStatus,\n  type BiometryAuthRequestStatus,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent, request } from '@/scopes/globals.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { ERR_ALREADY_REQUESTING, ERR_NOT_AVAILABLE } from '@/errors.js';\n\nimport {\n  state,\n  mountError,\n  isMounted,\n  isRequestingAccess,\n  isAuthenticating,\n  isMounting,\n} from './signals.js';\nimport { requestBiometry } from './requestBiometry.js';\nimport { eventToState } from './eventToState.js';\nimport type {\n  State,\n  AuthenticateOptions,\n  RequestAccessOptions,\n  UpdateTokenOptions,\n} from './types.js';\n\ntype StorageValue = State;\n\nconst REQUEST_AUTH_METHOD = 'web_app_biometry_request_auth';\nconst REQUEST_ACCESS_METHOD = 'web_app_biometry_request_access';\nconst OPEN_SETTINGS_METHOD = 'web_app_biometry_open_settings';\nconst UPDATE_TOKEN_METHOD = 'web_app_biometry_update_token';\nconst INFO_RECEIVED_EVENT = 'biometry_info_received';\nconst COMPONENT_NAME = 'biometry';\n\n/**\n * @returns True if the biometry manager is supported.\n */\nexport const isSupported = createIsSupported(REQUEST_AUTH_METHOD);\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, REQUEST_AUTH_METHOD);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, REQUEST_AUTH_METHOD);\n\nfunction throwNotAvailable(): never {\n  throw new TypedError(ERR_NOT_AVAILABLE, 'Biometry is not available');\n}\n\n/**\n * Attempts to authenticate a user using biometrics and fetch a previously stored secure token.\n * @param options - method options.\n * @since Mini Apps v7.2\n * @returns Token from the local secure storage saved previously or undefined.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_NOT_AVAILABLE\n * @example\n * if (authenticate.isAvailable()) {\n *   const { status, token } = await authenticate({\n *     reason: 'Authenticate to open wallet',\n *   });\n * }\n */\nexport const authenticate = wrapComplete(\n  'authenticate',\n  (options?: AuthenticateOptions): CancelablePromise<{\n    /**\n     * Authentication status.\n     */\n    status: BiometryAuthRequestStatus;\n    /**\n     * Token from the local secure storage saved previously.\n     */\n    token?: string;\n  }> => {\n    return CancelablePromise.withFn(async abortSignal => {\n      if (isAuthenticating()) {\n        throw new TypedError(ERR_ALREADY_REQUESTING, 'Authentication is already in progress');\n      }\n\n      const s = state();\n      if (!s || !s.available) {\n        throwNotAvailable();\n      }\n\n      isAuthenticating.set(true);\n\n      try {\n        const response = await request(\n          REQUEST_AUTH_METHOD,\n          'biometry_auth_requested',\n          {\n            abortSignal,\n            params: {\n              reason: ((options || {}).reason || '').trim(),\n            },\n          },\n        );\n\n        const { token } = response;\n        if (typeof token === 'string') {\n          setState({ ...s, token });\n        }\n        return response;\n      } finally {\n        isAuthenticating.set(false);\n      }\n    }, options);\n  },\n);\n\n/**\n * Opens the biometric access settings for bots. Useful when you need to request biometrics\n * access to users who haven't granted it yet.\n *\n * _Note that this method can be called only in response to user interaction with the Mini App\n * interface (e.g. a click inside the Mini App or on the main button)_.\n * @since Mini Apps v7.2\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (openSettings.isAvailable()) {\n *   openSettings();\n * }\n */\nexport const openSettings = wrapSupported('openSettings', (): void => {\n  postEvent(OPEN_SETTINGS_METHOD);\n});\n\n/**\n * Requests permission to use biometrics.\n * @since Mini Apps v7.2\n * @returns Promise with true, if access was granted.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_NOT_AVAILABLE\n * @example\n * if (requestAccess.isAvailable()) {\n *   const accessGranted = await requestAccess({\n *     reason: 'Authenticate to open wallet',\n *   });\n * }\n */\nexport const requestAccess = wrapComplete(\n  'requestAccess',\n  (options?: RequestAccessOptions): CancelablePromise<boolean> => {\n    return CancelablePromise.withFn(async abortSignal => {\n      if (isRequestingAccess()) {\n        throw new TypedError(ERR_ALREADY_REQUESTING, 'Access request is already in progress');\n      }\n      isRequestingAccess.set(true);\n\n      try {\n        const info = await request(REQUEST_ACCESS_METHOD, INFO_RECEIVED_EVENT, {\n          abortSignal,\n          params: { reason: (options || {}).reason || '' },\n        }).then(eventToState);\n\n        if (!info.available) {\n          throwNotAvailable();\n        }\n        setState(info);\n\n        return info.accessGranted;\n      } finally {\n        isRequestingAccess.set(false);\n      }\n    }, options);\n  },\n);\n\n/**\n * Mounts the Biometry component.\n * @since Mini Apps v7.2\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   await mount();\n * }\n */\nexport const mount = wrapBasic(\n  'mount',\n  createMountFn<State>(\n    COMPONENT_NAME,\n    (options) => {\n      const s = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n      return s ? s : requestBiometry(options);\n    },\n    result => {\n      on(INFO_RECEIVED_EVENT, onBiometryInfoReceived);\n      setState(result);\n    },\n    { isMounted, mountError, isMounting },\n  ),\n);\n\nconst onBiometryInfoReceived: EventListener<'biometry_info_received'> = e => {\n  setState(eventToState(e));\n};\n\nfunction setState(s: State): void {\n  state.set(s);\n  setStorageValue<StorageValue>(COMPONENT_NAME, s);\n}\n\n/**\n * Unmounts the component.\n */\nexport function unmount() {\n  off(INFO_RECEIVED_EVENT, onBiometryInfoReceived);\n  isMounted.set(false);\n}\n\n/**\n * Updates the biometric token in a secure storage on the device.\n * @since Mini Apps v7.2\n * @returns Promise with `true`, if token was updated.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example Setting a new token\n * if (updateToken.isAvailable()) {\n *   updateToken({\n *     token: 'abcdef',\n *   })\n * }\n * @example Deleting the token\n * if (updateToken.isAvailable()) {\n *   updateToken();\n * }\n */\nexport const updateToken = wrapComplete(\n  'updateToken',\n  (options?: UpdateTokenOptions): CancelablePromise<BiometryTokenUpdateStatus> => {\n    options ||= {};\n    return request(UPDATE_TOKEN_METHOD, 'biometry_token_updated', {\n      ...options,\n      params: {\n        token: options.token || '',\n        reason: options.reason,\n      },\n    }).then(r => r.status);\n  },\n);\n","import { createWrapSafe, type SafeWrapFn } from '@/scopes/toolkit/createWrapSafe.js';\n\nexport function createWrapMounted(\n  component: string,\n  isMounted: () => boolean,\n): SafeWrapFn<false> {\n  return createWrapSafe(component, { isMounted });\n}","import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\n\ntype StorageValue = boolean;\n\nconst COMPONENT_NAME = 'closingBehavior';\n\n/**\n * Signal indicating if the confirmation dialog should be shown, while the user\n * is trying to close the Mini App.\n */\nexport const isConfirmationEnabled = signal(false);\n\n/**\n * Signal indicating if the Closing Behavior component is currently mounted.\n */\nexport const isMounted = signal(false);\n\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\n\n/**\n * Disables the closing confirmation dialog.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (disableConfirmation.isAvailable()) {\n *   disableConfirmation();\n * }\n */\nexport const disableConfirmation = wrapMounted('disableConfirmation', (): void => {\n  setClosingConfirmation(false);\n});\n\n/**\n * Enables the closing confirmation dialog.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (enableConfirmation.isAvailable()) {\n *   enableConfirmation();\n * }\n */\nexport const enableConfirmation = wrapMounted('enableConfirmation', (): void => {\n  setClosingConfirmation(true);\n});\n\n/**\n * Mounts the Closing Behavior component restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapBasic('mount', (): void => {\n  if (!isMounted()) {\n    setClosingConfirmation(\n      isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false,\n    );\n    isMounted.set(true);\n  }\n});\n\nfunction setClosingConfirmation(value: boolean): void {\n  if (value !== isConfirmationEnabled()) {\n    postEvent('web_app_setup_closing_behavior', { need_confirmation: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isConfirmationEnabled.set(value);\n  }\n}\n\n/**\n * Unmounts the Closing Behavior component.\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n","import {\n  CancelablePromise,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { array, object, string } from '@telegram-apps/transformers';\n\nimport { invokeCustomMethod } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nconst INVOKE_METHOD_NAME = 'web_app_invoke_custom_method';\nconst wrapSupported = createWrapSupported('cloudStorage', INVOKE_METHOD_NAME);\n\n/**\n * Signal indicating if the Cloud Storage is supported.\n */\nexport const isSupported = createIsSupported(INVOKE_METHOD_NAME);\n\n/**\n * Deletes specified key or keys from the cloud storage.\n * @param keyOrKeys - key or keys to delete.\n * @param options - request execution options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example Deleting a single key\n * if (deleteItem.isAvailable()) {\n *   await deleteItem('my-key');\n * }\n * @example Deleting multiple keys\n * if (deleteItem.isAvailable()) {\n *   await deleteItem(['key1', 'key2']);\n * }\n */\nexport const deleteItem = wrapSupported('deleteItem', (\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<void> => {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n  return keys.length\n    ? invokeCustomMethod('deleteStorageValues', { keys }, options).then()\n    : CancelablePromise.resolve();\n});\n\n/**\n * Gets multiple keys' values from the cloud storage.\n * @param keys - keys list.\n * @param options - request execution options.\n * @returns Map, where a key is one of the specified in the `keys` argument,\n * and a value is a corresponding storage value.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (deleteItem.isAvailable()) {\n *   const { key1, key2 } = await getItem(['key1', 'key2']);\n * }\n */\nfunction _getItem<K extends string>(\n  keys: K[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<Record<K, string>>;\n\n/**\n * Gets a single key value from the cloud storage.\n * @param key - cloud storage key.\n * @param options - request execution options.\n * @return Value of the specified key. If the key was not created previously,\n * the function will return an empty string.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (getItem.isAvailable()) {\n *   const keyValue = await getItem('my-key');\n * }\n */\nfunction _getItem(key: string, options?: ExecuteWithOptions): CancelablePromise<string>;\n\nfunction _getItem(\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<string | Record<string, string>> {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n\n  return keys.length\n    ? invokeCustomMethod('getStorageValues', { keys }, options).then(data => {\n      const result = object(\n        Object.fromEntries(keys.map((k) => [k, string()])),\n      )()(data);\n\n      return Array.isArray(keyOrKeys) ? result : result[keyOrKeys];\n    })\n    : CancelablePromise.resolve(typeof keyOrKeys === 'string' ? '' : {});\n}\n\nexport const getItem = wrapSupported('getItem', _getItem);\n\n/**\n * Returns a list of all keys presented in the cloud storage.\n * @param options - request execution options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (getKeys.isAvailable()) {\n *   const keysArray = await getKeys();\n * }\n */\nexport const getKeys = wrapSupported('getKeys', (\n  options?: ExecuteWithOptions,\n): CancelablePromise<string[]> => {\n  return invokeCustomMethod('getStorageKeys', {}, options)\n    .then(array(string())());\n});\n\n/**\n * Saves the specified value by a key.\n * @param key - storage key.\n * @param value - storage value.\n * @param options - request execution options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (setItem.isAvailable()) {\n *   await setItem('key', 'value');\n * }\n */\nexport const setItem = wrapSupported('setItem', (\n  key: string,\n  value: string,\n  options?: ExecuteWithOptions,\n): CancelablePromise<void> => {\n  return invokeCustomMethod('saveStorageValue', {\n    key,\n    value,\n  }, options).then();\n});\n","import type {\n  ImpactHapticFeedbackStyle,\n  NotificationHapticFeedbackType,\n} from '@telegram-apps/bridge';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nconst HAPTIC_METHOD_NAME = 'web_app_trigger_haptic_feedback';\nconst wrapSupported = createWrapSupported('hapticFeedback', HAPTIC_METHOD_NAME);\n\n/**\n * Signal indicating if the Haptic Feedback is supported.\n */\nexport const isSupported = createIsSupported(HAPTIC_METHOD_NAME);\n\n/**\n * A method that tells if an impact occurred. The Telegram app may play the\n * appropriate haptics based on style value passed.\n * @param style - impact style.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (impactOccurred.isAvailable()) {\n *   impactOccurred('medium');\n * }\n */\nexport const impactOccurred = wrapSupported(\n  'impactOccurred',\n  (style: ImpactHapticFeedbackStyle): void => {\n    postEvent(HAPTIC_METHOD_NAME, {\n      type: 'impact',\n      impact_style: style,\n    });\n  },\n);\n\n/**\n * A method tells that a task or action has succeeded, failed, or produced\n * a warning. The Telegram app may play the appropriate haptics based on type\n * value passed.\n * @param type - notification type.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (notificationOccurred.isAvailable()) {\n *   notificationOccurred('success');\n * }\n */\nexport const notificationOccurred = wrapSupported(\n  'notificationOccurred',\n  (type: NotificationHapticFeedbackType): void => {\n    postEvent(HAPTIC_METHOD_NAME, {\n      type: 'notification',\n      notification_type: type,\n    });\n  },\n);\n\n/**\n * A method tells that the user has changed a selection. The Telegram app may\n * play the appropriate haptics.\n *\n * Do not use this feedback when the user makes or confirms a selection; use\n * it only when the selection changes.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (selectionChanged.isAvailable()) {\n *   selectionChanged();\n * }\n */\nexport const selectionChanged = wrapSupported(\n  'selectionChanged',\n  (): void => {\n    postEvent(HAPTIC_METHOD_NAME, { type: 'selection_change' });\n  },\n);\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\nimport { type InitData, retrieveLaunchParams } from '@telegram-apps/bridge';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<InitData | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction fromState<K extends keyof InitData>(key: K): Computed<InitData[K] | undefined> {\n  return computed(() => {\n    const s = state();\n    return s ? s[key] : undefined;\n  });\n}\n\n/**\n * @see InitData.authDate\n */\nexport const authDate = fromState('authDate');\n\n/**\n * @see InitData.canSendAfter\n */\nexport const canSendAfter = fromState('canSendAfter');\n\n/**\n * Date after which it is allowed to call\n * the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.\n */\nexport const canSendAfterDate = computed(() => {\n  const authDateValue = authDate();\n  const canSendAfterValue = canSendAfter();\n\n  return canSendAfterValue && authDateValue\n    ? new Date(authDateValue.getTime() + canSendAfterValue * 1000)\n    : undefined\n});\n\n/**\n * @see InitData.chat\n */\nexport const chat = fromState('chat');\n\n/**\n * @see InitData.chatType\n */\nexport const chatType = fromState('chatType');\n\n/**\n * @see InitData.chatInstance\n */\nexport const chatInstance = fromState('chatInstance');\n\n/**\n * @see InitData.hash\n */\nexport const hash = fromState('hash');\n\n/**\n * @see InitData.queryId\n */\nexport const queryId = fromState('queryId');\n\n/**\n * Raw representation of init data.\n */\nexport const raw = signal<string | undefined>();\n\n/**\n * @see InitData.receiver\n */\nexport const receiver = fromState('receiver');\n\n/**\n * Restores the component state.\n */\nexport function restore(): void {\n  const lp = retrieveLaunchParams();\n  state.set(lp.initData);\n  raw.set(lp.initDataRaw);\n}\n\n/**\n * @see InitData.startParam\n */\nexport const startParam = fromState('startParam');\n\n/**\n * @see InitData.user\n */\nexport const user = fromState('user');","import { initData } from '@telegram-apps/transformers';\nimport type { InitData } from '@telegram-apps/bridge';\n\n/**\n * Parses an incoming value as init data.\n * @param value - value to check.\n * @throws {} Parsing errors.\n */\nexport function parseInitData(value: unknown): InitData {\n  return initData()(value);\n}","import {\n  TypedError,\n  type InvoiceStatus,\n  type ExecuteWithPostEvent,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\nimport {\n  ERR_INVALID_URL,\n  ERR_INVALID_SLUG,\n  ERR_ALREADY_OPENED,\n} from '@/errors.js';\n\nconst OPEN_METHOD = 'web_app_open_invoice';\nconst wrapSupported = createWrapSupported('invoice', OPEN_METHOD);\n\n/**\n * Signal indicating if an invoice is opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * Signal indicating if invoices are supported.\n */\nexport const isSupported = createIsSupported(OPEN_METHOD);\n\n/**\n * Opens an invoice using its slug.\n * @param slug - invoice slug.\n * @param options - additional options.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @example\n * if (open.isAvailable()) {\n *   const status = await open('kJNFS331');\n * }\n */\nexport function _open(\n  slug: string,\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus>;\n\n/**\n * Opens an invoice using its url.\n * @param url - invoice URL.\n * @param type - value type.\n * @param options - additional options.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @throws {TypedError} ERR_INVALID_URL\n * @throws {TypedError} ERR_INVALID_SLUG\n * @example\n * if (open.isAvailable()) {\n *   const status = await open('https://t.me/$kJNFS331', 'url');\n * }\n * @example\n * if (open.isAvailable()) {\n *   const status = await open('https://t.me/invoice/kJNFS331', 'url');\n * }\n */\nexport function _open(\n  url: string,\n  type: 'url',\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus>;\n\nexport async function _open(\n  urlOrSlug: string,\n  optionsOrType?: 'url' | ExecuteWithPostEvent,\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus> {\n  if (isOpened()) {\n    throw new TypedError(ERR_ALREADY_OPENED, 'An invoice is already opened');\n  }\n\n  let slug: string;\n\n  if (optionsOrType === 'url') {\n    const { hostname, pathname } = new URL(urlOrSlug, window.location.href);\n    if (hostname !== 't.me') {\n      throw new TypedError(ERR_INVALID_URL, `Link has unexpected hostname: ${hostname}`);\n    }\n\n    // Valid examples:\n    // \"/invoice/my-slug\"\n    // \"/$my-slug\"\n    const match = pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n    if (!match) {\n      throw new TypedError(\n        ERR_INVALID_SLUG,\n        `Expected to receive a link with a pathname in format \"/invoice/{slug}\" or \"/\\${slug}\"`,\n      );\n    }\n    [, , slug] = match;\n  } else {\n    // todo: validate slug?\n    slug = urlOrSlug;\n    options = optionsOrType;\n  }\n\n  isOpened.set(true);\n\n  return request(OPEN_METHOD, 'invoice_closed', {\n    ...options,\n    params: { slug },\n    capture: (data) => slug === data.slug,\n  })\n    .then(r => r.status)\n    .finally(() => {\n      isOpened.set(false);\n    });\n}\n\nexport const open = wrapSupported('open', _open);\n","import { toRGB } from '@telegram-apps/transformers';\n\n/**\n * @param color - color in any format acceptable by the `toRGB` function.\n * @returns True if the color is recognized as dark.\n * @see toRGB\n */\nexport function isColorDark(color: string): boolean {\n  const rgb = toRGB(color);\n\n  // Real formula: hsp = Math.sqrt(0.299 * r * r + 0.587 * g * g + 0.114 * b * b)\n  // See: https://stackoverflow.com/a/596243\n  return Math.sqrt(\n    [0.299, 0.587, 0.114].reduce<number>((acc, modifier, idx) => {\n      // Extract part of #RRGGBB pattern and convert it to DEC.\n      const dec = parseInt(rgb.slice(1 + idx * 2, 1 + (idx + 1) * 2), 16);\n      return acc + dec * dec * modifier;\n    }, 0),\n  ) < 120;\n}\n","import type { ThemeParams } from '@telegram-apps/bridge';\nimport { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * Complete component state.\n */\nexport const state = signal<ThemeParams>({});\n\nfunction fromState<K extends keyof ThemeParams>(key: K): Computed<ThemeParams[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * @since v6.10\n */\nexport const accentTextColor = fromState('accentTextColor');\n\nexport const backgroundColor = fromState('bgColor');\n\nexport const buttonColor = fromState('buttonColor');\n\nexport const buttonTextColor = fromState('buttonTextColor');\n\n/**\n * @since v7.10\n */\nexport const bottomBarBgColor = fromState('bottomBarBgColor');\n\nexport const destructiveTextColor = fromState('destructiveTextColor');\n\n/**\n * @since v6.10\n */\nexport const headerBackgroundColor = fromState('headerBgColor');\n\nexport const hintColor = fromState('hintColor');\n\n/**\n * @returns True if the current color scheme is recognized as dark.\n * This value is calculated based on the current theme's background color.\n */\nexport const isDark = computed(() => {\n  const { bgColor } = state();\n  return !bgColor || isColorDark(bgColor);\n});\n\nexport const linkColor = fromState('linkColor');\n\nexport const secondaryBackgroundColor = fromState('secondaryBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionBackgroundColor = fromState('sectionBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionHeaderTextColor = fromState('sectionHeaderTextColor');\n\n/**\n * @since v7.6\n */\nexport const sectionSeparatorColor = fromState('sectionSeparatorColor');\n\n/**\n * @since v6.10\n */\nexport const subtitleTextColor = fromState('subtitleTextColor');\n\nexport const textColor = fromState('textColor');\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport {\n  buttonColor,\n  buttonTextColor,\n} from '@/scopes/components/theme-params/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(\n  key: K,\n): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  text: 'Continue',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || buttonColor() || '#2481cc',\n    textColor: s.textColor || buttonTextColor() || '#ffffff',\n  };\n});\n\n/**\n * Signal indicating if the Main Button is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal containing the current Main Button background color.\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * Signal indicating if the Main Button has a shining effect.\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * Signal indicating if the Main Button is currently active and can be clicked.\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * Signal indicating if the Main Button displays a loader inside it.\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * Signal indicating if the Main Button is currently visible.\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * Signal containing the Main Button text.\n */\nexport const text = fromState('text');\n\n/**\n * Signal containing the current Main Button text color.\n */\nexport const textColor = fromState('textColor');\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_main_button';\nconst CLICK_EVENT_NAME = 'main_button_pressed';\nconst COMPONENT_NAME = 'mainButton';\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\n\n/**\n * Mounts the Main Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapBasic('mount', (): void => {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n    prev && internalState.set(prev);\n    isMounted.set(true);\n  }\n});\n\n/**\n * Adds a new Main Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Main Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapBasic(\n  'onClick',\n  (fn: EventListener<'main_button_pressed'>): VoidFunction => {\n    return on(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Removes the Main Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Main Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapBasic(\n  'offClick',\n  (fn: EventListener<'main_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Updates the Main Button state.\n * @param updates - state changes to perform.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (setParams.isAvailable()) {\n *   setParams({\n *     text: 'Submit',\n *     isEnabled: true,\n *     hasShineEffect: true,\n *   });\n * }\n */\nexport const setParams = wrapMounted(\n  'setParams',\n  (updates: Partial<State>): void => {\n    internalState.set({\n      ...internalState(),\n      ...Object.fromEntries(\n        Object.entries(updates).filter(([, v]) => v !== undefined),\n      ),\n    });\n    setStorageValue<StorageValue>(COMPONENT_NAME, internalState());\n\n    // We should not commit changes until the payload is correct.\n    // Some version of Telegram will crash due to the empty value of the text.\n    const s = state();\n    s.text && postEvent(SETUP_METHOD_NAME, {\n      color: s.backgroundColor,\n      has_shine_effect: s.hasShineEffect,\n      is_active: s.isEnabled,\n      is_progress_visible: s.isLoaderVisible,\n      is_visible: s.isVisible,\n      text: s.text,\n      text_color: s.textColor,\n    });\n  },\n);\n\n/**\n * Unmounts the Main Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n","import { TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_CSS_VARS_ALREADY_BOUND } from '@/errors.js';\n\n/**\n * @throws {TypedError} ERR_CSS_VARS_ALREADY_BOUND\n */\nexport function throwCssVarsBound(): never {\n  throw new TypedError(\n    ERR_CSS_VARS_ALREADY_BOUND,\n    'CSS variables are already bound',\n  );\n}","import { themeParams } from '@telegram-apps/transformers';\nimport type { ThemeParams } from '@telegram-apps/bridge';\n\n/**\n * Parses incoming value as theme parameters.\n * @param value - value to parse.\n */\nexport function parseThemeParams(value: unknown): ThemeParams {\n  return themeParams()(value);\n}\n","import {\n  off,\n  on,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  retrieveLaunchParams,\n  deleteCssVar,\n  setCssVar,\n  type EventListener,\n  type RGB,\n  type ThemeParams,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { throwCssVarsBound } from '@/scopes/toolkit/throwCssVarsBound.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\n\nimport { isCssVarsBound, state, isMounted } from './signals.js';\nimport { parseThemeParams } from './parseThemeParams.js';\nimport type { GetCssVarNameFn } from './types.js';\n\ntype StorageValue = ThemeParams;\n\nconst COMPONENT_NAME = 'themeParams';\nconst THEME_CHANGED_EVENT = 'theme_changed';\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\n\n/**\n * Creates CSS variables connected with the current theme parameters.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-theme-bg-color`\n * - `--tg-theme-secondary-text-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * theme parameters key.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_CSS_VARS_ALREADY_BOUND\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example Using no arguments\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars();\n * }\n * @example Using custom CSS vars generator\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars(key => `--my-prefix-${key}`);\n * }\n */\nexport const bindCssVars = wrapMounted(\n  'bindCssVars',\n  (getCSSVarName?: GetCssVarNameFn): VoidFunction => {\n    isCssVarsBound() && throwCssVarsBound();\n\n    getCSSVarName ||= (prop) => `--tg-theme-${camelToKebab(prop)}`;\n\n    function forEachEntry(fn: (key: string, value: RGB) => void): void {\n      Object.entries(state()).forEach(([k, v]) => {\n        v && fn(k, v);\n      });\n    }\n\n    function actualize(): void {\n      forEachEntry((k, v) => {\n        setCssVar(getCSSVarName!(k), v);\n      });\n    }\n\n    actualize();\n    state.sub(actualize);\n    isCssVarsBound.set(true);\n\n    return () => {\n      forEachEntry(deleteCssVar);\n      state.unsub(actualize);\n      isCssVarsBound.set(false);\n    };\n  },\n);\n\n/**\n * Mounts the Theme Params component restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapBasic('mount', (): void => {\n  if (!isMounted()) {\n    on(THEME_CHANGED_EVENT, onThemeChanged);\n    state.set(\n      isPageReload()\n      && getStorageValue<StorageValue>(COMPONENT_NAME)\n      || retrieveLaunchParams().themeParams,\n    );\n    isMounted.set(true);\n  }\n});\n\nconst onThemeChanged: EventListener<'theme_changed'> = (e) => {\n  const value = parseThemeParams(e.theme_params);\n  state.set(value);\n  setStorageValue<StorageValue>(COMPONENT_NAME, value);\n};\n\n/**\n * Unmounts the Theme Params component.\n */\nexport function unmount(): void {\n  off(THEME_CHANGED_EVENT, onThemeChanged);\n  isMounted.set(false);\n}\n","import { Computed, computed, signal } from '@telegram-apps/signals';\nimport { isRGB } from '@telegram-apps/transformers';\nimport type { BackgroundColor, BottomBarColor, RGB } from '@telegram-apps/bridge';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\nimport {\n  backgroundColor as themeBgColor,\n  secondaryBackgroundColor as themeSecondaryBgColor,\n  bottomBarBgColor as themeBottomBarBgColor,\n} from '@/scopes/components/theme-params/signals.js';\n\nimport type { HeaderColor, State } from './types.js';\n\n// #__NO_SIDE_EFFECTS__\nfunction rgbBasedOn(signal: Computed<'bg_color' | 'secondary_bg_color' | RGB>) {\n  return computed<RGB | undefined>(() => {\n    const color = signal();\n\n    return isRGB(color) ? color : color === 'bg_color'\n      ? themeBgColor()\n      : themeSecondaryBgColor();\n  });\n}\n\n/**\n * The Mini App background color.\n */\nexport const backgroundColor = signal<BackgroundColor>('bg_color');\n\n/**\n * RGB representation of the background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const backgroundColorRGB = rgbBasedOn(backgroundColor);\n\n\n/**\n * The Mini App bottom bar background color.\n */\nexport const bottomBarColor = signal<BottomBarColor>('bottom_bar_bg_color');\n\n/**\n * RGB representation of the bottom bar background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const bottomBarColorRGB = computed<RGB | undefined>(() => {\n  const color = bottomBarColor();\n  return isRGB(color)\n    ? color\n    : color === 'bottom_bar_bg_color'\n      // Following the logic from the Telegram SDK.\n      // I removed \"|| '#ffffff'\" because this seems too strange to me. This is just not right.\n      ? themeBottomBarBgColor() || themeSecondaryBgColor()\n      : color === 'secondary_bg_color'\n        ? themeSecondaryBgColor()\n        : themeBgColor();\n});\n\n/**\n * The Mini App header color.\n */\nexport const headerColor = signal<HeaderColor>('bg_color');\n\n/**\n * RGB representation of the header color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const headerColorRGB = rgbBasedOn(headerColor);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the current Mini App background color is recognized as dark.\n */\nexport const isDark = computed(() => {\n  const color = backgroundColorRGB();\n  return color ? isColorDark(color) : false;\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<State>(() => ({\n  backgroundColor: backgroundColor(),\n  bottomBarColor: bottomBarColor(),\n  headerColor: headerColor(),\n}));\n","import {\n  getStorageValue,\n  setStorageValue,\n  createCbCollector,\n  camelToKebab,\n  deleteCssVar,\n  setCssVar,\n  supports,\n  type RGB,\n  type BottomBarColor,\n  type BackgroundColor, MethodName,\n} from '@telegram-apps/bridge';\nimport { isRGB } from '@telegram-apps/transformers';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport { computed, type Computed } from '@telegram-apps/signals';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { mount as tpMount } from '@/scopes/components/theme-params/methods.js';\nimport { throwCssVarsBound } from '@/scopes/toolkit/throwCssVarsBound.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\n\nimport {\n  headerColor,\n  backgroundColor,\n  isCssVarsBound,\n  state,\n  isMounted,\n  bottomBarColor,\n  headerColorRGB,\n  bottomBarColorRGB,\n  backgroundColorRGB,\n} from './signals.js';\nimport type { GetCssVarNameFn, HeaderColor, State } from './types.js';\n\ntype StorageValue = State;\n\nconst SET_BG_COLOR_METHOD = 'web_app_set_background_color';\nconst SET_BOTTOM_BAR_COLOR_METHOD = 'web_app_set_bottom_bar_color';\nconst SET_HEADER_COLOR_METHOD = 'web_app_set_header_color';\nconst COMPONENT_NAME = 'miniApp';\n\nconst isSupportedSchema = {\n  any: [\n    SET_BG_COLOR_METHOD,\n    SET_BOTTOM_BAR_COLOR_METHOD,\n    SET_HEADER_COLOR_METHOD,\n  ] as MethodName[],\n};\n\n/**\n * True if the Mini App component is supported.\n */\nexport const isSupported = computed(() => {\n  return isSupportedSchema.any.some(method => supports(method, $version()));\n});\n\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, isSupportedSchema);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, isSupportedSchema);\n\n/**\n * Creates CSS variables connected with the mini app.\n *\n * Default variables:\n * - `--tg-bg-color`\n * - `--tg-header-color`\n * - `--tg-bottom-bar-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * mini app key.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_VARS_ALREADY_BOUND\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example Using no arguments\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars();\n * }\n * @example Using custom CSS vars generator\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars(key => `--my-prefix-${key}`);\n * }\n */\nexport const bindCssVars = wrapComplete(\n  'bindCssVars',\n  (getCSSVarName?: GetCssVarNameFn): VoidFunction => {\n    isCssVarsBound() && throwCssVarsBound();\n\n    const [addCleanup, cleanup] = createCbCollector();\n\n    /**\n     * Binds specified CSS variable to a signal.\n     * @param cssVar - CSS variable name.\n     * @param signal - signal to listen changes to.\n     */\n    function bind(cssVar: string, signal: Computed<RGB | undefined>) {\n      function update() {\n        setCssVar(cssVar, signal() || null);\n      }\n\n      // Instantly set CSS variable.\n      update();\n\n      // Remember to clean this relation up.\n      addCleanup(signal.sub(update), deleteCssVar.bind(null, cssVar));\n    }\n\n    getCSSVarName ||= (prop) => `--tg-${camelToKebab(prop)}`;\n    bind(getCSSVarName('bgColor'), backgroundColorRGB);\n    bind(getCSSVarName('bottomBarColor'), bottomBarColorRGB);\n    bind(getCSSVarName('headerColor'), headerColorRGB);\n    addCleanup(() => {\n      isCssVarsBound.set(false);\n    });\n\n    isCssVarsBound.set(true);\n\n    return cleanup;\n  },\n);\n\n/**\n * Closes the Mini App.\n * @param returnBack - should the client return to the previous activity.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (close.isAvailable()) {\n *   close();\n * }\n */\nexport const close = wrapBasic('close', (returnBack?: boolean): void => {\n  postEvent('web_app_close', { return_back: returnBack });\n});\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n *\n * Internally, the function mounts the Theme Params component to work with correctly extracted\n * theme palette values.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported(\n  'mount',\n  (): void => {\n    if (!isMounted()) {\n      const s = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n      tpMount();\n\n      setBackgroundColor.ifAvailable(s ? s.backgroundColor : 'bg_color');\n      setBottomBarColor.ifAvailable(s ? s.bottomBarColor : 'bottom_bar_bg_color');\n      setHeaderColor.ifAvailable(s ? s.headerColor : 'bg_color');\n\n      isMounted.set(true);\n    }\n  },\n);\n\n/**\n * Informs the Telegram app that the Mini App is ready to be displayed.\n *\n * It is recommended to call this method as early as possible, as soon as all\n * essential interface elements loaded.\n *\n * Once this method is called, the loading placeholder is hidden and the Mini\n * App shown.\n *\n * If the method is not called, the placeholder will be hidden only when the\n * page was fully loaded.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (ready.isAvailable()) {\n *   ready();\n * }\n */\nexport const ready = wrapBasic('ready', (): void => {\n  postEvent('web_app_ready');\n});\n\nfunction saveState() {\n  setStorageValue<StorageValue>(COMPONENT_NAME, state());\n}\n\n/**\n * Updates the background color.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (setBackgroundColor.isAvailable()) {\n *   setBackgroundColor('bg_color');\n * }\n */\nexport const setBackgroundColor = wrapComplete(\n  'setBackgroundColor',\n  (color: BackgroundColor): void => {\n    if (color !== backgroundColor()) {\n      postEvent(SET_BG_COLOR_METHOD, { color });\n      backgroundColor.set(color);\n      saveState();\n    }\n  },\n  SET_BG_COLOR_METHOD,\n);\n\n/**\n * Updates the bottom bar background color.\n * @since Mini Apps v7.10\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (setBottomBarColor.isAvailable()) {\n *   setBottomBarColor('ff11a3');\n * }\n */\nexport const setBottomBarColor = wrapComplete(\n  'setBottomBarColor',\n  (color: BottomBarColor) => {\n    if (color !== bottomBarColor()) {\n      postEvent(SET_BOTTOM_BAR_COLOR_METHOD, { color });\n      bottomBarColor.set(color);\n      saveState();\n    }\n  },\n  SET_BOTTOM_BAR_COLOR_METHOD,\n);\n\n/**\n * Updates the header color.\n * @since Mini Apps v6.1\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example Using known color key\n * if (setHeaderColor.isAvailable()) {\n *   setHeaderColor('bg_color');\n * }\n * @example Using RGB\n * if (setHeaderColor.isAvailable() && setHeaderColor.supports.rgb()) {\n *   setHeaderColor('#ffaabb');\n * }\n */\nexport const setHeaderColor = wrapComplete(\n  'setHeaderColor',\n  (color: HeaderColor): void => {\n    if (color !== headerColor()) {\n      postEvent(SET_HEADER_COLOR_METHOD, isRGB(color) ? { color } : { color_key: color });\n      headerColor.set(color);\n      saveState();\n    }\n  },\n  SET_HEADER_COLOR_METHOD,\n  {\n    rgb: [SET_HEADER_COLOR_METHOD, 'color', isRGB],\n  },\n);\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n","import { type PopupParams, TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_POPUP_INVALID_PARAMS } from '@/errors.js';\n\nimport type { OpenOptions } from './types.js';\n\n/**\n * Prepares popup parameters before sending them to native app.\n * @param params - popup parameters.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons count\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button text length\n */\nexport function prepareParams(params: OpenOptions): PopupParams {\n  const message = params.message.trim();\n  const title = (params.title || '').trim();\n  const buttons = params.buttons || [];\n\n  if (title.length > 64) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid title: ${title}`);\n  }\n  if (!message || message.length > 256) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid message: ${message}`);\n  }\n  if (buttons.length > 3) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid buttons count: ${buttons.length}`);\n  }\n\n  return {\n    title,\n    message,\n    buttons: buttons.length\n      ? buttons.map((b, idx) => {\n        const id = b.id || '';\n        if (id.length > 64) {\n          throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid id: ${id}`);\n        }\n\n        if (!b.type || b.type === 'default' || b.type === 'destructive') {\n          const text = b.text.trim();\n          if (!text || text.length > 64) {\n            throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid text: ${text}`);\n          }\n          return { type: b.type, text, id };\n        }\n        return { type: b.type, id };\n      })\n      : [{ type: 'close', id: '' }],\n  };\n}","import { TypedError } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { ERR_ALREADY_OPENED } from '@/errors.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nimport { prepareParams } from './prepareParams.js';\nimport type { OpenOptions } from './types.js';\n\nconst OPEN_METHOD = 'web_app_open_popup';\nconst wrapSupported = createWrapSupported('popup', OPEN_METHOD);\n\n/**\n * Signal indicating if a popup is opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * Signal indicating if popups are supported.\n */\nexport const isSupported = createIsSupported(OPEN_METHOD);\n\n/**\n * A method that shows a native popup described by the `params` argument.\n * The promise will be resolved when the popup is closed. Resolved value will have\n * an identifier of the pressed button.\n *\n * If a user clicked outside the popup or clicked the top right popup close\n * button, null will be resolved.\n *\n * @param options - popup parameters.\n * @since Mini Apps v6.2\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons count\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button text length\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (open.isAvailable()) {\n *   const buttonId = await open({\n *     title: 'Confirm action',\n *     message: 'Do you really want to buy this burger?',\n *     buttons: [\n *       { id: 'yes', text: 'Yes' },\n *       { id: 'no', type: 'destructive', text: 'No' },\n *     ],\n *   });\n * }\n */\nexport const open = wrapSupported(\n  'open',\n  async (options: OpenOptions): Promise<string | null> => {\n    if (isOpened()) {\n      throw new TypedError(ERR_ALREADY_OPENED, 'A popup is already opened');\n    }\n    isOpened.set(true);\n\n    try {\n      const { button_id: buttonId = null } = await request(OPEN_METHOD, 'popup_closed', {\n        ...options,\n        params: prepareParams(options),\n      });\n      return buttonId;\n    } finally {\n      isOpened.set(false);\n    }\n  },\n);","import {\n  CancelablePromise,\n  createCbCollector,\n  TypedError,\n  on,\n  EnhancedPromise,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { ERR_ALREADY_OPENED } from '@/errors.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\ninterface OpenSharedOptions extends ExecuteWithOptions {\n  /**\n   * Title to be displayed in the scanner.\n   */\n  text?: string;\n}\n\nconst CLOSE_METHOD = 'web_app_close_scan_qr_popup';\nconst OPEN_METHOD = 'web_app_open_scan_qr_popup';\nconst CLOSED_EVENT = 'scan_qr_popup_closed';\nconst TEXT_RECEIVED_EVENT = 'qr_text_received';\n\nconst wrapSupported = createWrapSupported('qrScanner', OPEN_METHOD);\n\n/**\n * Closes the scanner.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (close.isAvailable()) {\n *   close();\n * }\n */\nexport const close = wrapSupported('close', (): void => {\n  isOpened.set(false);\n  postEvent(CLOSE_METHOD);\n});\n\n/**\n * True if the scanner is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * Signal indicating if the QR Scanner is currently opened.\n */\nexport const isSupported = createIsSupported(OPEN_METHOD);\n\n/**\n * Opens the scanner and returns a promise which will be resolved with the QR\n * content if the passed `capture` function returned true.\n *\n * The `capture` option may be ommited. In this case, the first scanned QR\n * will be returned.\n *\n * Promise may also be resolved to undefined if the scanner was closed.\n * @param options - method options.\n * @returns A promise with QR content presented as string or undefined if the\n * scanner was closed.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @example Without `capture` option\n * if (open.isAvailable()) {\n *   const qr = await open({ text: 'Scan any QR' });\n * }\n * @example Using `capture` option\n * if (open.isAvailable()) {\n *   const qr = await open({\n *     text: 'Scan any QR',\n *     capture(scannedQr) {\n *       return scannedQr === 'any expected by me qr';\n *     }\n *   });\n * }\n */\nfunction _open(options?: OpenSharedOptions & {\n  /**\n   * Function, which should return true if the scanned QR should be captured.\n   * @param qr - scanned QR content.\n   */\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | undefined>;\n\n/**\n * Opens the scanner and calls the `onCaptured` function each time, a QR was\n * scanned.\n *\n * The function returns a promise which will be resolved when the QR scanner\n * was closed. It expects the scanner to be closed externally by a user or\n * via the `close` method.\n * @param options - method options.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_ALREADY_OPENED\n * @example\n * if (open.isAvailable()) {\n *   const promise = await open({\n *     text: 'Scan any QR',\n *     onCaptured(scannedQr) {\n *       if (scannedQr === 'any expected by me qr') {\n *         close();\n *       }\n *     }\n *   });\n *   console.log('The scanner was closed');\n * }\n */\nfunction _open(options: OpenSharedOptions & {\n  /**\n   * Function which will be called if a QR code was scanned.\n   * @param qr - scanned QR content.\n   */\n  onCaptured: (qr: string) => void;\n}): CancelablePromise<void>;\n\nfunction _open(options?: OpenSharedOptions & {\n  onCaptured?: (qr: string) => void;\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | void> {\n  return CancelablePromise.withFn((abortSignal) => {\n    if (isOpened()) {\n      throw new TypedError(ERR_ALREADY_OPENED, 'The QR Scanner is already opened');\n    }\n    isOpened.set(true);\n\n    options ||= {};\n    const { onCaptured, text, capture } = options;\n    const [, cleanup] = createCbCollector(\n      // Whenever the scanner was closed for some reason (by a developer or a\n      // user), we should resolve the promise with undefined.\n      isOpened.sub(() => {\n        promise.resolve();\n      }),\n      // Whenever user closed the scanner, update the isOpened signal state.\n      on(CLOSED_EVENT, () => {\n        isOpened.set(false);\n      }),\n      // Whenever some QR was scanned, we should check if it must be captured.\n      on(TEXT_RECEIVED_EVENT, (event) => {\n        if (onCaptured) {\n          onCaptured(event.data);\n        } else if (!capture || capture(event.data)) {\n          promise.resolve(event.data);\n          close();\n        }\n      }),\n    );\n\n    const promise = new EnhancedPromise<string | void>({ abortSignal })\n      .catch(close)\n      .finally(cleanup);\n\n    (options.postEvent || postEvent)(OPEN_METHOD, { text });\n\n    return promise;\n  }, options);\n}\n\nexport const open = wrapSupported('open', _open);","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { buttonColor } from '@/scopes/components/theme-params/signals.js';\nimport { bottomBarColorRGB } from '@/scopes/components/mini-app/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(key: K): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  position: 'left',\n  text: 'Cancel',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || bottomBarColorRGB() || '#000000',\n    textColor: s.textColor || buttonColor() || '#2481cc',\n  };\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @see State.backgroundColor\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * @see State.hasShineEffect\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * @see State.isEnabled\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * @see State.isLoaderVisible\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * @see State.isVisible\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * @see State.position\n */\nexport const position = fromState('position');\n\n/**\n * @see State.text\n */\nexport const text = fromState('text');\n\n/**\n * @see State.textColor\n */\nexport const textColor = fromState('textColor');\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport { createWrapSupported } from '@/scopes/toolkit/createWrapSupported.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_secondary_button';\nconst CLICK_EVENT_NAME = 'secondary_button_pressed';\nconst COMPONENT_NAME = 'secondaryButton';\n\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\n\n/**\n * Signal indicating if the Secondary Button is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\n/**\n * Mounts the Secondary Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n    prev && internalState.set(prev);\n    isMounted.set(true);\n  }\n});\n\n/**\n * Adds a new Secondary Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Secondary Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapSupported(\n  'onClick',\n  (fn: EventListener<'secondary_button_pressed'>): VoidFunction => on(CLICK_EVENT_NAME, fn),\n);\n\n/**\n * Removes the Secondary Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Secondary Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapSupported(\n  'offClick',\n  (fn: EventListener<'secondary_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Updates the Secondary Button state.\n * @param updates - state changes to perform.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (setParams.isAvailable()) {\n *   setParams({\n *     text: 'Submit',\n *     isEnabled: true,\n *     isVisible: true,\n *     position: 'left',\n *   });\n * }\n */\nexport const setParams = wrapComplete(\n  'setParams',\n  (updates: Partial<State>): void => {\n    internalState.set({\n      ...internalState(),\n      ...Object.fromEntries(\n        Object.entries(updates).filter(([, v]) => v !== undefined),\n      ),\n    });\n    setStorageValue<StorageValue>(COMPONENT_NAME, internalState());\n\n    // We should not commit changes until the payload is correct. Some version of Telegram will\n    // crash due to the empty value of the text.\n    const s = state();\n    s.text && postEvent(SETUP_METHOD_NAME, {\n      color: s.backgroundColor,\n      has_shine_effect: s.hasShineEffect,\n      is_active: s.isEnabled,\n      is_progress_visible: s.isLoaderVisible,\n      is_visible: s.isVisible,\n      position: s.position,\n      text: s.text,\n      text_color: s.textColor,\n    });\n  },\n);\n\n/**\n * Unmounts the Secondary Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport {\n  createWrapSupported\n} from '@/scopes/toolkit/createWrapSupported.js';\n\ntype StorageValue = boolean;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_settings_button';\nconst CLICK_EVENT_NAME = 'settings_button_pressed';\nconst COMPONENT_NAME = 'settingsButton';\n\n/**\n * Signal indicating if the Settings Button is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * Signal indicating if the Settings Button is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal indicating if the Settings Button is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\n\n/**\n * Hides the Settings Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.10\n * @example\n * if (hide.isAvailable()) {\n *   hide();\n * }\n */\nexport const hide = wrapComplete('hide', (): void => {\n  setVisibility(false);\n});\n\n/**\n * Mounts the Settings Button restoring its state.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.10\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    setVisibility(isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false);\n    isMounted.set(true);\n  }\n});\n\nfunction setVisibility(value: boolean): void {\n  if (value !== isVisible()) {\n    postEvent(SETUP_METHOD_NAME, { is_visible: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isVisible.set(value);\n  }\n}\n\n/**\n * Adds a new Settings Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.10\n * @example\n * if (onClick.isAvailable()) {\n *   const off = onClick(() => {\n *     console.log('User clicked the Settings Button');\n *     off();\n *   });\n * }\n */\nexport const onClick = wrapSupported(\n  'onClick',\n  (fn: EventListener<'settings_button_pressed'>): VoidFunction => on(CLICK_EVENT_NAME, fn),\n);\n\n/**\n * Removes the Settings Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @since Mini Apps v6.10\n * @example\n * if (offClick.isAvailable()) {\n *   function listener() {\n *     console.log('User clicked the Settings Button');\n *     offClick(listener);\n *   }\n *   onClick(listener);\n * }\n */\nexport const offClick = wrapSupported(\n  'offClick',\n  (fn: EventListener<'settings_button_pressed'>): void => {\n    off(CLICK_EVENT_NAME, fn);\n  },\n);\n\n/**\n * Shows the Settings Button.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @since Mini Apps v6.10\n * @example\n * if (show.isAvailable()) {\n *   show();\n * }\n */\nexport const show = wrapComplete('show', (): void => {\n  setVisibility(true);\n});\n\n/**\n * Unmounts the Settings Button.\n *\n * Note that this function does not remove listeners added via the `onClick`\n * function, so you have to remove them on your own.\n * @see onClick\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n","import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWrapComplete } from '@/scopes/toolkit/createWrapComplete.js';\nimport {\n  createWrapSupported\n} from '@/scopes/toolkit/createWrapSupported.js';\n\ntype StorageValue = boolean;\n\nconst SETUP_METHOD_NAME = 'web_app_setup_swipe_behavior';\nconst COMPONENT_NAME = 'swipeBehavior';\n\n/**\n * Signal indicating if the Swipe Behavior component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * Signal indicating if the Swipe Behavior is supported.\n */\nexport const isSupported = createIsSupported(SETUP_METHOD_NAME);\n\n/**\n * Signal indicating if vertical swipes are enabled.\n */\nexport const isVerticalEnabled = signal(true);\n\nconst wrapSupported = createWrapSupported(COMPONENT_NAME, SETUP_METHOD_NAME);\nconst wrapComplete = createWrapComplete(COMPONENT_NAME, isMounted, SETUP_METHOD_NAME);\n\n/**\n * Disables vertical swipes.\n * @since Mini Apps v7.7\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (disableVertical.isAvailable()) {\n *   disableVertical();\n * }\n */\nexport const disableVertical = wrapComplete('disableVertical', (): void => {\n  setVerticalEnabled(false);\n});\n\n/**\n * Enables vertical swipes.\n * @since Mini Apps v7.7\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @example\n * if (enableVertical.isAvailable()) {\n *   enableVertical();\n * }\n */\nexport const enableVertical = wrapComplete('enableVertical', (): void => {\n  setVerticalEnabled(true);\n});\n\n/**\n * Mounts the Swipe Behavior component restoring its state.\n * @since Mini Apps v7.7\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (mount.isAvailable()) {\n *   mount();\n * }\n */\nexport const mount = wrapSupported('mount', (): void => {\n  if (!isMounted()) {\n    setVerticalEnabled(\n      isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME) || false,\n      true,\n    );\n    isMounted.set(true);\n  }\n});\n\nfunction setVerticalEnabled(value: boolean, force?: boolean): void {\n  if (value !== isVerticalEnabled() || force) {\n    postEvent(SETUP_METHOD_NAME, { allow_vertical_swipe: value });\n    setStorageValue<StorageValue>(COMPONENT_NAME, value);\n    isVerticalEnabled.set(value);\n  }\n}\n\n/**\n * Unmounts the Swipe Behavior component.\n */\nexport function unmount(): void {\n  isMounted.set(false);\n}\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<State>({\n  height: 0,\n  width: 0,\n  isExpanded: false,\n  stableHeight: 0,\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction createStateComputed<K extends keyof State>(key: K): Computed<State[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * The current height of the **visible area** of the Mini App.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the bot can do the same by calling `expand` method. As the position of\n * the Mini App changes, the current height value of the visible area will be updated  in real\n * time.\n *\n * Please note that the refresh rate of this value is not sufficient to smoothly follow the\n * lower border of the window. It should not be used to pin interface elements to the bottom\n * of the visible area. It's more appropriate to use the value of the `stableHeight`\n * field for this purpose.\n *\n * @see stableHeight\n */\nexport const height = createStateComputed('height');\n\n/**\n * True if the Mini App is expanded to the maximum available height. Otherwise, if\n * the Mini App occupies part of the screen and can be expanded to the full height using\n * `expand` method.\n * @see expand\n */\nexport const isExpanded = createStateComputed('isExpanded');\n\n/**\n * True if the current viewport height is stable and is not going to change in the next moment.\n */\nexport const isStable = computed(() => {\n  const s = state();\n  return s.height === s.stableHeight;\n});\n\n/**\n * The height of the visible area of the Mini App in its last stable state.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the application can do the same by calling `expand` method.\n *\n * Unlike the value of `height`, the value of `stableHeight` does not change as the position\n * of the Mini App changes with user gestures or during animations. The value of `stableHeight`\n * will be updated after all gestures and animations are completed and the Mini App reaches its\n * final size.\n *\n * @see height\n */\nexport const stableHeight = createStateComputed('stableHeight');\n\n/**\n * Currently visible area width.\n */\nexport const width = createStateComputed('width');","import type {\n  ExecuteWithOptions,\n  CancelablePromise,\n} from '@telegram-apps/bridge';\n\nimport { request as _request } from '@/scopes/globals.js';\n\nexport interface RequestViewportResult {\n  height: number;\n  isExpanded: boolean;\n  isStable: boolean;\n  width: number;\n}\n\n/**\n * Requests viewport actual information from the Telegram application.\n * @param options - request options.\n * @example\n * const viewport = await request({\n *   timeout: 1000\n * });\n */\nexport function requestViewport(\n  options?: ExecuteWithOptions,\n): CancelablePromise<RequestViewportResult> {\n  return _request('web_app_request_viewport', 'viewport_changed', options).then(r => ({\n    height: r.height,\n    width: r.width,\n    isExpanded: r.is_expanded,\n    isStable: r.is_state_stable,\n  }));\n}\n","import {\n  off,\n  on,\n  retrieveLaunchParams,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  deleteCssVar,\n  setCssVar,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { createWrapMounted } from '@/scopes/toolkit/createWrapMounted.js';\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { throwCssVarsBound } from '@/scopes/toolkit/throwCssVarsBound.js';\n\nimport { requestViewport } from './requestViewport.js';\nimport {\n  state,\n  mountError,\n  isMounted,\n  isCssVarsBound,\n  isMounting,\n} from './signals.js';\nimport type { GetCSSVarNameFn } from './types.js';\nimport type { State } from './types.js';\n\ninterface StorageValue {\n  height: number;\n  isExpanded: boolean;\n  stableHeight: number;\n  width: number;\n}\n\nconst COMPONENT_NAME = 'viewport';\nconst wrapBasic = createWrapBasic(COMPONENT_NAME);\nconst wrapMounted = createWrapMounted(COMPONENT_NAME, isMounted);\n\n/**\n * Creates CSS variables connected with the current viewport.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-viewport-height`\n * - `--tg-viewport-width`\n * - `--tg-viewport-stable-height`\n *\n * Variables are being automatically updated if the viewport was changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * viewport property.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_VARS_ALREADY_BOUND\n * @throws {TypedError} ERR_NOT_MOUNTED\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example Using no arguments\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars();\n * }\n * @example Using custom CSS vars generator\n * if (bindCssVars.isAvailable()) {\n *   bindCssVars(key => `--my-prefix-${key}`);\n * }\n */\nexport const bindCssVars = wrapMounted(\n  'bindCssVars',\n  (getCSSVarName?: GetCSSVarNameFn): VoidFunction => {\n    isCssVarsBound() && throwCssVarsBound();\n\n    getCSSVarName ||= (prop) => `--tg-viewport-${camelToKebab(prop)}`;\n    const props = ['height', 'width', 'stableHeight'] as const;\n\n    function actualize(): void {\n      props.forEach(prop => {\n        setCssVar(getCSSVarName!(prop), `${state()[prop]}px`);\n      });\n    }\n\n    actualize();\n    state.sub(actualize);\n    isCssVarsBound.set(true);\n\n    return () => {\n      props.forEach(deleteCssVar);\n      state.unsub(actualize);\n      isCssVarsBound.set(false);\n    };\n  },\n);\n\n/**\n * A method that expands the Mini App to the maximum available height. To find out if the Mini\n * App is expanded to the maximum height, refer to the value of the `isExpanded`.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @see isExpanded\n * @example\n * if (expand.isAvailable()) {\n *   expand();\n * }\n */\nexport const expand = wrapBasic('expand', (): void => {\n  postEvent('web_app_expand');\n});\n\n/**\n * Mounts the Viewport component.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_ALREADY_MOUNTING\n * @example\n * if (mount.isAvailable() && !isMounting()) {\n *   await mount();\n * }\n */\nexport const mount = wrapBasic(\n  'mount',\n  createMountFn<State>(\n    COMPONENT_NAME,\n    options => {\n      // Try to restore the state using the storage.\n      const s = isPageReload() && getStorageValue<StorageValue>(COMPONENT_NAME);\n      if (s) {\n        return s;\n      }\n\n      // If the platform has a stable viewport, it means we could use the window global object\n      // properties.\n      if ([\n        'macos',\n        'tdesktop',\n        'unigram',\n        'webk',\n        'weba',\n        'web',\n      ].includes(retrieveLaunchParams().platform)) {\n        const w = window;\n        return {\n          isExpanded: true,\n          height: w.innerHeight,\n          width: w.innerWidth,\n          stableHeight: w.innerHeight,\n        };\n      }\n\n      // We were unable to retrieve data locally. In this case, we are sending\n      // a request returning the viewport information.\n      options.timeout ||= 1000;\n      return requestViewport(options).then(data => ({\n        height: data.height,\n        isExpanded: data.isExpanded,\n        stableHeight: data.isStable ? data.height : state().stableHeight,\n        width: data.width,\n      }));\n    },\n    result => {\n      on('viewport_changed', onViewportChanged);\n      setState(result);\n    },\n    { isMounted, isMounting, mountError },\n  ),\n);\n\nconst onViewportChanged: EventListener<'viewport_changed'> = (data) => {\n  setState({\n    height: data.height,\n    isExpanded: data.is_expanded,\n    stableHeight: data.is_state_stable ? data.height : state().stableHeight,\n    width: data.width,\n  });\n};\n\nfunction setState(s: State) {\n  state.set({\n    isExpanded: s.isExpanded,\n    height: truncate(s.height),\n    width: truncate(s.width),\n    stableHeight: truncate(s.stableHeight),\n  });\n  setStorageValue<StorageValue>('viewport', state());\n}\n\n/**\n * Formats value to make it stay in bounds [0, +Inf).\n * @param value - value to format.\n */\nfunction truncate(value: number): number {\n  return Math.max(value, 0);\n}\n\n/**\n * Unmounts the Viewport.\n */\nexport function unmount(): void {\n  off('viewport_changed', onViewportChanged);\n  isMounted.set(false);\n}\n","import { type OpenLinkBrowser, TypedError } from '@telegram-apps/bridge';\n\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { ERR_INVALID_URL } from '@/errors.js';\nimport { postEvent } from '@/scopes/globals.js';\n\nexport interface OpenLinkOptions {\n  /**\n   * Attempts to use the instant view mode.\n   */\n  tryInstantView?: boolean;\n  /**\n   * A preferred browser to open the link in.\n   */\n  tryBrowser?: OpenLinkBrowser;\n}\n\nconst wrapBasic = createWrapBasic();\n\n/**\n * Opens a link.\n *\n * The Mini App will not be closed.\n *\n * Note that this method can be called only in response to the user\n * interaction with the Mini App interface (e.g. click inside the Mini App or on the main button).\n * @param url - URL to be opened.\n * @param options - additional options.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_INVALID_URL\n * @example\n * if (openLink.isAvailable()) {\n *   openLink('https://google.com', {\n *     tryInstantView: true,\n *     tryBrowser: 'chrome',\n *   });\n * }\n */\nexport const openLink = wrapBasic(\n  'openLink',\n  (url: string | URL, options?: OpenLinkOptions): void => {\n    if (typeof url === 'string') {\n      try {\n        url = new URL(url);\n      } catch (e) {\n        throw new TypedError(ERR_INVALID_URL, `\"${url.toString()}\" is invalid URL`, e);\n      }\n    }\n    options ||= {};\n    postEvent('web_app_open_link', {\n      url: url.toString(),\n      try_browser: options.tryBrowser,\n      try_instant_view: options.tryInstantView,\n    });\n  },\n);","import { supports, TypedError } from '@telegram-apps/bridge';\n\nimport { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { ERR_INVALID_URL } from '@/errors.js';\nimport { $version, postEvent } from '@/scopes/globals.js';\n\nconst OPEN_TG_LINK_METHOD = 'web_app_open_tg_link';\nconst wrapBasic = createWrapBasic();\n\n/**\n * Opens a Telegram link inside the Telegram app. The function expects passing a link in a full\n * format using the hostname \"t.me\".\n *\n * The Mini App will be closed.\n * @param url - URL to be opened.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_INVALID_URL\n * @example\n * if (openTelegramLink.isAvailable()) {\n *   openTelegramLink('https://t.me/heyqbnk');\n * }\n */\nexport const openTelegramLink = wrapBasic(\n  'openTelegramLink',\n  (url: string | URL): void => {\n    const urlString = url.toString();\n    if (!urlString.match(/^https:\\/\\/t.me\\/.+/)) {\n      throw new TypedError(ERR_INVALID_URL, `\"${urlString}\" is invalid URL`);\n    }\n\n    if (!supports(OPEN_TG_LINK_METHOD, $version())) {\n      window.location.href = urlString;\n      return;\n    }\n\n    url = new URL(url);\n    postEvent(OPEN_TG_LINK_METHOD, { path_full: url.pathname + url.search });\n  },\n);","import { createWrapBasic } from '@/scopes/toolkit/createWrapBasic.js';\nimport { openTelegramLink } from '@/scopes/utilities/links/openTelegramLink.js';\n\nconst wrapBasic = createWrapBasic();\n\n/**\n * Shares the specified URL with the passed to the chats, selected by user.\n * After being called, it closes the mini application.\n *\n * This method uses Telegram's Share Links.\n * @param url - URL to share.\n * @param text - text to append after the URL.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @see https://core.telegram.org/api/links#share-links\n * @see https://core.telegram.org/widgets/share#custom-buttons\n */\nexport const shareURL = wrapBasic(\n  'shareURL',\n  (url: string, text?: string): void => {\n    openTelegramLink(\n      `https://t.me/share/url?` + new URLSearchParams({ url, text: text || '' })\n        .toString()\n        // By default, URL search params encode spaces with \"+\".\n        // We are replacing them with \"%20\", because plus symbols are working incorrectly\n        // in Telegram.\n        .replace(/\\+/g, '%20'),\n    );\n  },\n);\n","import { signal } from '@telegram-apps/signals';\nimport { type AsyncOptions, type PhoneRequestedStatus, TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_ALREADY_REQUESTING } from '@/errors.js';\nimport { request } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nexport const REQUEST_PHONE_METHOD = 'web_app_request_phone';\n\n/**\n * Signal indicating if phone access is currently being requested.\n */\nexport const isRequestingPhoneAccess = signal(false);\n\n/**\n * Requests current user phone access. Method returns promise, which resolves\n * status of the request. In case, user accepted the request, Mini App bot will receive\n * the according notification.\n *\n * To obtain the retrieved information instead, utilize the `requestContact` method.\n * @param options - additional options.\n * @since Mini Apps v6.9\n * @see requestContact\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestPhoneAccess.isAvailable()) {\n *   const status = await requestPhoneAccess();\n * }\n */\nexport const requestPhoneAccess = wrapSafe(\n  'requestPhoneAccess',\n  (options?: AsyncOptions): Promise<PhoneRequestedStatus> => {\n    if (isRequestingPhoneAccess()) {\n      throw new TypedError(ERR_ALREADY_REQUESTING, 'Phone access request is currently in progress');\n    }\n    isRequestingPhoneAccess.set(true);\n\n    return request(REQUEST_PHONE_METHOD, 'phone_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingPhoneAccess.set(false);\n      });\n  },\n  {\n    isSupported: REQUEST_PHONE_METHOD,\n  },\n);","import {\n  type AsyncOptions,\n  CancelablePromise,\n  sleep,\n  TypedError,\n} from '@telegram-apps/bridge';\nimport { date, number, object, searchParams, string } from '@telegram-apps/transformers';\n\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { invokeCustomMethod } from '@/scopes/globals.js';\nimport { ERR_ACCESS_DENIED } from '@/errors.js';\n\nimport { REQUEST_PHONE_METHOD, requestPhoneAccess } from './requestPhoneAccess.js';\n\n/**\n * Requested contact information.\n */\nexport interface RequestedContact {\n  contact: {\n    userId: number;\n    phoneNumber: string;\n    firstName: string;\n    lastName?: string;\n  };\n  authDate: Date;\n  hash: string;\n}\n\n/**\n * Attempts to get requested contact.\n * @param options - execution options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nfunction getRequestedContact(options?: AsyncOptions): CancelablePromise<RequestedContact> {\n  options ||= {};\n  return invokeCustomMethod('getRequestedContact', {}, {\n    ...options,\n    timeout: options.timeout || 5000,\n  })\n    .then(\n      searchParams({\n        contact: object({\n          userId: ['user_id', number()],\n          phoneNumber: ['phone_number', string()],\n          firstName: ['first_name', string()],\n          lastName: ['last_name', string(true)],\n        })(),\n        authDate: ['auth_date', date()],\n        hash: string(),\n      })(),\n    );\n}\n\n/**\n * Requests current user contact information. In contrary to requestPhoneAccess, this method\n * returns promise with contact information that rejects in case, user denied access, or request\n * failed.\n * @param options - additional options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_ACCESS_DENIED\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestContact.isAvailable()) {\n *   const contact = await requestContact();\n * }\n */\nexport const requestContact = wrapSafe(\n  'requestContact',\n  (options?: AsyncOptions): CancelablePromise<RequestedContact> => {\n    return CancelablePromise.withFn(\n      async (abortSignal) => {\n        const asyncOptions = { abortSignal };\n\n        // First of all, let's try to get the requested contact.\n        // Probably, we already requested it before.\n        try {\n          return await getRequestedContact(asyncOptions);\n        } catch {\n        }\n\n        // Then, request access to the user's phone.\n        const status = await requestPhoneAccess(asyncOptions);\n        if (status !== 'sent') {\n          throw new TypedError(ERR_ACCESS_DENIED, 'User denied access');\n        }\n\n        // Time to wait before executing the next request.\n        let sleepTime = 50;\n\n        // We are trying to retrieve the requested contact until the deadline was reached.\n        while (!abortSignal.aborted) {\n          try {\n            return await getRequestedContact(asyncOptions);\n          } catch {\n          }\n\n          // Sleep for some time.\n          await sleep(sleepTime);\n\n          // Increase the sleep time not to kill the backend service.\n          sleepTime += 50;\n        }\n\n        // Reachable code, but the promise will be rejected and this result will be\n        // ignored.\n        return null as any;\n      }, options,\n    );\n  },\n  {\n    isSupported: REQUEST_PHONE_METHOD,\n  },\n);","import {\n  TypedError,\n  type WriteAccessRequestedStatus,\n  type AsyncOptions,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { ERR_ALREADY_REQUESTING } from '@/errors.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nconst REQUEST_WRITE_ACCESS_METHOD = 'web_app_request_write_access';\n\n/**\n * Signal indicating if write access is currently being requested.\n */\nexport const isRequestingWriteAccess = signal(false);\n\n/**\n * Requests write message access to the current user.\n * @param options - additional options.\n * @since Mini Apps v6.9\n * @throws {TypedError} ERR_ALREADY_REQUESTING\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (requestWriteAccess.isAvailable()) {\n *   const status = await requestWriteAccess();\n * }\n */\nexport const requestWriteAccess = wrapSafe(\n  'requestWriteAccess',\n  (options?: AsyncOptions): Promise<WriteAccessRequestedStatus> => {\n    if (isRequestingWriteAccess()) {\n      throw new TypedError(ERR_ALREADY_REQUESTING, 'Write access request is currently in progress');\n    }\n    isRequestingWriteAccess.set(true);\n\n    return request(REQUEST_WRITE_ACCESS_METHOD, 'write_access_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingWriteAccess.set(false);\n      });\n  },\n  {\n    isSupported: REQUEST_WRITE_ACCESS_METHOD,\n  },\n);\n","import type { AsyncOptions, CancelablePromise } from '@telegram-apps/bridge';\nimport { date } from '@telegram-apps/transformers';\n\nimport { invokeCustomMethod } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\n/**\n * @returns Current server time.\n * @param options - execution options.\n */\nexport const getCurrentTime = wrapSafe(\n  'getCurrentTime',\n  (options?: AsyncOptions): CancelablePromise<Date> => {\n    return invokeCustomMethod('getCurrentTime', {}, options).then(date());\n  },\n  {\n    isSupported: 'web_app_invoke_custom_method',\n  },\n);","import { type AsyncOptions, type CancelablePromise, captureSameReq } from '@telegram-apps/bridge';\n\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { createRequestId, request } from '@/scopes/globals.js';\n\nconst READ_CLIPBOARD_METHOD = 'web_app_read_text_from_clipboard';\n\n/**\n * Reads a text from the clipboard and returns a `string` or `null`. `null` is returned\n * in cases:\n * - A value in the clipboard is not a text.\n * - Access to the clipboard is not granted.\n * @since Mini Apps v6.4\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @example\n * if (readTextFromClipboard.isAvailable()) {\n *   const value = await readTextFromClipboard();\n * }\n */\nexport const readTextFromClipboard = wrapSafe(\n  'readTextFromClipboard',\n  (options?: AsyncOptions): CancelablePromise<string | null> => {\n    const reqId = createRequestId();\n\n    return request(READ_CLIPBOARD_METHOD, 'clipboard_text_received', {\n      ...options,\n      params: { req_id: reqId },\n      capture: captureSameReq(reqId),\n    }).then(({ data = null }) => data);\n  },\n  {\n    isSupported: READ_CLIPBOARD_METHOD,\n  },\n);","import { TypedError } from '@telegram-apps/bridge';\n\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { ERR_DATA_INVALID_SIZE } from '@/errors.js';\nimport { postEvent } from '@/scopes/globals.js';\n\n/**\n * Sends data to the bot.\n *\n * When this method called, a service message sent to the bot containing the data of the length\n * up to 4096 bytes, and the Mini App closed.\n *\n * See the field `web_app_data` in the class [Message](https://core.telegram.org/bots/api#message).\n *\n * This method is only available for Mini Apps launched via a Keyboard button.\n * @param data - data to send to bot.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_DATA_INVALID_SIZE\n * @example\n * if (sendData.isAvailable()) {\n *   sendData('Here comes my data');\n * }\n */\nexport const sendData = wrapSafe(\n  'sendData',\n  (data: string): void => {\n    const { size } = new Blob([data]);\n    if (!size || size > 4096) {\n      throw new TypedError(ERR_DATA_INVALID_SIZE, size\n        ? 'Maximum size of data to send is 4096 bytes'\n        : 'Attempted to send empty data');\n    }\n    postEvent('web_app_data_send', { data });\n  },\n);","import { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\nimport { postEvent } from '@/scopes/globals.js';\n\nconst SHARE_STORY_METHOD = 'web_app_share_to_story';\n\nexport interface ShareStoryOptions {\n  /**\n   * The caption to be added to the media.\n   * 0-200 characters for regular users and 0-2048 characters for premium subscribers.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  text?: string;\n  /**\n   * An object that describes a widget link to be included in the story.\n   * Note that only premium subscribers can post stories with links.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  widgetLink?: {\n    /**\n     * The URL to be included in the story.\n     */\n    url: string;\n    /**\n     * The name to be displayed for the widget link, 0-48 characters.\n     */\n    name?: string;\n  };\n}\n\n/**\n * Opens the native story editor.\n * @since Mini Apps v7.8\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (shareStory.isAvailable()) {\n *   shareStory('https://example.com/background.png', {\n *     text: 'Look at this cool group!',\n *     widgetLink: {\n *       url: 'https://t.me/heyqbnk',\n *       name: 'Vlad\\'s community',\n *     },\n *   });\n * }\n */\nexport const shareStory = wrapSafe(\n  'shareStory',\n  (mediaUrl: string, options?: ShareStoryOptions) => {\n    options ||= {};\n    postEvent(SHARE_STORY_METHOD, {\n      text: options.text,\n      media_url: mediaUrl,\n      widget_link: options.widgetLink,\n    });\n  },\n  { isSupported: SHARE_STORY_METHOD },\n);","import { retrieveLaunchParams, type SwitchInlineQueryChatType } from '@telegram-apps/bridge';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { wrapSafe } from '@/scopes/toolkit/wrapSafe.js';\n\nconst SWITCH_INLINE_QUERY_METHOD = 'web_app_switch_inline_query';\n\n/**\n * Inserts the bot's username and the specified inline query in the current chat's input field.\n * Query may be empty, in which case only the bot's username will be inserted. The client prompts\n * the user to choose a specific chat, then opens that chat and inserts the bot's username and\n * the specified inline query in the input field.\n * @param query - text which should be inserted in the input after the current bot name. Max\n * length is 256 symbols.\n * @param chatTypes - List of chat types which could be chosen to send the message. Could be an\n * empty list.\n * @since Mini Apps v6.7\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_UNKNOWN_ENV\n * @throws {TypedError} ERR_NOT_INITIALIZED\n * @example\n * if (switchInlineQuery.isAvailable()) {\n *   switchInlineQuery('my query goes here', ['users']);\n * }\n */\nexport const switchInlineQuery = wrapSafe(\n  'switchInlineQuery',\n  (query: string, chatTypes?: SwitchInlineQueryChatType[]) => {\n    postEvent(SWITCH_INLINE_QUERY_METHOD, {\n      query: query,\n      chat_types: chatTypes || [],\n    });\n  },\n  {\n    isSupported: [SWITCH_INLINE_QUERY_METHOD, {\n      fn: () => !!retrieveLaunchParams().botInline,\n      error: 'Mini App should be ran in Bot inline mode',\n    }],\n  },\n);\n","export type SafeCallResult<T, E> =\n  | { result: T }\n  | { error: E }\n\n/**\n * Calls the function and prevents it from throwing error. It returns an object\n * with one of two properties: `result` or `error`.\n *\n * You can use this function to safely execute any other function.\n * @param fn - function to call.\n */\nexport function safeCall<T, E = unknown>(fn: () => T): SafeCallResult<T, E> {\n  try {\n    return { result: fn() };\n  } catch (error) {\n    return { error: error as E };\n  }\n}\n","import {\n  createCbCollector,\n  defineEventHandlers,\n  on,\n  removeEventHandlers,\n} from '@telegram-apps/bridge';\n\nimport { postEvent, configure, type ConfigureOptions } from '@/scopes/globals.js';\n\nexport interface InitOptions extends ConfigureOptions {\n  /**\n   * True if SDK should accept styles sent from the Telegram application.\n   * @default true\n   */\n  acceptCustomStyles?: boolean;\n}\n\n/**\n * Initializes the SDK allowing it to properly handle events, sent from the native Telegram\n * application.\n * @param options - function options.\n * @returns A function, to perform a cleanup.\n */\nexport function init(options?: InitOptions): VoidFunction {\n  // Configure the package global dependencies.\n  configure(options);\n\n  // Define event handlers, so we could receive the events from the Telegram application.\n  defineEventHandlers();\n\n  const [addCleanup, cleanup] = createCbCollector(\n    on('reload_iframe', () => {\n      postEvent('iframe_will_reload');\n      window.location.reload();\n    }),\n    removeEventHandlers,\n  );\n\n  const { acceptCustomStyles = true } = options || {};\n  if (acceptCustomStyles) {\n    const style = document.createElement('style');\n    style.id = 'telegram-custom-styles';\n    document.head.appendChild(style);\n\n    addCleanup(\n      on('set_custom_style', html => {\n        // It is safe to use innerHTML here as long as style tag has a special behavior related\n        // to the specified content.\n        // In case any script will be passed here, it will not be executed, so XSS is not possible.\n        style.innerHTML = html;\n      }),\n      () => {\n        document.head.removeChild(style);\n      },\n    );\n  }\n\n  // Notify Telegram that the application is ready.\n  //\n  // This will result in sending style tag html content from the Telegram web application.\n  // We should call this method also to start receiving \"reload_iframe\" events from the Telegram\n  // application.\n  //\n  // It really has no effect outside non-Telegram web environment.\n  postEvent('iframe_ready', { reload_supported: true });\n\n  return cleanup;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}